"use strict";(self.webpackChunkdocusaurus=self.webpackChunkdocusaurus||[]).push([[7614],{3905:function(t,e,n){n.d(e,{Zo:function(){return o},kt:function(){return N}});var a=n(7294);function l(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function r(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function i(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?r(Object(n),!0).forEach((function(e){l(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function p(t,e){if(null==t)return{};var n,a,l=function(t,e){if(null==t)return{};var n,a,l={},r=Object.keys(t);for(a=0;a<r.length;a++)n=r[a],e.indexOf(n)>=0||(l[n]=t[n]);return l}(t,e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);for(a=0;a<r.length;a++)n=r[a],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(l[n]=t[n])}return l}var d=a.createContext({}),m=function(t){var e=a.useContext(d),n=e;return t&&(n="function"==typeof t?t(e):i(i({},e),t)),n},o=function(t){var e=m(t.components);return a.createElement(d.Provider,{value:e},t.children)},k={inlineCode:"code",wrapper:function(t){var e=t.children;return a.createElement(a.Fragment,{},e)}},u=a.forwardRef((function(t,e){var n=t.components,l=t.mdxType,r=t.originalType,d=t.parentName,o=p(t,["components","mdxType","originalType","parentName"]),u=m(n),N=l,s=u["".concat(d,".").concat(N)]||u[N]||k[N]||r;return n?a.createElement(s,i(i({ref:e},o),{},{components:n})):a.createElement(s,i({ref:e},o))}));function N(t,e){var n=arguments,l=e&&e.mdxType;if("string"==typeof t||l){var r=n.length,i=new Array(r);i[0]=u;var p={};for(var d in e)hasOwnProperty.call(e,d)&&(p[d]=e[d]);p.originalType=t,p.mdxType="string"==typeof t?t:l,i[1]=p;for(var m=2;m<r;m++)i[m]=n[m];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}u.displayName="MDXCreateElement"},2145:function(t,e,n){n.r(e),n.d(e,{assets:function(){return o},contentTitle:function(){return d},default:function(){return N},frontMatter:function(){return p},metadata:function(){return m},toc:function(){return k}});var a=n(7462),l=n(3366),r=(n(7294),n(3905)),i=["components"],p={},d="\u6570\u636e\u5e93\u8fc1\u79fb Migrations",m={unversionedId:"laravel/migrations",id:"laravel/migrations",title:"\u6570\u636e\u5e93\u8fc1\u79fb Migrations",description:"\u7b80\u4ecb",source:"@site/docs/laravel/migrations.md",sourceDirName:"laravel",slug:"/laravel/migrations",permalink:"/docs/laravel/migrations",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"\u8def\u7531\u4e2d\u95f4\u4ef6",permalink:"/docs/laravel/middleware"},next:{title:"\u8d44\u6e90\u4efb\u52a1\u7f16\u8bd1\u5668 Laravel Mix",permalink:"/docs/laravel/mix"}},o={},k=[{value:"\u7b80\u4ecb",id:"\u7b80\u4ecb",level:2},{value:"\u751f\u6210\u8fc1\u79fb",id:"\u751f\u6210\u8fc1\u79fb",level:2},{value:"\u8fc1\u79fb\u7ed3\u6784",id:"\u8fc1\u79fb\u7ed3\u6784",level:2},{value:"\u8fd0\u884c\u8fc1\u79fb",id:"\u8fd0\u884c\u8fc1\u79fb",level:2},{value:"\u5728\u751f\u4ea7\u73af\u5883\u5f3a\u5236\u6267\u884c\u8fc1\u79fb",id:"\u5728\u751f\u4ea7\u73af\u5883\u5f3a\u5236\u6267\u884c\u8fc1\u79fb",level:4},{value:"\u56de\u6eda\u8fc1\u79fb",id:"\u56de\u6eda\u8fc1\u79fb",level:3},{value:"\u4f7f\u7528\u5355\u4e2a\u547d\u4ee4\u6765\u6267\u884c\u56de\u6eda\u6216\u8fc1\u79fb",id:"\u4f7f\u7528\u5355\u4e2a\u547d\u4ee4\u6765\u6267\u884c\u56de\u6eda\u6216\u8fc1\u79fb",level:4},{value:"\u5220\u9664\u6240\u6709\u8868 &amp; \u8fc1\u79fb",id:"\u5220\u9664\u6240\u6709\u8868--\u8fc1\u79fb",level:4},{value:"\u6570\u636e\u8868",id:"\u6570\u636e\u8868",level:2},{value:"\u521b\u5efa\u6570\u636e\u8868",id:"\u521b\u5efa\u6570\u636e\u8868",level:3},{value:"\u68c0\u67e5\u6570\u636e\u8868\u6216\u5b57\u6bb5\u662f\u5426\u5b58\u5728",id:"\u68c0\u67e5\u6570\u636e\u8868\u6216\u5b57\u6bb5\u662f\u5426\u5b58\u5728",level:4},{value:"\u6570\u636e\u5e93\u8fde\u63a5 &amp; \u8868\u9009\u9879",id:"\u6570\u636e\u5e93\u8fde\u63a5--\u8868\u9009\u9879",level:4},{value:"\u91cd\u547d\u540d/\u5220\u9664\u6570\u636e\u8868",id:"\u91cd\u547d\u540d\u5220\u9664\u6570\u636e\u8868",level:3},{value:"\u91cd\u547d\u540d\u5e26\u5916\u952e\u7684\u6570\u636e\u8868",id:"\u91cd\u547d\u540d\u5e26\u5916\u952e\u7684\u6570\u636e\u8868",level:4},{value:"\u5b57\u6bb5",id:"\u5b57\u6bb5",level:2},{value:"\u521b\u5efa\u5b57\u6bb5",id:"\u521b\u5efa\u5b57\u6bb5",level:3},{value:"\u53ef\u7528\u7684\u5b57\u6bb5\u7c7b\u578b",id:"\u53ef\u7528\u7684\u5b57\u6bb5\u7c7b\u578b",level:4},{value:"\u5b57\u6bb5\u4fee\u9970",id:"\u5b57\u6bb5\u4fee\u9970",level:3},{value:"\u4fee\u6539\u5b57\u6bb5",id:"\u4fee\u6539\u5b57\u6bb5",level:3},{value:"\u5148\u51b3\u6761\u4ef6",id:"\u5148\u51b3\u6761\u4ef6",level:4},{value:"\u66f4\u65b0\u5b57\u6bb5\u5c5e\u6027",id:"\u66f4\u65b0\u5b57\u6bb5\u5c5e\u6027",level:4},{value:"\u91cd\u547d\u540d\u5b57\u6bb5",id:"\u91cd\u547d\u540d\u5b57\u6bb5",level:4},{value:"\u5220\u9664\u5b57\u6bb5",id:"\u5220\u9664\u5b57\u6bb5",level:3},{value:"\u53ef\u7528\u7684\u547d\u4ee4\u522b\u540d",id:"\u53ef\u7528\u7684\u547d\u4ee4\u522b\u540d",level:4},{value:"\u7d22\u5f15",id:"\u7d22\u5f15",level:2},{value:"\u521b\u5efa\u7d22\u5f15",id:"\u521b\u5efa\u7d22\u5f15",level:3},{value:"\u53ef\u7528\u7684\u7d22\u5f15\u7c7b\u578b",id:"\u53ef\u7528\u7684\u7d22\u5f15\u7c7b\u578b",level:4},{value:"\u7d22\u5f15\u957f\u5ea6 &amp; MySQL / MariaDB",id:"\u7d22\u5f15\u957f\u5ea6--mysql--mariadb",level:4},{value:"\u5220\u9664\u7d22\u5f15",id:"\u5220\u9664\u7d22\u5f15",level:3},{value:"\u5916\u952e\u7ea6\u675f",id:"\u5916\u952e\u7ea6\u675f",level:3},{value:"\u8bd1\u8005\u7f72\u540d",id:"\u8bd1\u8005\u7f72\u540d",level:2}],u={toc:k};function N(t){var e=t.components,n=(0,l.Z)(t,i);return(0,r.kt)("wrapper",(0,a.Z)({},u,n,{components:e,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"\u6570\u636e\u5e93\u8fc1\u79fb-migrations"},"\u6570\u636e\u5e93\u8fc1\u79fb Migrations"),(0,r.kt)("h2",{id:"\u7b80\u4ecb"},"\u7b80\u4ecb"),(0,r.kt)("p",null,"\u6570\u636e\u5e93\u8fc1\u79fb\u5c31\u50cf\u662f\u6570\u636e\u5e93\u7684\u7248\u672c\u63a7\u5236\uff0c\u53ef\u4ee5\u8ba9\u4f60\u7684\u56e2\u961f\u8f7b\u677e\u4fee\u6539\u5e76\u5171\u4eab\u5e94\u7528\u7a0b\u5e8f\u7684\u6570\u636e\u5e93\u7ed3\u6784\u3002\u8fc1\u79fb\u901a\u5e38\u4e0e Laravel \u7684\u6570\u636e\u5e93\u7ed3\u6784\u751f\u6210\u5668\u914d\u5408\u4f7f\u7528\uff0c\u8ba9\u4f60\u8f7b\u677e\u5730\u6784\u5efa\u6570\u636e\u5e93\u7ed3\u6784\u3002\u5982\u679c\u4f60\u66fe\u7ecf\u8bd5\u8fc7\u8ba9\u540c\u4e8b\u624b\u52a8\u5728\u6570\u636e\u5e93\u7ed3\u6784\u4e2d\u6dfb\u52a0\u5b57\u6bb5\uff0c\u90a3\u4e48\u6570\u636e\u5e93\u8fc1\u79fb\u53ef\u4ee5\u8ba9\u4f60\u4e0d\u518d\u9700\u8981\u505a\u8fd9\u6837\u7684\u4e8b\u60c5\u3002"),(0,r.kt)("p",null,"Laravel ",(0,r.kt)("inlineCode",{parentName:"p"},"Schema")," ",(0,r.kt)("a",{parentName:"p",href:"/docs/laravel/facades"},"facade")," \u5bf9\u6240\u6709 Laravel \u652f\u6301\u7684\u6570\u636e\u5e93\u7cfb\u7edf\u63d0\u4f9b\u4e86\u521b\u5efa\u548c\u64cd\u4f5c\u6570\u636e\u8868\u7684\u76f8\u5e94\u652f\u6301\u3002"),(0,r.kt)("h2",{id:"\u751f\u6210\u8fc1\u79fb"},"\u751f\u6210\u8fc1\u79fb"),(0,r.kt)("p",null,"\u4f7f\u7528 ",(0,r.kt)("a",{parentName:"p",href:"/docs/laravel/artisan"},"Artisan \u547d\u4ee4"),"  ",(0,r.kt)("inlineCode",{parentName:"p"},"make:migration")," \u6765\u521b\u5efa\u8fc1\u79fb\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"php artisan make:migration create_users_table\n")),(0,r.kt)("p",null,"\u65b0\u7684\u8fc1\u79fb\u6587\u4ef6\u4f1a\u88ab\u653e\u7f6e\u5728 ",(0,r.kt)("inlineCode",{parentName:"p"},"database/migrations")," \u76ee\u5f55\u4e2d\u3002\u6bcf\u4e2a\u8fc1\u79fb\u6587\u4ef6\u7684\u540d\u79f0\u90fd\u5305\u542b\u4e86\u4e00\u4e2a\u65f6\u95f4\u6233\uff0c\u4ee5\u4fbf\u8ba9 Laravel \u786e\u8ba4\u8fc1\u79fb\u7684\u987a\u5e8f\u3002"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"--table")," \u548c ",(0,r.kt)("inlineCode",{parentName:"p"},"--create")," \u9009\u9879\u53ef\u7528\u6765\u6307\u5b9a\u6570\u636e\u8868\u7684\u540d\u79f0\uff0c\u6216\u662f\u8be5\u8fc1\u79fb\u88ab\u6267\u884c\u65f6\u662f\u5426\u5c06\u521b\u5efa\u7684\u65b0\u6570\u636e\u8868\u3002\u8fd9\u4e9b\u9009\u9879\u9700\u5728\u9884\u751f\u6210\u8fc1\u79fb\u6587\u4ef6\u65f6\u586b\u5165\u6307\u5b9a\u7684\u6570\u636e\u8868\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"php artisan make:migration create_users_table --create=users\n\nphp artisan make:migration add_votes_to_users_table --table=users\n")),(0,r.kt)("p",null,"\u5982\u679c\u4f60\u60f3\u4e3a\u751f\u6210\u7684\u8fc1\u79fb\u6307\u5b9a\u4e00\u4e2a\u81ea\u5b9a\u4e49\u8f93\u51fa\u8def\u5f84\uff0c\u5219\u53ef\u4ee5\u5728\u8fd0\u884c ",(0,r.kt)("inlineCode",{parentName:"p"},"make:migration")," \u547d\u4ee4\u65f6\u6dfb\u52a0 ",(0,r.kt)("inlineCode",{parentName:"p"},"--path")," \u9009\u9879\u3002\u7ed9\u5b9a\u7684\u8def\u5f84\u5fc5\u987b\u662f\u76f8\u5bf9\u4e8e\u5e94\u7528\u7a0b\u5e8f\u7684\u57fa\u672c\u8def\u5f84\u3002"),(0,r.kt)("h2",{id:"\u8fc1\u79fb\u7ed3\u6784"},"\u8fc1\u79fb\u7ed3\u6784"),(0,r.kt)("p",null,"\u8fc1\u79fb\u7c7b\u901a\u5e38\u4f1a\u5305\u542b\u4e24\u4e2a\u65b9\u6cd5\uff1a",(0,r.kt)("inlineCode",{parentName:"p"},"up")," \u548c ",(0,r.kt)("inlineCode",{parentName:"p"},"down"),"\u3002",(0,r.kt)("inlineCode",{parentName:"p"},"up")," \u65b9\u6cd5\u53ef\u4e3a\u6570\u636e\u5e93\u6dfb\u52a0\u65b0\u7684\u6570\u636e\u8868\u3001\u5b57\u6bb5\u6216\u7d22\u5f15\uff0c\u800c ",(0,r.kt)("inlineCode",{parentName:"p"},"down")," \u65b9\u6cd5\u5219\u662f ",(0,r.kt)("inlineCode",{parentName:"p"},"up")," \u65b9\u6cd5\u7684\u9006\u64cd\u4f5c\u3002"),(0,r.kt)("p",null,"\u4f60\u53ef\u4ee5\u5728\u8fd9\u4e24\u4e2a\u65b9\u6cd5\u4e2d\u4f7f\u7528 Laravel \u6570\u636e\u5e93\u7ed3\u6784\u751f\u6210\u5668\u6765\u521b\u5efa\u4ee5\u53ca\u4fee\u6539\u6570\u636e\u8868\u3002\u82e5\u8981\u4e86\u89e3  ",(0,r.kt)("inlineCode",{parentName:"p"},"Schema")," \u751f\u6210\u5668\u4e2d\u7684\u6240\u6709\u53ef\u7528\u65b9\u6cd5\uff0c",(0,r.kt)("a",{parentName:"p",href:"#creating-tables"},"\u53ef\u67e5\u9605\u5b83\u7684\u6587\u6863"),"\u3002\u4ee5\u4e0b\u7684\u8fc1\u79fb\u5b9e\u4f8b\u4f1a\u521b\u5efa\u4e00\u5f20 ",(0,r.kt)("inlineCode",{parentName:"p"},"flights")," \u6570\u636e\u8868\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"<?php\n\nuse Illuminate\\Support\\Facades\\Schema;\nuse Illuminate\\Database\\Schema\\Blueprint;\nuse Illuminate\\Database\\Migrations\\Migration;\n\nclass CreateFlightsTable extends Migration\n{\n    /**\n     * \u8fd0\u884c\u6570\u636e\u5e93\u8fc1\u79fb\n     *\n     * @return void\n     */\n    public function up()\n    {\n        Schema::create('flights', function (Blueprint $table) {\n            $table->increments('id');\n            $table->string('name');\n            $table->string('airline');\n            $table->timestamps();\n        });\n    }\n\n    /**\n     * \u56de\u6eda\u6570\u636e\u5e93\u8fc1\u79fb\n     *\n     * @return void\n     */\n    public function down()\n    {\n        Schema::drop('flights');\n    }\n}\n")),(0,r.kt)("h2",{id:"\u8fd0\u884c\u8fc1\u79fb"},"\u8fd0\u884c\u8fc1\u79fb"),(0,r.kt)("p",null,"\u4f7f\u7528 Artisan \u547d\u4ee4 ",(0,r.kt)("inlineCode",{parentName:"p"},"migrate")," \u6765\u8fd0\u884c\u6240\u6709\u672a\u5b8c\u6210\u7684\u8fc1\u79fb\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"php artisan migrate\n")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"{note} \u5982\u679c\u4f60\u4f7f\u7528\u7684\u662f ",(0,r.kt)("a",{parentName:"p",href:"/docs/laravel/homestead"},"Homestead \u865a\u62df\u673a"),"\uff0c\u5219\u5e94\u8be5\u5728\u865a\u62df\u673a\u4e2d\u6267\u884c\u547d\u4ee4\u3002")),(0,r.kt)("h4",{id:"\u5728\u751f\u4ea7\u73af\u5883\u5f3a\u5236\u6267\u884c\u8fc1\u79fb"},"\u5728\u751f\u4ea7\u73af\u5883\u5f3a\u5236\u6267\u884c\u8fc1\u79fb"),(0,r.kt)("p",null,"\u4e00\u4e9b\u8fc1\u79fb\u64cd\u4f5c\u662f\u5177\u6709\u7834\u574f\u6027\u7684\uff0c\u8fd9\u610f\u5473\u7740\u53ef\u80fd\u4f1a\u5bfc\u81f4\u6570\u636e\u4e22\u5931\u3002\u4e3a\u4e86\u9632\u6b62\u6709\u4eba\u5728\u751f\u4ea7\u73af\u5883\u4e2d\u8fd0\u884c\u8fd9\u4e9b\u547d\u4ee4\uff0c\u7cfb\u7edf\u4f1a\u5728\u8fd9\u4e9b\u547d\u4ee4\u88ab\u8fd0\u884c\u4e4b\u524d\u4e0e\u4f60\u8fdb\u884c\u786e\u8ba4\u3002\u5982\u679c\u8981\u5f3a\u5236\u5ffd\u7565\u7cfb\u7edf\u7684\u63d0\u793a\u8fd0\u884c\u547d\u4ee4\uff0c\u5219\u53ef\u4ee5\u4f7f\u7528 ",(0,r.kt)("inlineCode",{parentName:"p"},"--force")," \u6807\u8bb0\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"php artisan migrate --force\n")),(0,r.kt)("h3",{id:"\u56de\u6eda\u8fc1\u79fb"},"\u56de\u6eda\u8fc1\u79fb"),(0,r.kt)("p",null,"\u82e5\u8981\u56de\u6eda\u6700\u540e\u4e00\u6b21\u8fc1\u79fb\uff0c\u53ef\u4ee5\u4f7f\u7528 ",(0,r.kt)("inlineCode",{parentName:"p"},"rollback")," \u547d\u4ee4\u3002\u6b64\u547d\u4ee4\u5c06\u56de\u6eda\u6700\u540e\u4e00\u6b21\u300c\u8fc1\u79fb\u300d\uff0c\u5176\u4e2d\u53ef\u80fd\u5305\u542b\u591a\u4e2a\u8fc1\u79fb\u6587\u4ef6\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"php artisan migrate:rollback\n")),(0,r.kt)("p",null,"\u5728 ",(0,r.kt)("inlineCode",{parentName:"p"},"rollback")," \u547d\u4ee4\u540e\u52a0\u4e0a ",(0,r.kt)("inlineCode",{parentName:"p"},"step")," \u53c2\u6570\uff0c\u4f60\u53ef\u4ee5\u9650\u5236\u56de\u6eda\u8fc1\u79fb\u7684\u4e2a\u6570\u3002\u4f8b\u5982\uff0c\u4ee5\u4e0b\u547d\u4ee4\u5c06\u56de\u6eda\u6700\u8fd1\u4e94\u6b21\u8fc1\u79fb\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"php artisan migrate:rollback --step=5\n")),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"migrate:reset")," \u547d\u4ee4\u53ef\u4ee5\u56de\u6eda\u5e94\u7528\u7a0b\u5e8f\u4e2d\u7684\u6240\u6709\u8fc1\u79fb\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"php artisan migrate:reset\n")),(0,r.kt)("h4",{id:"\u4f7f\u7528\u5355\u4e2a\u547d\u4ee4\u6765\u6267\u884c\u56de\u6eda\u6216\u8fc1\u79fb"},"\u4f7f\u7528\u5355\u4e2a\u547d\u4ee4\u6765\u6267\u884c\u56de\u6eda\u6216\u8fc1\u79fb"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"migrate:refresh")," \u547d\u4ee4\u4e0d\u4ec5\u4f1a\u56de\u6eda\u6570\u636e\u5e93\u7684\u6240\u6709\u8fc1\u79fb\u8fd8\u4f1a\u63a5\u7740\u8fd0\u884c ",(0,r.kt)("inlineCode",{parentName:"p"},"migrate")," \u547d\u4ee4\u3002\u8fd9\u4e2a\u547d\u4ee4\u53ef\u4ee5\u9ad8\u6548\u5730\u91cd\u5efa\u6574\u4e2a\u6570\u636e\u5e93\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"php artisan migrate:refresh\n\n// \u5237\u65b0\u6570\u636e\u5e93\u7ed3\u6784\u5e76\u6267\u884c\u6570\u636e\u586b\u5145\nphp artisan migrate:refresh --seed\n")),(0,r.kt)("p",null,"\u4f7f\u7528 ",(0,r.kt)("inlineCode",{parentName:"p"},"refresh")," \u547d\u4ee4\u5e76\u63d0\u4f9b ",(0,r.kt)("inlineCode",{parentName:"p"},"step")," \u53c2\u6570\u6765\u56de\u6eda\u5e76\u518d\u6267\u884c\u6700\u540e\u6307\u5b9a\u7684\u8fc1\u79fb\u6570\u3002\u4f8b\u5982\uff0c\u4ee5\u4e0b\u547d\u4ee4\u5c06\u56de\u6eda\u5e76\u91cd\u65b0\u6267\u884c\u6700\u540e\u4e94\u6b21\u8fc1\u79fb\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"php artisan migrate:refresh --step=5\n")),(0,r.kt)("h4",{id:"\u5220\u9664\u6240\u6709\u8868--\u8fc1\u79fb"},"\u5220\u9664\u6240\u6709\u8868 & \u8fc1\u79fb"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"migrate:fresh")," \u547d\u4ee4\u4f1a\u4ece\u6570\u636e\u5e93\u4e2d\u5220\u9664\u6240\u6709\u8868\uff0c\u7136\u540e\u6267\u884c ",(0,r.kt)("inlineCode",{parentName:"p"},"migrate")," \u547d\u4ee4:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"php artisan migrate:fresh\n\nphp artisan migrate:fresh --seed\n")),(0,r.kt)("h2",{id:"\u6570\u636e\u8868"},"\u6570\u636e\u8868"),(0,r.kt)("h3",{id:"\u521b\u5efa\u6570\u636e\u8868"},"\u521b\u5efa\u6570\u636e\u8868"),(0,r.kt)("p",null,"\u53ef\u4ee5\u4f7f\u7528 ",(0,r.kt)("inlineCode",{parentName:"p"},"Schema")," facade \u7684 ",(0,r.kt)("inlineCode",{parentName:"p"},"create")," \u65b9\u6cd5\u6765\u521b\u5efa\u65b0\u7684\u6570\u636e\u5e93\u8868\u3002",(0,r.kt)("inlineCode",{parentName:"p"},"create")," \u65b9\u6cd5\u63a5\u53d7\u4e24\u4e2a\u53c2\u6570\uff1a\u7b2c\u4e00\u4e2a\u53c2\u6570\u4e3a\u6570\u636e\u8868\u7684\u540d\u79f0\uff0c\u7b2c\u4e8c\u4e2a\u53c2\u6570\u662f ",(0,r.kt)("inlineCode",{parentName:"p"},"\u95ed\u5305"),"\uff0c\u6b64\u95ed\u5305\u4f1a\u63a5\u6536\u4e00\u4e2a\u7528\u4e8e\u5b9a\u4e49\u65b0\u6570\u636e\u8868\u7684 ",(0,r.kt)("inlineCode",{parentName:"p"},"Blueprint")," \u5bf9\u8c61\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"Schema::create('users', function (Blueprint $table) {\n    $table->increments('id');\n});\n")),(0,r.kt)("p",null,"\u5f53\u7136\uff0c\u5728\u521b\u5efa\u6570\u636e\u8868\u7684\u65f6\u5019\uff0c\u53ef\u4ee5\u4f7f\u7528\u4efb\u4f55\u6570\u636e\u5e93\u7ed3\u6784\u751f\u6210\u5668\u7684 ",(0,r.kt)("a",{parentName:"p",href:"#creating-columns"},"\u5b57\u6bb5\u65b9\u6cd5")," \u6765\u5b9a\u4e49\u6570\u636e\u8868\u7684\u5b57\u6bb5\u3002"),(0,r.kt)("h4",{id:"\u68c0\u67e5\u6570\u636e\u8868\u6216\u5b57\u6bb5\u662f\u5426\u5b58\u5728"},"\u68c0\u67e5\u6570\u636e\u8868\u6216\u5b57\u6bb5\u662f\u5426\u5b58\u5728"),(0,r.kt)("p",null,"\u53ef\u4ee5\u4f7f\u7528 ",(0,r.kt)("inlineCode",{parentName:"p"},"hasTable")," \u548c ",(0,r.kt)("inlineCode",{parentName:"p"},"hasColumn")," \u65b9\u6cd5\u6765\u68c0\u67e5\u6570\u636e\u8868\u6216\u5b57\u6bb5\u662f\u5426\u5b58\u5728\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"if (Schema::hasTable('users')) {\n    //\n}\n\nif (Schema::hasColumn('users', 'email')) {\n    //\n}\n")),(0,r.kt)("h4",{id:"\u6570\u636e\u5e93\u8fde\u63a5--\u8868\u9009\u9879"},"\u6570\u636e\u5e93\u8fde\u63a5 & \u8868\u9009\u9879"),(0,r.kt)("p",null,"\u5982\u679c\u8981\u5bf9\u975e\u9ed8\u8ba4\u8fde\u63a5\u7684\u6570\u636e\u5e93\u8fde\u63a5\u6267\u884c\u7ed3\u6784\u64cd\u4f5c\uff0c\u53ef\u4ee5\u4f7f\u7528 ",(0,r.kt)("inlineCode",{parentName:"p"},"connection")," \u65b9\u6cd5\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"Schema::connection('foo')->create('users', function (Blueprint $table) {\n    $table->increments('id');\n});\n")),(0,r.kt)("p",null,"\u4f60\u53ef\u4ee5\u5728\u6570\u636e\u5e93\u7ed3\u6784\u751f\u6210\u5668\u4e0a\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u6765\u5b9a\u4e49\u8868\u7684\u9009\u9879\uff1a"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"\u547d\u4ee4"),(0,r.kt)("th",{parentName:"tr",align:null},"\u63cf\u8ff0"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"$table->engine = 'InnoDB';")),(0,r.kt)("td",{parentName:"tr",align:null},"\u6307\u5b9a\u8868\u5b58\u50a8\u5f15\u64ce (MySQL)")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"$table->charset = 'utf8';")),(0,r.kt)("td",{parentName:"tr",align:null},"\u6307\u5b9a\u6570\u636e\u8868\u7684\u9ed8\u8ba4\u5b57\u7b26\u96c6 (MySQL)")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"$table->collation = 'utf8_unicode_ci';")),(0,r.kt)("td",{parentName:"tr",align:null},"\u6307\u5b9a\u6570\u636e\u8868\u9ed8\u8ba4\u7684\u6392\u5e8f\u89c4\u5219 (MySQL)")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"$table->temporary();")),(0,r.kt)("td",{parentName:"tr",align:null},"\u521b\u5efa\u4e34\u65f6\u8868(\u4e0d\u652f\u6301SQL Server).")))),(0,r.kt)("h3",{id:"\u91cd\u547d\u540d\u5220\u9664\u6570\u636e\u8868"},"\u91cd\u547d\u540d/\u5220\u9664\u6570\u636e\u8868"),(0,r.kt)("p",null,"\u82e5\u8981\u91cd\u547d\u540d\u6570\u636e\u8868\uff0c\u53ef\u4ee5\u4f7f\u7528 ",(0,r.kt)("inlineCode",{parentName:"p"},"rename")," \u65b9\u6cd5\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"Schema::rename($from, $to);\n")),(0,r.kt)("p",null,"\u8981\u5220\u9664\u6570\u636e\u8868\uff0c\u53ef\u4f7f\u7528 ",(0,r.kt)("inlineCode",{parentName:"p"},"drop")," \u6216 ",(0,r.kt)("inlineCode",{parentName:"p"},"dropIfExists")," \u65b9\u6cd5\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"Schema::drop('users');\n\nSchema::dropIfExists('users');\n")),(0,r.kt)("h4",{id:"\u91cd\u547d\u540d\u5e26\u5916\u952e\u7684\u6570\u636e\u8868"},"\u91cd\u547d\u540d\u5e26\u5916\u952e\u7684\u6570\u636e\u8868"),(0,r.kt)("p",null,"\u5728\u91cd\u547d\u540d\u8868\u4e4b\u524d\uff0c\u4f60\u5e94\u8be5\u9a8c\u8bc1\u8868\u4e0a\u7684\u4efb\u4f55\u5916\u952e\u7ea6\u675f\u5728\u8fc1\u79fb\u6587\u4ef6\u4e2d\u90fd\u6709\u660e\u786e\u7684\u540d\u79f0\uff0c\u800c\u4e0d\u662f\u8ba9 Laravel \u6309\u7167\u7ea6\u5b9a\u6765\u8bbe\u7f6e\u4e00\u4e2a\u540d\u79f0\u3002\u5426\u5219\uff0c\u5916\u952e\u7684\u7ea6\u675f\u540d\u79f0\u5c06\u5f15\u7528\u65e7\u8868\u540d\u3002"),(0,r.kt)("h2",{id:"\u5b57\u6bb5"},"\u5b57\u6bb5"),(0,r.kt)("h3",{id:"\u521b\u5efa\u5b57\u6bb5"},"\u521b\u5efa\u5b57\u6bb5"),(0,r.kt)("p",null,"\u4f7f\u7528 ",(0,r.kt)("inlineCode",{parentName:"p"},"Schema")," facade \u7684 ",(0,r.kt)("inlineCode",{parentName:"p"},"table")," \u65b9\u6cd5\u53ef\u4ee5\u66f4\u65b0\u73b0\u6709\u7684\u6570\u636e\u8868\u3002\u5982\u540c ",(0,r.kt)("inlineCode",{parentName:"p"},"create")," \u65b9\u6cd5\u4e00\u6837\uff0c",(0,r.kt)("inlineCode",{parentName:"p"},"table")," \u65b9\u6cd5\u4f1a\u63a5\u53d7\u4e24\u4e2a\u53c2\u6570\uff1a\u4e00\u4e2a\u662f\u6570\u636e\u8868\u7684\u540d\u79f0\uff0c\u53e6\u4e00\u4e2a\u5219\u662f\u63a5\u6536\u53ef\u4ee5\u7528\u6765\u5411\u8868\u4e2d\u6dfb\u52a0\u5b57\u6bb5\u7684 ",(0,r.kt)("inlineCode",{parentName:"p"},"Blueprint")," \u5b9e\u4f8b\u7684",(0,r.kt)("inlineCode",{parentName:"p"},"\u95ed\u5305"),"\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"Schema::table('users', function (Blueprint $table) {\n    $table->string('email');\n});\n")),(0,r.kt)("h4",{id:"\u53ef\u7528\u7684\u5b57\u6bb5\u7c7b\u578b"},"\u53ef\u7528\u7684\u5b57\u6bb5\u7c7b\u578b"),(0,r.kt)("p",null,"\u6570\u636e\u5e93\u7ed3\u6784\u751f\u6210\u5668\u5305\u542b\u6784\u5efa\u8868\u65f6\u53ef\u4ee5\u6307\u5b9a\u7684\u5404\u79cd\u5b57\u6bb5\u7c7b\u578b\uff1a"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"\u547d\u4ee4"),(0,r.kt)("th",{parentName:"tr",align:null},"\u63cf\u8ff0"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"$table->bigIncrements('id');")),(0,r.kt)("td",{parentName:"tr",align:null},"\u9012\u589e ID\uff08\u4e3b\u952e\uff09\uff0c\u76f8\u5f53\u4e8e\u300cUNSIGNED BIG INTEGER\u300d")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"$table->bigInteger('votes');")),(0,r.kt)("td",{parentName:"tr",align:null},"\u76f8\u5f53\u4e8e BIGINT")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"$table->binary('data');")),(0,r.kt)("td",{parentName:"tr",align:null},"\u76f8\u5f53\u4e8e BLOB")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"$table->boolean('confirmed');")),(0,r.kt)("td",{parentName:"tr",align:null},"\u76f8\u5f53\u4e8e BOOLEAN")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"$table->char('name', 4);")),(0,r.kt)("td",{parentName:"tr",align:null},"\u76f8\u5f53\u4e8e\u5e26\u6709\u957f\u5ea6\u7684 CHAR")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"$table->date('created_at');")),(0,r.kt)("td",{parentName:"tr",align:null},"\u76f8\u5f53\u4e8e DATE")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"$table->dateTime('created_at');")),(0,r.kt)("td",{parentName:"tr",align:null},"\u76f8\u5f53\u4e8e DATETIME")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"$table->dateTimeTz('created_at');")),(0,r.kt)("td",{parentName:"tr",align:null},"\u76f8\u5f53\u4e8e\u5e26\u65f6\u533a DATETIME")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"$table->decimal('amount', 8, 2);")),(0,r.kt)("td",{parentName:"tr",align:null},"\u76f8\u5f53\u4e8e\u5e26\u6709\u7cbe\u5ea6\u4e0e\u57fa\u6570 DECIMAL")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"$table->double('column', 8, 2);")),(0,r.kt)("td",{parentName:"tr",align:null},"\u76f8\u5f53\u4e8e\u5e26\u6709\u7cbe\u5ea6\u4e0e\u57fa\u6570 DOUBLE")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"$table->enum('level', ['easy', 'hard']);")),(0,r.kt)("td",{parentName:"tr",align:null},"\u76f8\u5f53\u4e8e ENUM")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"$table->float('amount', 8, 2);")),(0,r.kt)("td",{parentName:"tr",align:null},"\u76f8\u5f53\u4e8e\u5e26\u6709\u7cbe\u5ea6\u4e0e\u57fa\u6570 FLOAT")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"$table->geometry('positions');")),(0,r.kt)("td",{parentName:"tr",align:null},"\u76f8\u5f53\u4e8e GEOMETRY")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"$table->geometryCollection('positions');")),(0,r.kt)("td",{parentName:"tr",align:null},"\u76f8\u5f53\u4e8e GEOMETRYCOLLECTION")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"$table->increments('id');")),(0,r.kt)("td",{parentName:"tr",align:null},"\u9012\u589e\u7684 ID (\u4e3b\u952e)\uff0c\u76f8\u5f53\u4e8e\u300cUNSIGNED INTEGER\u300d")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"$table->integer('votes');")),(0,r.kt)("td",{parentName:"tr",align:null},"\u76f8\u5f53\u4e8e INTEGER")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"$table->ipAddress('visitor');")),(0,r.kt)("td",{parentName:"tr",align:null},"\u76f8\u5f53\u4e8e IP \u5730\u5740")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"$table->json('options');")),(0,r.kt)("td",{parentName:"tr",align:null},"\u76f8\u5f53\u4e8e JSON")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"$table->jsonb('options');")),(0,r.kt)("td",{parentName:"tr",align:null},"\u76f8\u5f53\u4e8e JSONB")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"$table->lineString('positions');")),(0,r.kt)("td",{parentName:"tr",align:null},"\u76f8\u5f53\u4e8e LINESTRING")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"$table->longText('description');")),(0,r.kt)("td",{parentName:"tr",align:null},"\u76f8\u5f53\u4e8e LONGTEXT")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"$table->macAddress('device');")),(0,r.kt)("td",{parentName:"tr",align:null},"\u76f8\u5f53\u4e8e MAC \u5730\u5740")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"$table->mediumIncrements('id');")),(0,r.kt)("td",{parentName:"tr",align:null},"\u9012\u589e ID (\u4e3b\u952e) \uff0c\u76f8\u5f53\u4e8e\u300cUNSIGNED MEDIUM INTEGER\u300d")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"$table->mediumInteger('votes');")),(0,r.kt)("td",{parentName:"tr",align:null},"\u76f8\u5f53\u4e8e MEDIUMINT")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"$table->mediumText('description');")),(0,r.kt)("td",{parentName:"tr",align:null},"\u76f8\u5f53\u4e8e MEDIUMTEXT")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"$table->morphs('taggable');")),(0,r.kt)("td",{parentName:"tr",align:null},"\u76f8\u5f53\u4e8e\u52a0\u5165\u9012\u589e\u7684 ",(0,r.kt)("inlineCode",{parentName:"td"},"taggable_id")," \u4e0e\u5b57\u7b26\u4e32 ",(0,r.kt)("inlineCode",{parentName:"td"},"taggable_type"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"$table->multiLineString('positions');")),(0,r.kt)("td",{parentName:"tr",align:null},"\u76f8\u5f53\u4e8e MULTILINESTRING")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"$table->multiPoint('positions');")),(0,r.kt)("td",{parentName:"tr",align:null},"\u76f8\u5f53\u4e8e MULTIPOINT")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"$table->multiPolygon('positions');")),(0,r.kt)("td",{parentName:"tr",align:null},"\u76f8\u5f53\u4e8e MULTIPOLYGON")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"$table->nullableMorphs('taggable');")),(0,r.kt)("td",{parentName:"tr",align:null},"\u76f8\u5f53\u4e8e\u53ef\u7a7a\u7248\u672c\u7684 ",(0,r.kt)("inlineCode",{parentName:"td"},"morphs()")," \u5b57\u6bb5")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"$table->nullableTimestamps();")),(0,r.kt)("td",{parentName:"tr",align:null},"\u76f8\u5f53\u4e8e\u53ef\u7a7a\u7248\u672c\u7684 ",(0,r.kt)("inlineCode",{parentName:"td"},"timestamps()")," \u5b57\u6bb5")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"$table->point('position');")),(0,r.kt)("td",{parentName:"tr",align:null},"\u76f8\u5f53\u4e8e POINT")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"$table->polygon('positions');")),(0,r.kt)("td",{parentName:"tr",align:null},"\u76f8\u5f53\u4e8e POLYGON")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"$table->rememberToken();")),(0,r.kt)("td",{parentName:"tr",align:null},"\u76f8\u5f53\u4e8e\u53ef\u7a7a\u7248\u672c\u7684 VARCHAR(100) \u7684 ",(0,r.kt)("inlineCode",{parentName:"td"},"remember_token")," \u5b57\u6bb5")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"$table->smallIncrements('id');")),(0,r.kt)("td",{parentName:"tr",align:null},"\u9012\u589e ID (\u4e3b\u952e) \uff0c\u76f8\u5f53\u4e8e\u300cUNSIGNED SMALL INTEGER\u300d")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"$table->smallInteger('votes');")),(0,r.kt)("td",{parentName:"tr",align:null},"\u76f8\u5f53\u4e8e SMALLINT")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"$table->softDeletes();")),(0,r.kt)("td",{parentName:"tr",align:null},"\u76f8\u5f53\u4e8e\u4e3a\u8f6f\u5220\u9664\u6dfb\u52a0\u4e00\u4e2a\u53ef\u7a7a\u7684 ",(0,r.kt)("inlineCode",{parentName:"td"},"deleted_at")," \u5b57\u6bb5")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"$table->softDeletesTz();")),(0,r.kt)("td",{parentName:"tr",align:null},"\u76f8\u5f53\u4e8e\u4e3a\u8f6f\u5220\u9664\u6dfb\u52a0\u4e00\u4e2a\u53ef\u7a7a\u7684 \u5e26\u65f6\u533a\u7684 ",(0,r.kt)("inlineCode",{parentName:"td"},"deleted_at")," \u5b57\u6bb5")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"$table->string('name', 100);")),(0,r.kt)("td",{parentName:"tr",align:null},"\u76f8\u5f53\u4e8e\u5e26\u957f\u5ea6\u7684 VARCHAR")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"$table->text('description');")),(0,r.kt)("td",{parentName:"tr",align:null},"\u76f8\u5f53\u4e8e TEXT")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"$table->time('sunrise');")),(0,r.kt)("td",{parentName:"tr",align:null},"\u76f8\u5f53\u4e8e TIME")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"$table->timeTz('sunrise');")),(0,r.kt)("td",{parentName:"tr",align:null},"\u76f8\u5f53\u4e8e\u5e26\u65f6\u533a\u7684 TIME")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"$table->timestamp('added_on');")),(0,r.kt)("td",{parentName:"tr",align:null},"\u76f8\u5f53\u4e8e TIMESTAMP")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"$table->timestampTz('added_on');")),(0,r.kt)("td",{parentName:"tr",align:null},"\u76f8\u5f53\u4e8e\u5e26\u65f6\u533a\u7684 TIMESTAMP")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"$table->tinyIncrements('id');")),(0,r.kt)("td",{parentName:"tr",align:null},"\u76f8\u5f53\u4e8e\u81ea\u52a8\u9012\u589e UNSIGNED TINYINT")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"$table->tinyInteger('votes');")),(0,r.kt)("td",{parentName:"tr",align:null},"\u76f8\u5f53\u4e8e TINYINT")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"$table->unsignedBigInteger('votes');")),(0,r.kt)("td",{parentName:"tr",align:null},"\u76f8\u5f53\u4e8e Unsigned BIGINT")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"$table->unsignedDecimal('amount', 8, 2);")),(0,r.kt)("td",{parentName:"tr",align:null},"\u76f8\u5f53\u4e8e\u5e26\u6709\u7cbe\u5ea6\u548c\u57fa\u6570\u7684 UNSIGNED DECIMAL")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"$table->unsignedInteger('votes');")),(0,r.kt)("td",{parentName:"tr",align:null},"\u76f8\u5f53\u4e8e Unsigned INT")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"$table->unsignedMediumInteger('votes');")),(0,r.kt)("td",{parentName:"tr",align:null},"\u76f8\u5f53\u4e8e Unsigned MEDIUMINT")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"$table->unsignedSmallInteger('votes');")),(0,r.kt)("td",{parentName:"tr",align:null},"\u76f8\u5f53\u4e8e Unsigned SMALLINT")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"$table->unsignedTinyInteger('votes');")),(0,r.kt)("td",{parentName:"tr",align:null},"\u76f8\u5f53\u4e8e Unsigned TINYINT")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"$table->uuid('id');")),(0,r.kt)("td",{parentName:"tr",align:null},"\u76f8\u5f53\u4e8e UUID")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"$table->year('birth_year');")),(0,r.kt)("td",{parentName:"tr",align:null},"\u76f8\u5f53\u4e8e YEAR")))),(0,r.kt)("h3",{id:"\u5b57\u6bb5\u4fee\u9970"},"\u5b57\u6bb5\u4fee\u9970"),(0,r.kt)("p",null,"\u9664\u4e86\u4e0a\u8ff0\u5217\u51fa\u7684\u5b57\u6bb5\u7c7b\u578b\u4e4b\u5916\uff0c\u8fd8\u6709\u51e0\u4e2a\u53ef\u4ee5\u5728\u6dfb\u52a0\u5b57\u6bb5\u65f6\u4f7f\u7528\u7684\u300c\u4fee\u9970\u7b26\u300d\u3002\u4f8b\u5982\uff0c\u5982\u679c\u8981\u628a\u5b57\u6bb5\u8bbe\u7f6e\u4e3a\u300c\u53ef\u7a7a\u300d\uff0c\u5c31\u4f7f\u7528 ",(0,r.kt)("inlineCode",{parentName:"p"},"nullable")," \u65b9\u6cd5\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"Schema::table('users', function (Blueprint $table) {\n    $table->string('email')->nullable();\n});\n")),(0,r.kt)("p",null,"\u4ee5\u4e0b\u662f\u6240\u6709\u53ef\u7528\u7684\u5b57\u6bb5\u4fee\u9970\u7b26\u7684\u5217\u8868\u3002\u6b64\u5217\u8868\u4e0d\u5305\u62ec ",(0,r.kt)("a",{parentName:"p",href:"#creating-indexes"},"\u7d22\u5f15\u4fee\u9970\u7b26"),"\uff1a"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"\u4fee\u9970\u7b26"),(0,r.kt)("th",{parentName:"tr",align:null},"\u63cf\u8ff0"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"->after('column')")),(0,r.kt)("td",{parentName:"tr",align:null},"\u5c06\u6b64\u5b57\u6bb5\u653e\u7f6e\u5728\u5176\u5b83\u5b57\u6bb5\u300c\u4e4b\u540e\u300d\uff08\u4ec5\u9650 MySQL\uff09")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"->autoIncrement()")),(0,r.kt)("td",{parentName:"tr",align:null},"\u5c06 INTEGER \u7c7b\u578b\u7684\u5b57\u6bb5\u8bbe\u7f6e\u4e3a\u81ea\u52a8\u9012\u589e\u7684\u4e3b\u952e")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"->charset('utf8')")),(0,r.kt)("td",{parentName:"tr",align:null},"\u6307\u5b9a\u4e00\u4e2a\u5b57\u7b26\u96c6\uff08\u4ec5\u9650 MySQL\uff09")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"->collation('utf8_unicode_ci')")),(0,r.kt)("td",{parentName:"tr",align:null},"\u6307\u5b9a\u5217\u7684\u6392\u5e8f\u89c4\u5219\uff08\u4ec5\u9650 MySQL/SQL Server\uff09")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"->comment('my comment')")),(0,r.kt)("td",{parentName:"tr",align:null},"\u4e3a\u5b57\u6bb5\u589e\u52a0\u6ce8\u91ca\uff08\u4ec5\u9650 MySQL\uff09")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"->default($value)")),(0,r.kt)("td",{parentName:"tr",align:null},"\u4e3a\u5b57\u6bb5\u6307\u5b9a\u300c\u9ed8\u8ba4\u300d\u503c")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"->first()")),(0,r.kt)("td",{parentName:"tr",align:null},"\u5c06\u6b64\u5b57\u6bb5\u653e\u7f6e\u5728\u6570\u636e\u8868\u7684\u300c\u9996\u4f4d\u300d\uff08\u4ec5\u9650 MySQL\uff09")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"->nullable($value = true)")),(0,r.kt)("td",{parentName:"tr",align:null},"\uff08\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff09\u6b64\u5b57\u6bb5\u5141\u8bb8\u5199\u5165 NULL \u503c")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"->storedAs($expression)")),(0,r.kt)("td",{parentName:"tr",align:null},"\u521b\u5efa\u4e00\u4e2a\u5b58\u50a8\u751f\u6210\u7684\u5b57\u6bb5 \uff08\u4ec5\u9650 MySQL\uff09")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"->unsigned()")),(0,r.kt)("td",{parentName:"tr",align:null},"\u8bbe\u7f6e ",(0,r.kt)("inlineCode",{parentName:"td"},"integer")," \u7c7b\u578b\u7684\u5b57\u6bb5\u4e3a ",(0,r.kt)("inlineCode",{parentName:"td"},"UNSIGNED"),"\uff08\u4ec5\u9650 MySQL\uff09")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"->useCurrent()")),(0,r.kt)("td",{parentName:"tr",align:null},"\u5c06 TIMESTAMP \u7c7b\u578b\u7684\u5b57\u6bb5\u8bbe\u7f6e\u4e3a\u4f7f\u7528 CURRENT_TIMESTAMP \u4f5c\u4e3a\u9ed8\u8ba4\u503c")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"->virtualAs($expression)")),(0,r.kt)("td",{parentName:"tr",align:null},"\u521b\u5efa\u4e00\u4e2a\u865a\u62df\u751f\u6210\u7684\u5b57\u6bb5 \uff08\u4ec5\u9650 MySQL\uff09")))),(0,r.kt)("h3",{id:"\u4fee\u6539\u5b57\u6bb5"},"\u4fee\u6539\u5b57\u6bb5"),(0,r.kt)("h4",{id:"\u5148\u51b3\u6761\u4ef6"},"\u5148\u51b3\u6761\u4ef6"),(0,r.kt)("p",null,"\u5728\u4fee\u6539\u5b57\u6bb5\u4e4b\u524d\uff0c\u8bf7\u786e\u4fdd\u5c06 ",(0,r.kt)("inlineCode",{parentName:"p"},"doctrine/dbal")," \u4f9d\u8d56\u6dfb\u52a0\u5230 ",(0,r.kt)("inlineCode",{parentName:"p"},"composer.json")," \u6587\u4ef6\u4e2d\u3002Doctrine DBAL \u5e93\u7528\u4e8e\u786e\u5b9a\u5b57\u6bb5\u7684\u5f53\u524d\u72b6\u6001\uff0c\u5e76\u521b\u5efa\u5bf9\u8be5\u5b57\u6bb5\u8fdb\u884c\u6307\u5b9a\u8c03\u6574\u6240\u9700\u7684 SQL \u67e5\u8be2\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"composer require doctrine/dbal\n")),(0,r.kt)("h4",{id:"\u66f4\u65b0\u5b57\u6bb5\u5c5e\u6027"},"\u66f4\u65b0\u5b57\u6bb5\u5c5e\u6027"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"change")," \u65b9\u6cd5\u53ef\u4ee5\u5c06\u73b0\u6709\u7684\u5b57\u6bb5\u7c7b\u578b\u4fee\u6539\u4e3a\u65b0\u7684\u7c7b\u578b\u6216\u4fee\u6539\u5c5e\u6027\u3002\u6bd4\u5982\uff0c\u4f60\u53ef\u80fd\u60f3\u589e\u52a0\u5b57\u7b26\u4e32\u5b57\u6bb5\u7684\u957f\u5ea6\uff0c\u53ef\u4ee5\u4f7f\u7528 ",(0,r.kt)("inlineCode",{parentName:"p"},"change")," \u65b9\u6cd5\u628a ",(0,r.kt)("inlineCode",{parentName:"p"},"name")," \u5b57\u6bb5\u7684\u957f\u5ea6\u4ece 25 \u589e\u52a0\u5230 50 \uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"Schema::table('users', function (Blueprint $table) {\n    $table->string('name', 50)->change();\n});\n")),(0,r.kt)("p",null,"\u5c06\u5b57\u6bb5\u4fee\u6539\u4e3a\u53ef\u7a7a\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"Schema::table('users', function (Blueprint $table) {\n    $table->string('name', 50)->nullable()->change();\n});\n")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"{note} \u53ea\u6709\u4e0b\u9762\u7684\u5b57\u6bb5\u7c7b\u578b\u4e0d\u80fd\u88ab\u300c\u4fee\u6539\u300d: bigInteger\u3001binary\u3001boolean\u3001date\u3001dateTime\u3001dateTimeTz\u3001 decimal\u3001integer\u3001json\u3001longText\u3001mediumText\u3001smallInteger\u3001string\u3001text\u3001time\u3001unsignedBigInteger\u3001unsignedInteger \u548c unsignedSmallInteger\u3002")),(0,r.kt)("h4",{id:"\u91cd\u547d\u540d\u5b57\u6bb5"},"\u91cd\u547d\u540d\u5b57\u6bb5"),(0,r.kt)("p",null,"\u53ef\u4ee5\u4f7f\u7528\u7ed3\u6784\u751f\u6210\u5668\u4e0a\u7684 ",(0,r.kt)("inlineCode",{parentName:"p"},"renameColumn")," \u65b9\u6cd5\u6765\u91cd\u547d\u540d\u5b57\u6bb5\u3002\u5728\u91cd\u547d\u540d\u5b57\u6bb5\u524d\uff0c\u8bf7\u786e\u4fdd\u4f60\u7684 ",(0,r.kt)("inlineCode",{parentName:"p"},"composer.json")," \u6587\u4ef6\u5185\u5df2\u7ecf\u52a0\u5165 ",(0,r.kt)("inlineCode",{parentName:"p"},"doctrine/dbal")," \u4f9d\u8d56\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"Schema::table('users', function (Blueprint $table) {\n    $table->renameColumn('from', 'to');\n});\n")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"{note} \u5f53\u524d\u4e0d\u652f\u6301 ",(0,r.kt)("inlineCode",{parentName:"p"},"enum")," \u7c7b\u578b\u7684\u5b57\u6bb5\u91cd\u547d\u540d\u3002")),(0,r.kt)("h3",{id:"\u5220\u9664\u5b57\u6bb5"},"\u5220\u9664\u5b57\u6bb5"),(0,r.kt)("p",null,"\u53ef\u4ee5\u4f7f\u7528\u7ed3\u6784\u751f\u6210\u5668\u4e0a\u7684 ",(0,r.kt)("inlineCode",{parentName:"p"},"dropColumn")," \u65b9\u6cd5\u6765\u5220\u9664\u5b57\u6bb5\u3002\u5728\u4ece SQLite \u6570\u636e\u5e93\u5220\u9664\u5b57\u6bb5\u524d\uff0c\u4f60\u9700\u8981\u5728 ",(0,r.kt)("inlineCode",{parentName:"p"},"composer.json")," \u6587\u4ef6\u4e2d\u52a0\u5165 ",(0,r.kt)("inlineCode",{parentName:"p"},"doctrine/dbal")," \u4f9d\u8d56\u5e76\u5728\u7ec8\u7aef\u6267\u884c ",(0,r.kt)("inlineCode",{parentName:"p"},"composer update")," \u6765\u5b89\u88c5\u8be5\u4f9d\u8d56\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"Schema::table('users', function (Blueprint $table) {\n    $table->dropColumn('votes');\n});\n")),(0,r.kt)("p",null,"\u4f60\u53ef\u4ee5\u4f20\u9012\u4e00\u4e2a\u5b57\u6bb5\u6570\u7ec4\u7ed9 ",(0,r.kt)("inlineCode",{parentName:"p"},"dropCloumn")," \u65b9\u6cd5\u6765\u5220\u9664\u591a\u4e2a\u5b57\u6bb5\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"Schema::table('users', function (Blueprint $table) {\n    $table->dropColumn(['votes', 'avatar', 'location']);\n});\n")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"{note} \u4e0d\u652f\u6301\u5728\u4f7f\u7528 SQLite \u6570\u636e\u5e93\u65f6\u5728\u5355\u4e2a\u8fc1\u79fb\u4e2d\u5220\u9664\u6216\u4fee\u6539\u591a\u4e2a\u5b57\u6bb5\u3002")),(0,r.kt)("h4",{id:"\u53ef\u7528\u7684\u547d\u4ee4\u522b\u540d"},"\u53ef\u7528\u7684\u547d\u4ee4\u522b\u540d"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"\u547d\u4ee4"),(0,r.kt)("th",{parentName:"tr",align:null},"\u63cf\u8ff0"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"$table->dropRememberToken();")),(0,r.kt)("td",{parentName:"tr",align:null},"\u5220\u9664 ",(0,r.kt)("inlineCode",{parentName:"td"},"remember_token")," \u5b57\u6bb5")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"$table->dropSoftDeletes();")),(0,r.kt)("td",{parentName:"tr",align:null},"\u5220\u9664 ",(0,r.kt)("inlineCode",{parentName:"td"},"deleted_at")," \u5b57\u6bb5")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"$table->dropSoftDeletesTz();")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"dropSoftDeletes()")," \u65b9\u6cd5\u7684\u522b\u540d")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"$table->dropTimestamps();")),(0,r.kt)("td",{parentName:"tr",align:null},"\u5220\u9664 ",(0,r.kt)("inlineCode",{parentName:"td"},"created_at")," \u548c ",(0,r.kt)("inlineCode",{parentName:"td"},"updated_at")," \u5b57\u6bb5")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"$table->dropTimestampsTz();")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"dropTimestamps()")," \u65b9\u6cd5\u7684\u522b\u540d")))),(0,r.kt)("h2",{id:"\u7d22\u5f15"},"\u7d22\u5f15"),(0,r.kt)("h3",{id:"\u521b\u5efa\u7d22\u5f15"},"\u521b\u5efa\u7d22\u5f15"),(0,r.kt)("p",null,"\u7ed3\u6784\u751f\u6210\u5668\u652f\u6301\u591a\u79cd\u7c7b\u578b\u7684\u7d22\u5f15\u3002\u9996\u5148\uff0c\u5148\u6307\u5b9a\u5b57\u6bb5\u503c\u552f\u4e00\uff0c\u5373\u7b80\u5355\u5730\u5728\u5b57\u6bb5\u5b9a\u4e49\u4e4b\u540e\u94fe\u5f0f\u8c03\u7528 ",(0,r.kt)("inlineCode",{parentName:"p"},"unique")," \u65b9\u6cd5\u6765\u521b\u5efa\u7d22\u5f15\uff0c\u4f8b\u5982\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"$table->string('email')->unique();\n")),(0,r.kt)("p",null,"\u6216\u8005\uff0c\u4f60\u4e5f\u53ef\u4ee5\u5728\u5b9a\u4e49\u5b8c\u5b57\u6bb5\u4e4b\u540e\u521b\u5efa\u7d22\u5f15\u3002\u4f8b\u5982\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"$table->unique('email');\n")),(0,r.kt)("p",null,"\u4f60\u751a\u81f3\u53ef\u4ee5\u5c06\u6570\u7ec4\u4f20\u9012\u7ed9\u7d22\u5f15\u65b9\u6cd5\u6765\u521b\u5efa\u4e00\u4e2a\u590d\u5408\uff08\u6216\u5408\u6210\uff09\u7d22\u5f15\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"$table->index(['account_id', 'created_at']);\n")),(0,r.kt)("p",null,"Laravel \u4f1a\u81ea\u52a8\u751f\u6210\u4e00\u4e2a\u5408\u7406\u7684\u7d22\u5f15\u540d\u79f0\uff0c\u4f46\u4f60\u4e5f\u53ef\u4ee5\u4f20\u9012\u7b2c\u4e8c\u4e2a\u53c2\u6570\u6765\u81ea\u5b9a\u4e49\u7d22\u5f15\u540d\u79f0:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"$table->index('email', 'unique_email');\n")),(0,r.kt)("h4",{id:"\u53ef\u7528\u7684\u7d22\u5f15\u7c7b\u578b"},"\u53ef\u7528\u7684\u7d22\u5f15\u7c7b\u578b"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"\u547d\u4ee4"),(0,r.kt)("th",{parentName:"tr",align:null},"\u63cf\u8ff0"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"$table->primary('id');")),(0,r.kt)("td",{parentName:"tr",align:null},"\u6dfb\u52a0\u4e3b\u952e")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"$table->primary(['id', 'parent_id']);")),(0,r.kt)("td",{parentName:"tr",align:null},"\u6dfb\u52a0\u590d\u5408\u952e")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"$table->unique('email');")),(0,r.kt)("td",{parentName:"tr",align:null},"\u6dfb\u52a0\u552f\u4e00\u7d22\u5f15")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"$table->index('state');")),(0,r.kt)("td",{parentName:"tr",align:null},"\u6dfb\u52a0\u666e\u901a\u7d22\u5f15")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"$table->spatialIndex('location');")),(0,r.kt)("td",{parentName:"tr",align:null},"\u6dfb\u52a0\u7a7a\u95f4\u7d22\u5f15\uff08 SQLite \u9664\u5916\uff09")))),(0,r.kt)("h4",{id:"\u7d22\u5f15\u957f\u5ea6--mysql--mariadb"},"\u7d22\u5f15\u957f\u5ea6 & MySQL / MariaDB"),(0,r.kt)("p",null,"Laravel \u9ed8\u8ba4\u4f7f\u7528 ",(0,r.kt)("inlineCode",{parentName:"p"},"utf8mb4")," \u5b57\u7b26\uff0c\u5b83\u652f\u6301\u5728\u6570\u636e\u5e93\u4e2d\u5b58\u50a8\u300cemojis\u300d\u3002\u5982\u679c\u4f60\u662f\u5728\u7248\u672c\u4f4e\u4e8e5.7.7 \u7684 MySQL release \u6216\u8005\u7248\u672c\u4f4e\u4e8e10.2.2 \u7684 MariaDB release \u4e0a\u521b\u5efa\u7d22\u5f15\uff0c\u90a3\u5c31\u9700\u8981\u4f60\u624b\u52a8\u914d\u7f6e\u8fc1\u79fb\u751f\u6210\u7684\u9ed8\u8ba4\u5b57\u7b26\u4e32\u957f\u5ea6\u3002\u5373\u5728 ",(0,r.kt)("inlineCode",{parentName:"p"},"AppServiceProvider")," \u4e2d\u8c03\u7528 ",(0,r.kt)("inlineCode",{parentName:"p"},"Schema::defaultStringLength")," \u65b9\u6cd5\u6765\u914d\u7f6e\u5b83\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"use Illuminate\\Support\\Facades\\Schema;\n\n/**\n * \u5f15\u5bfc\u4efb\u4f55\u5e94\u7528\u7a0b\u5e8f\u670d\u52a1\n *\n * @return void\n */\npublic function boot()\n{\n    Schema::defaultStringLength(191);\n}\n")),(0,r.kt)("p",null,"\u6216\u8005\uff0c\u4f60\u53ef\u4ee5\u5f00\u542f\u6570\u636e\u5e93\u7684 ",(0,r.kt)("inlineCode",{parentName:"p"},"innodb_large_prefix")," \u9009\u9879\uff0c\u81f3\u4e8e\u5982\u4f55\u6b63\u786e\u5f00\u542f\uff0c\u8bf7\u81ea\u884c\u67e5\u9605\u6570\u636e\u5e93\u6587\u6863\u3002"),(0,r.kt)("h3",{id:"\u5220\u9664\u7d22\u5f15"},"\u5220\u9664\u7d22\u5f15"),(0,r.kt)("p",null,"\u82e5\u8981\u79fb\u9664\u7d22\u5f15\uff0c\u5219\u5fc5\u987b\u6307\u5b9a\u7d22\u5f15\u7684\u540d\u79f0\u3002Laravel \u9ed8\u8ba4\u4f1a\u81ea\u52a8\u7ed9\u7d22\u5f15\u5206\u914d\u5408\u7406\u7684\u540d\u79f0\u3002\u5176\u5c06\u6570\u636e\u8868\u540d\u79f0\u3001\u7d22\u5f15\u7684\u5b57\u6bb5\u540d\u79f0\u53ca\u7d22\u5f15\u7c7b\u578b\u7b80\u5355\u5730\u8fde\u63a5\u5728\u4e86\u4e00\u8d77\u3002\u4e3e\u4f8b\u5982\u4e0b\uff1a"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"\u547d\u4ee4"),(0,r.kt)("th",{parentName:"tr",align:null},"\u63cf\u8ff0"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"$table->dropPrimary('users_id_primary');")),(0,r.kt)("td",{parentName:"tr",align:null},"\u4ece\u300cusers\u300d\u8868\u4e2d\u5220\u9664\u4e3b\u952e\u3002")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"$table->dropUnique('users_email_unique');")),(0,r.kt)("td",{parentName:"tr",align:null},"\u4ece\u300cusers\u300d\u8868\u4e2d\u5220\u9664\u552f\u4e00\u7d22\u5f15\u3002")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"$table->dropIndex('geo_state_index');")),(0,r.kt)("td",{parentName:"tr",align:null},"\u4ece\u300cgeo\u300d\u8868\u4e2d\u5220\u9664\u57fa\u672c\u7d22\u5f15\u3002")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"$table->dropSpatialIndex('geo_location_spatialindex');")),(0,r.kt)("td",{parentName:"tr",align:null},"\u4ece\u300cgeo\u300d\u8868\u4e2d\u5220\u9664\u7a7a\u95f4\u7d22\u5f15\uff08SQLite\u9664\u5916\uff09\u3002")))),(0,r.kt)("p",null,"\u5982\u679c\u5c06\u5b57\u6bb5\u6570\u7ec4\u4f20\u9012\u7ed9 ",(0,r.kt)("inlineCode",{parentName:"p"},"dropIndex")," \u65b9\u6cd5\uff0c\u4f1a\u5220\u9664\u6839\u636e\u8868\u540d\u3001\u5b57\u6bb5\u548c\u952e\u7c7b\u578b\u751f\u6210\u7684\u7d22\u5f15\u540d\u79f0\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"Schema::table('geo', function (Blueprint $table) {\n    $table->dropIndex(['state']); // \u79fb\u9664\u7d22\u5f15 'geo_state_index'\n});\n")),(0,r.kt)("h3",{id:"\u5916\u952e\u7ea6\u675f"},"\u5916\u952e\u7ea6\u675f"),(0,r.kt)("p",null,"Laravel \u8fd8\u652f\u6301\u521b\u5efa\u7528\u4e8e\u5728\u6570\u636e\u5e93\u5c42\u4e2d\u7684\u5f3a\u5236\u5f15\u7528\u5b8c\u6574\u6027\u7684\u5916\u952e\u7ea6\u675f\u3002\u4f8b\u5982\uff0c\u8ba9\u6211\u4eec\u5728 ",(0,r.kt)("inlineCode",{parentName:"p"},"posts")," \u8868\u4e0a\u5b9a\u4e49\u4e00\u4e2a\u5f15\u7528 ",(0,r.kt)("inlineCode",{parentName:"p"},"users")," \u8868\u7684 ",(0,r.kt)("inlineCode",{parentName:"p"},"id")," \u5b57\u6bb5\u7684 ",(0,r.kt)("inlineCode",{parentName:"p"},"user_id")," \u5b57\u6bb5\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"Schema::table('posts', function (Blueprint $table) {\n    $table->integer('user_id')->unsigned();\n\n    $table->foreign('user_id')->references('id')->on('users');\n});\n")),(0,r.kt)("p",null,"\u8fd8\u53ef\u4ee5\u4e3a\u7ea6\u675f\u7684\u300con delete\u300d\u548c\u300con update\u300d\u5c5e\u6027\u6307\u5b9a\u6240\u9700\u7684\u64cd\u4f5c\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"$table->foreign('user_id')\n      ->references('id')->on('users')\n      ->onDelete('cascade');\n")),(0,r.kt)("p",null,"\u4f60\u53ef\u4ee5\u4f7f\u7528 ",(0,r.kt)("inlineCode",{parentName:"p"},"dropForeign")," \u65b9\u6cd5\u5220\u9664\u5916\u952e\u3002\u5916\u952e\u7ea6\u675f\u91c7\u7528\u7684\u547d\u540d\u65b9\u5f0f\u4e0e\u7d22\u5f15\u76f8\u540c\u3002\u5373\uff0c\u5c06\u6570\u636e\u8868\u540d\u79f0\u548c\u7ea6\u675f\u7684\u5b57\u6bb5\u8fde\u63a5\u8d77\u6765\uff0c\u63a5\u7740\u52a0\u4e0a\u300c_foreign\u300d\u540e\u7f00\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"$table->dropForeign('posts_user_id_foreign');\n")),(0,r.kt)("p",null,"\u6216\u8005\uff0c\u4f60\u4e5f\u53ef\u4ee5\u4f20\u9012\u4e00\u4e2a\u5b57\u6bb5\u6570\u7ec4\uff0c\u5728\u5220\u9664\u7684\u65f6\u5019\u4f1a\u6309\u7167\u7ea6\u5b9a\u81ea\u52a8\u8f6c\u6362\u4e3a\u5bf9\u5e94\u7684\u5916\u952e\u540d\u79f0\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"$table->dropForeign(['user_id']);\n")),(0,r.kt)("p",null,"\u4f60\u53ef\u4ee5\u5728\u8fc1\u79fb\u6587\u4ef6\u91cc\u4f7f\u7528\u4ee5\u4e0b\u65b9\u6cd5\u6765\u5f00\u542f\u6216\u5173\u95ed\u5916\u952e\u7ea6\u675f\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"Schema::enableForeignKeyConstraints();\n\nSchema::disableForeignKeyConstraints();\n")),(0,r.kt)("h2",{id:"\u8bd1\u8005\u7f72\u540d"},"\u8bd1\u8005\u7f72\u540d"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"\u7528\u6237\u540d"),(0,r.kt)("th",{parentName:"tr",align:null},"\u5934\u50cf"),(0,r.kt)("th",{parentName:"tr",align:null},"\u804c\u80fd"),(0,r.kt)("th",{parentName:"tr",align:null},"\u7b7e\u540d"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"https://github.com/hivenkay"},"@Kevin")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("img",{class:"avatar-66 rm-style",src:"https://dn-phphub.qbox.me/uploads/avatars/14940_1491960022.jpeg?imageView2/1/w/100/h/100"})),(0,r.kt)("td",{parentName:"tr",align:null},"\u7ffb\u8bd1"),(0,r.kt)("td",{parentName:"tr",align:null},"\u521d\u5fc3\u6613\u5f97\uff0c\u59cb\u7ec8\u96be\u5b88")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"https://laravel-china.org/users/5350"},"@JokerLinly")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("img",{class:"avatar-66 rm-style",src:"https://dn-phphub.qbox.me/uploads/avatars/5350_1481857380.jpg"})),(0,r.kt)("td",{parentName:"tr",align:null},"Review"),(0,r.kt)("td",{parentName:"tr",align:null},"Stay Hungry. Stay Foolish.")))),(0,r.kt)("hr",null),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"{note} \u6b22\u8fce\u4efb\u4f55\u5f62\u5f0f\u7684\u8f6c\u8f7d\uff0c\u4f46\u8bf7\u52a1\u5fc5\u6ce8\u660e\u51fa\u5904\uff0c\u5c0a\u91cd\u4ed6\u4eba\u52b3\u52a8\u5171\u521b\u5f00\u6e90\u793e\u533a\u3002"),(0,r.kt)("p",{parentName:"blockquote"},"\u8f6c\u8f7d\u8bf7\u6ce8\u660e\uff1a\u672c\u6587\u6863\u7531 Laravel China \u793e\u533a ",(0,r.kt)("a",{parentName:"p",href:"https://laravel-china.org"},"laravel-china.org")," \u7ec4\u7ec7\u7ffb\u8bd1\uff0c\u8be6\u89c1 ",(0,r.kt)("a",{parentName:"p",href:"https://laravel-china.org/topics/5756/laravel-55-document-translation-call-come-and-join-the-translation"},"\u7ffb\u8bd1\u53ec\u96c6\u5e16"),"\u3002"),(0,r.kt)("p",{parentName:"blockquote"},"\u6587\u6863\u6c38\u4e45\u5730\u5740\uff1a ",(0,r.kt)("a",{parentName:"p",href:"https://d.laravel-china.org"},"https://d.laravel-china.org"))))}N.isMDXComponent=!0}}]);