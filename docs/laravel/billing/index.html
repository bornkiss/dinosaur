<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-laravel/billing">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.18">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Bornkiss RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Bornkiss Atom Feed">
<link rel="search" type="application/opensearchdescription+xml" title="Bornkiss" href="/opensearch.xml">
<link rel="icon" href="/img/docusaurus.png">
<meta name="theme-color" content="rgb(37, 194, 160)">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#000">
<link rel="apple-touch-icon" href="/img/docusaurus.png">
<link rel="mask-icon" href="/img/docusaurus.svg" color="rgb(37, 194, 160)">
<meta name="msapplication-TileImage" content="/img/docusaurus.png">
<meta name="msapplication-TileColor" content="#000"><title data-rh="true">billing | Bornkiss</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://docs.bornkiss.com/docs/laravel/billing"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="billing | Bornkiss"><meta data-rh="true" name="description" content="ç®€ä»‹"><meta data-rh="true" property="og:description" content="ç®€ä»‹"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://docs.bornkiss.com/docs/laravel/billing"><link data-rh="true" rel="alternate" href="https://docs.bornkiss.com/docs/laravel/billing" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.bornkiss.com/docs/laravel/billing" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://3KT7AR3BLL-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.772e1c6d.css">
<link rel="preload" href="/assets/js/runtime~main.57d802bb.js" as="script">
<link rel="preload" href="/assets/js/main.903e1189.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_ZgBM">Skip to main content</a></div><nav class="navbar navbar--fixed-top navbarHideable_ObN2"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/bornkiss/logo-light.png" alt="My Site Logo" class="themedImage_W2Cr themedImage--light_TfLj"><img src="/img/bornkiss/logo-dark.png" alt="My Site Logo" class="themedImage_W2Cr themedImage--dark_oUvU"></div></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link navbar__link--active" href="/docs/intro">Docs</a><a class="navbar__item navbar__link" href="/blog">Blog</a><a href="https://github.com/bornkiss/dinosaur" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="toggle_S7eR colorModeToggle_vKtC"><button class="clean-btn toggleButton_rCf9 toggleButtonDisabled_Pu9x" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_v35p"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_nQuB"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_qEbK"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper"><div class="docPage_P2Lg"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_RiI4" type="button"></button><aside class="theme-doc-sidebar-container docSidebarContainer_rKC_"><div class="sidebar_RiAD sidebarWithHideableNavbar_d0QC"><a tabindex="-1" class="sidebarLogo_YUvz" href="/"><img src="/img/bornkiss/logo-light.png" alt="My Site Logo" class="themedImage_W2Cr themedImage--light_TfLj"><img src="/img/bornkiss/logo-dark.png" alt="My Site Logo" class="themedImage_W2Cr themedImage--dark_oUvU"></a><nav class="menu thin-scrollbar menu_izAj"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/intro">intro</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/docs/laravel/about">Laravel</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/laravel/about">about</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/laravel/artisan">artisan</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/laravel/authentication">authentication</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/laravel/authorization">authorization</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/laravel/billing">billing</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/laravel/blade">blade</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/laravel/broadcasting">broadcasting</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/laravel/cache">cache</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/laravel/collections">collections</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/laravel/configuration">configuration</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/laravel/container">container</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/laravel/contracts">contracts</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/laravel/contributing">contributing</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/laravel/contributions">contributions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/laravel/controllers">controllers</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/laravel/csrf">csrf</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/laravel/database-testing">database-testing</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/laravel/database">database</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/laravel/deployment">deployment</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/laravel/dusk">dusk</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/laravel/eloquent-collections">eloquent-collections</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/laravel/eloquent-mutators">eloquent-mutators</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/laravel/eloquent-relationships">eloquent-relationships</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/laravel/eloquent-resources">eloquent-resources</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/laravel/eloquent-serialization">eloquent-serialization</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/laravel/eloquent">eloquent</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/laravel/encryption">encryption</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/laravel/envoy">envoy</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/laravel/errors">errors</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/laravel/events">events</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/laravel/facades">facades</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/laravel/filesystem">filesystem</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/laravel/frontend">frontend</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/laravel/hashing">hashing</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/laravel/helpers">helpers</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/laravel/homestead">homestead</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/laravel/horizon">horizon</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/laravel/http-tests">http-tests</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/laravel/lifecycle">lifecycle</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/laravel/localization">localization</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/laravel/mail">mail</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/laravel/middleware">middleware</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/laravel/migrations">migrations</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/laravel/mix">mix</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/laravel/mocking">mocking</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/laravel/packages">packages</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/laravel/pagination">pagination</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/laravel/passport">passport</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/laravel/passwords">passwords</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/laravel/providers">providers</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/laravel/queries">queries</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/laravel/queues">queues</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/laravel/redirects">redirects</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/laravel/redis">redis</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/laravel/releases">releases</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/laravel/requests">requests</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/laravel/responses">responses</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/laravel/routing">routing</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/laravel/scheduling">scheduling</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/laravel/scout">scout</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/laravel/seeding">seeding</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/laravel/session">session</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/laravel/socialite">socialite</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/laravel/structure">structure</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/laravel/testing">testing</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/laravel/upgrade">upgrade</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/laravel/urls">urls</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/laravel/valet">valet</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/laravel/validation">validation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/laravel/views">views</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/select/guide/install">Select</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/xv6/preface">XV6</a></div></li></ul></nav></div></aside><main class="docMainContainer_TCnq"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_DM6M"><div class="docItemContainer_vinB"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Xlws" aria-label="breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/">ğŸ </a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><span class="breadcrumbs__link" itemprop="item name">Laravel</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="item name">billing</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_jdIR theme-doc-toc-mobile tocMobile_TmEX"><button type="button" class="clean-btn tocCollapsibleButton_Fzxq">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>billing</h1></header><h1>æ”¶è´¹ç³»ç»Ÿ Cashier</h1><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="ç®€ä»‹">ç®€ä»‹<a class="hash-link" href="#ç®€ä»‹" title="Direct link to heading">â€‹</a></h2><p> Laravel Cashier æä¾›äº†ç›´è§‚ã€æµç•…çš„æ¥å£æ¥æ¥å…¥ <a href="https://stripe.com" target="_blank" rel="noopener noreferrer">Stripe&#x27;s</a> and <a href="https://www.braintreepayments.com" target="_blank" rel="noopener noreferrer">Braintree&#x27;s</a> è®¢é˜…ä»˜è´¹æœåŠ¡ã€‚å®ƒå¯ä»¥å¤„ç†å‡ ä¹æ‰€æœ‰ä½ å†™èµ·æ¥éå¸¸å¤´ç–¼ä»˜è´¹è®¢é˜…ä»£ç ã€‚é™¤äº†æä¾›åŸºæœ¬çš„è®¢é˜…ç®¡ç†ä¹‹å¤–ï¼ŒCashier è¿˜å¯ä»¥å¸®ä½ å¤„ç†ä¼˜æƒ åˆ¸ï¼Œäº¤æ¢è®¢é˜…ã€è®¢é˜…â€œæ•°é‡â€ã€å–æ¶ˆå®½é™æœŸï¼Œç”šè‡³è¿˜å¯ä»¥ç”Ÿæˆpdfæ–‡æ¡£ã€‚</p><blockquote><p>{note} å¦‚æœä½ åªæ˜¯â€œä¸€æ¬¡æ€§â€çš„æ”¶è´¹å¹¶ä¸”ä¸æä¾›è®¢é˜…ã€‚ä½ å°±ä¸åº”è¯¥ä½¿ç”¨ Cashier ã€‚å¯ä»¥ç›´æ¥ä½¿ç”¨ Stripe å’Œ Braintree çš„ sdkã€‚</p></blockquote><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="é…ç½®">é…ç½®<a class="hash-link" href="#é…ç½®" title="Direct link to heading">â€‹</a></h2><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="stripe">Stripe<a class="hash-link" href="#stripe" title="Direct link to heading">â€‹</a></h3><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="composer">Composer<a class="hash-link" href="#composer" title="Direct link to heading">â€‹</a></h4><p>é¦–å…ˆ, å°† Stripe çš„ Cashier åŒ…æ·»åŠ åˆ°æ‚¨çš„ä¾èµ–é¡¹ä¸­ï¼š</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">composer require &quot;laravel/cashier&quot;:&quot;~7.0&quot;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="æœåŠ¡æä¾›è€…">æœåŠ¡æä¾›è€…<a class="hash-link" href="#æœåŠ¡æä¾›è€…" title="Direct link to heading">â€‹</a></h4><p>ä¸‹ä¸€æ­¥, åœ¨ <code>config/app.php</code> é…ç½®æ–‡ä»¶ä¸­ï¼Œæ³¨å†Œ <code>Laravel\Cashier\CashierServiceProvider</code> <a href="/docs/laravel/providers">æœåŠ¡æä¾›è€…</a>.</p><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="æ•°æ®åº“è¿ç§»">æ•°æ®åº“è¿ç§»<a class="hash-link" href="#æ•°æ®åº“è¿ç§»" title="Direct link to heading">â€‹</a></h4><p>åœ¨ä½¿ç”¨ Cashier ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦ <a href="/docs/laravel/migrations">å‡†å¤‡æ•°æ®åº“</a>. æˆ‘ä»¬éœ€è¦å‘æ‚¨çš„ <code>users</code> è¡¨ä¸­æ·»åŠ å‡ ä¸ªåˆ—ï¼Œå¹¶åˆ›å»ºä¸€ä¸ªæ–°çš„ <code>subscriptions</code> è¡¨æ¥ä¿å­˜æ‰€æœ‰å®¢æˆ·çš„è®¢é˜…ï¼š</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">Schema::table(&#x27;users&#x27;, function ($table) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    $table-&gt;string(&#x27;stripe_id&#x27;)-&gt;nullable();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    $table-&gt;string(&#x27;card_brand&#x27;)-&gt;nullable();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    $table-&gt;string(&#x27;card_last_four&#x27;)-&gt;nullable();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    $table-&gt;timestamp(&#x27;trial_ends_at&#x27;)-&gt;nullable();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">});</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Schema::create(&#x27;subscriptions&#x27;, function ($table) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    $table-&gt;increments(&#x27;id&#x27;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    $table-&gt;integer(&#x27;user_id&#x27;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    $table-&gt;string(&#x27;name&#x27;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    $table-&gt;string(&#x27;stripe_id&#x27;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    $table-&gt;string(&#x27;stripe_plan&#x27;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    $table-&gt;integer(&#x27;quantity&#x27;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    $table-&gt;timestamp(&#x27;trial_ends_at&#x27;)-&gt;nullable();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    $table-&gt;timestamp(&#x27;ends_at&#x27;)-&gt;nullable();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    $table-&gt;timestamps();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">});</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>ä¸€æ—¦è¿ç§»æ–‡ä»¶å»ºç«‹å¥½åï¼Œè¿è¡Œ Artisan çš„ <code>migrate</code> å‘½ä»¤ã€‚</p><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="billable-æ¨¡å‹">Billable æ¨¡å‹<a class="hash-link" href="#billable-æ¨¡å‹" title="Direct link to heading">â€‹</a></h4><p>ä¸‹ä¸€æ­¥, éœ€è¦æ·»åŠ  <code>Billable</code> trait åˆ°ä½ çš„æ¨¡å‹å®šä¹‰ã€‚trait æä¾›å„ç§æ–¹æ³•è®©æ‚¨æ‰§è¡Œå¸¸è§çš„å¸å•ä»»åŠ¡ï¼Œä¾‹å¦‚ï¼šåˆ›å»ºè®¢é˜…ã€åº”ç”¨ä¼˜æƒ åˆ¸å’Œæ›´æ–°ä¿¡ç”¨å¡ä¿¡æ¯ï¼š</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">use Laravel\Cashier\Billable;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class User extends Authenticatable</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    use Billable;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="api-keys">API Keys<a class="hash-link" href="#api-keys" title="Direct link to heading">â€‹</a></h4><p>æœ€å, ä½ éœ€è¦åœ¨ <code>services.php</code> é…ç½®æ–‡ä»¶ä¸­è®¾ç½®ä½ çš„ Stripe key ã€‚ ä½ å¯ä»¥åœ¨ Stripe çš„æ§åˆ¶é¢æ¿è·å–åˆ°ç›¸å…³çš„ API keysã€‚</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">&#x27;stripe&#x27; =&gt; [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &#x27;model&#x27;  =&gt; App\User::class,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &#x27;key&#x27; =&gt; env(&#x27;STRIPE_KEY&#x27;),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &#x27;secret&#x27; =&gt; env(&#x27;STRIPE_SECRET&#x27;),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">],</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="braintree">Braintree<a class="hash-link" href="#braintree" title="Direct link to heading">â€‹</a></h3><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="braintree-æ³¨æ„äº‹é¡¹">Braintree æ³¨æ„äº‹é¡¹<a class="hash-link" href="#braintree-æ³¨æ„äº‹é¡¹" title="Direct link to heading">â€‹</a></h4><p>å¯¹äºè®¸å¤šæ“ä½œï¼ŒCashier çš„ Stripe å’Œ Braintree å®ç°éƒ½æ˜¯ä¸€æ ·çš„ã€‚è¿™ä¸¤é¡¹æœåŠ¡éƒ½æä¾›ä¿¡ç”¨å¡æ”¯ä»˜æœåŠ¡ï¼Œä½† Braintree æ”¯æŒé€šè¿‡ PayPal æ”¯ä»˜ã€‚ç„¶è€Œï¼ŒBraintree ä¹Ÿç¼ºå°‘ä¸€äº›ç”± Stripe æ”¯æŒçš„åŠŸèƒ½ã€‚å½“ä½ å†³å®šä½¿ç”¨ Stripe æˆ– Braintree æ—¶ï¼Œä½ åº”è¯¥è®°ä½ä»¥ä¸‹å‡ ç‚¹ï¼š</p><div class="content-list" markdown="1">- Braintree æ”¯æŒ PayPal ï¼Œè€Œ Stripe ä¸æ”¯æŒ. - Braintree ä¸æ”¯æŒè®¢é˜…çš„ `increment` å’Œ `decrement` æ–¹æ³•ã€‚è¿™æ˜¯ Braintree çš„é™åˆ¶ï¼Œè€Œä¸æ˜¯ Cashier é™åˆ¶ã€‚ - Braintree ä¸æ”¯æŒåŸºäºç™¾åˆ†æ¯”çš„æŠ˜æ‰£ã€‚è¿™æ˜¯ Braintree çš„é™åˆ¶ï¼Œè€Œä¸æ˜¯ Cashier é™åˆ¶ã€‚</div><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="composer-1">Composer<a class="hash-link" href="#composer-1" title="Direct link to heading">â€‹</a></h4><p>é¦–å…ˆï¼Œå°† Braintree çš„ Cashier åŒ…æ·»åŠ åˆ°æ‚¨çš„ä¾èµ–é¡¹ï¼š</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">composer require &quot;laravel/cashier-braintree&quot;:&quot;~2.0&quot;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="æœåŠ¡æä¾›è€…-1">æœåŠ¡æä¾›è€…<a class="hash-link" href="#æœåŠ¡æä¾›è€…-1" title="Direct link to heading">â€‹</a></h4><p>ä¸‹ä¸€æ­¥, åœ¨ <code>config/app.php</code> é…ç½®æ–‡ä»¶ä¸­ï¼Œæ³¨å†Œ  <code>Laravel\Cashier\CashierServiceProvider</code> <a href="/docs/laravel/providers">æœåŠ¡æä¾›è€…</a>ï¼š</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">Laravel\Cashier\CashierServiceProvider::class</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="ä¿¡ç”¨å¡ä¼˜æƒ è®¡åˆ’">ä¿¡ç”¨å¡ä¼˜æƒ è®¡åˆ’<a class="hash-link" href="#ä¿¡ç”¨å¡ä¼˜æƒ è®¡åˆ’" title="Direct link to heading">â€‹</a></h4><p>åœ¨ä½¿ç”¨ Cashier ä¹‹å‰ï¼Œä½ éœ€è¦é¦–å…ˆåœ¨ Braintree æ§åˆ¶é¢æ¿å®šä¹‰ä¸€ä¸ª <code>plan-credit</code> æŠ˜æ‰£ã€‚è¿™ä¸ªæŠ˜æ‰£ä¼šæ ¹æ®ç”¨æˆ·é€‰æ‹©çš„æ”¯ä»˜é€‰é¡¹åŒ¹é…åˆé€‚çš„æŠ˜æ‰£æ¯”ä¾‹ï¼Œæ¯”å¦‚é€‰æ‹©å¹´ä»˜è¿˜æ˜¯æœˆä»˜ã€‚</p><p>åœ¨ Braintree æ§åˆ¶é¢æ¿ä¸­é…ç½®çš„æŠ˜æ‰£æ€»é¢å¯ä»¥éšæ„å¡«ï¼ŒCashier ä¼šåœ¨æ¯æ¬¡ä½¿ç”¨ä¼˜æƒ åˆ¸çš„æ—¶å€™æ ¹æ®æˆ‘ä»¬è‡ªå·±çš„å®šåˆ¶è¦†ç›–è¯¥é»˜è®¤å€¼ã€‚ç”±äº Braintree ä¸æ”¯æŒåœ¨è®¢é˜…é¢‘ç‡ä¸Šæ¥åŒ¹é…æŠ˜æ‰£æ¯”ä¾‹ï¼Œæ‰€ä»¥è¿™ä¸€ä¼˜æƒ åˆ¸æ˜¯å¿…éœ€çš„ã€‚</p><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="æ•°æ®åº“è¿ç§»-1">æ•°æ®åº“è¿ç§»<a class="hash-link" href="#æ•°æ®åº“è¿ç§»-1" title="Direct link to heading">â€‹</a></h4><p>å¼€å§‹ä½¿ç”¨ Cashier ä¹‹å‰, æˆ‘ä»¬éœ€è¦ <a href="/docs/laravel/migrations">å‡†å¤‡ä¸€ä¸‹æ•°æ®åº“</a>.æˆ‘ä»¬éœ€è¦åœ¨æ•°æ®åº“çš„ <code>users</code> è¡¨ä¸­æ–°å¢å‡ åˆ—ï¼Œä»¥åŠåˆ›å»ºä¸€ä¸ªæ–°çš„ <code>subscriptions</code> è¡¨æ¥å­˜å‚¨å®¢æˆ·çš„è®¢é˜…ä¿¡æ¯ï¼š</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">Schema::table(&#x27;users&#x27;, function ($table) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    $table-&gt;string(&#x27;braintree_id&#x27;)-&gt;nullable();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    $table-&gt;string(&#x27;paypal_email&#x27;)-&gt;nullable();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    $table-&gt;string(&#x27;card_brand&#x27;)-&gt;nullable();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    $table-&gt;string(&#x27;card_last_four&#x27;)-&gt;nullable();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    $table-&gt;timestamp(&#x27;trial_ends_at&#x27;)-&gt;nullable();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">});</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Schema::create(&#x27;subscriptions&#x27;, function ($table) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    $table-&gt;increments(&#x27;id&#x27;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    $table-&gt;integer(&#x27;user_id&#x27;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    $table-&gt;string(&#x27;name&#x27;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    $table-&gt;string(&#x27;braintree_id&#x27;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    $table-&gt;string(&#x27;braintree_plan&#x27;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    $table-&gt;integer(&#x27;quantity&#x27;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    $table-&gt;timestamp(&#x27;trial_ends_at&#x27;)-&gt;nullable();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    $table-&gt;timestamp(&#x27;ends_at&#x27;)-&gt;nullable();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    $table-&gt;timestamps();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">});</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>ä¸€æ—¦è¿ç§»æ–‡ä»¶å»ºç«‹å¥½åï¼Œè¿è¡Œ Artisan çš„ <code>migrate</code> å‘½ä»¤ã€‚</p><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="billable-æ¨¡å‹-1">Billable æ¨¡å‹<a class="hash-link" href="#billable-æ¨¡å‹-1" title="Direct link to heading">â€‹</a></h4><p>ä¸‹ä¸€æ­¥, æ·»åŠ  <code>Billable</code> trait åˆ°ä½ çš„æ¨¡å‹å®šä¹‰ ï¼š</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">use Laravel\Cashier\Billable;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class User extends Authenticatable</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    use Billable;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="api-keys-1">API Keys<a class="hash-link" href="#api-keys-1" title="Direct link to heading">â€‹</a></h4><p>ä¸‹ä¸€æ­¥, ä½ åº”è¯¥åœ¨ <code>services.php</code> æ–‡ä»¶ä¸­ï¼Œå‚è€ƒä¸‹é¢çš„é…ç½®é€‰é¡¹:</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">&#x27;braintree&#x27; =&gt; [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &#x27;model&#x27;  =&gt; App\User::class,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &#x27;environment&#x27; =&gt; env(&#x27;BRAINTREE_ENV&#x27;),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &#x27;merchant_id&#x27; =&gt; env(&#x27;BRAINTREE_MERCHANT_ID&#x27;),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &#x27;public_key&#x27; =&gt; env(&#x27;BRAINTREE_PUBLIC_KEY&#x27;),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &#x27;private_key&#x27; =&gt; env(&#x27;BRAINTREE_PRIVATE_KEY&#x27;),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">],</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>ç„¶åï¼Œä½ åº”è¯¥å‘ <code>AppServiceProvider</code> æœåŠ¡æä¾›å•†çš„ <code>boot</code> æ–¹æ³•ä¸­ï¼Œæ·»åŠ ä»¥ä¸‹çš„ Braintree SDK è°ƒç”¨ï¼š</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">\Braintree_Configuration::environment(config(&#x27;services.braintree.environment&#x27;));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">\Braintree_Configuration::merchantId(config(&#x27;services.braintree.merchant_id&#x27;));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">\Braintree_Configuration::publicKey(config(&#x27;services.braintree.public_key&#x27;));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">\Braintree_Configuration::privateKey(config(&#x27;services.braintree.private_key&#x27;));</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="è´§å¸é…ç½®">è´§å¸é…ç½®<a class="hash-link" href="#è´§å¸é…ç½®" title="Direct link to heading">â€‹</a></h3><p>Cashier ä½¿ç”¨ç¾å…ƒï¼ˆUSDï¼‰ä½œä¸ºé»˜è®¤è´§å¸ã€‚ä½ å¯ä»¥é€šè¿‡åœ¨æœåŠ¡æä¾›è€…çš„ <code>boot</code> æ–¹æ³•ä¸­è°ƒç”¨ <code>Cashier::useCurrency</code> æ–¹æ³•æ¥æ›´æ”¹é»˜è®¤çš„è´§å¸ã€‚è¿™ä¸ª <code>useCurrency</code> æ–¹æ³•æ¥å—ä¸¤ä¸ªå­—ç¬¦ä¸²å‚æ•°ï¼šè´§å¸å’Œè´§å¸ç¬¦å·ï¼š</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">use Laravel\Cashier\Cashier;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Cashier::useCurrency(&#x27;eur&#x27;, &#x27;â‚¬&#x27;);</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="è®¢é˜…">è®¢é˜…<a class="hash-link" href="#è®¢é˜…" title="Direct link to heading">â€‹</a></h2><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="åˆ›å»ºè®¢é˜…">åˆ›å»ºè®¢é˜…<a class="hash-link" href="#åˆ›å»ºè®¢é˜…" title="Direct link to heading">â€‹</a></h3><p>åˆ›å»ºè®¢é˜…ï¼Œé¦–å…ˆéœ€è¦è·å–åˆ°ä¸€ä¸ª billable æ¨¡å‹å®ä¾‹ï¼Œè¿™é€šå¸¸æ˜¯ <code>App\User</code> çš„ä¸€ä¸ªå®ä¾‹ã€‚ä¸€æ—¦æ‚¨è·å–äº†æ¨¡å‹å®ä¾‹ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ <code>newSubscription</code> æ–¹æ³•åˆ›å»ºæ¨¡å‹çš„è®¢é˜…:</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">$user = User::find(1);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$user-&gt;newSubscription(&#x27;main&#x27;, &#x27;premium&#x27;)-&gt;create($stripeToken);</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p> <code>newSubscription</code> æ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°åº”è¯¥æ˜¯è®¢é˜…çš„åç§°ã€‚å¦‚æœæ‚¨çš„åº”ç”¨ç¨‹åºåªæä¾›ä¸€ä¸ªè®¢é˜…ï¼Œé‚£ä¹ˆæ‚¨å¯ä»¥å°†å…¶è®¾ç½®ä¸º <code>main</code> or <code>primary</code>ã€‚
ç¬¬äºŒä¸ªå‚æ•°æ˜¯ç”¨æˆ·è®¢é˜…çš„ Stripe / Braintree è®¡åˆ’ã€‚è¿™ä¸ªå€¼åº”è¯¥ä¸ Stripe æˆ– Braintree ä¸­çš„æ ‡è¯†ç¬¦å¯¹åº”ã€‚</p><p> <code>create</code> æ–¹æ³•æ¥å—ä¸€ä¸ª Stripe ä¿¡ç”¨å¡ / æºä»¤ç‰Œï¼Œå®ƒå°†å¼€å§‹è®¢é˜…ï¼Œå¹¶ä½¿ç”¨å®¢æˆ· ID å’Œå…¶ä»–ç›¸å…³çš„è´¦å•ä¿¡æ¯æ›´æ–°æ•°æ®åº“ã€‚</p><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="ç”¨æˆ·å…¶ä»–çš„è¯¦ç»†ä¿¡æ¯">ç”¨æˆ·å…¶ä»–çš„è¯¦ç»†ä¿¡æ¯<a class="hash-link" href="#ç”¨æˆ·å…¶ä»–çš„è¯¦ç»†ä¿¡æ¯" title="Direct link to heading">â€‹</a></h4><p>å¦‚æœæ‚¨æƒ³è¦æŒ‡å®šç”¨æˆ·å…¶ä»–çš„è¯¦ç»†ä¿¡æ¯ï¼Œæ‚¨å¯ä»¥é€šè¿‡å°†å®ƒä»¬ä½œä¸ºç¬¬äºŒä¸ªå‚æ•°ä¼ é€’ç»™ <code>create</code> æ–¹æ³•ï¼š</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">$user-&gt;newSubscription(&#x27;main&#x27;, &#x27;monthly&#x27;)-&gt;create($stripeToken, [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &#x27;email&#x27; =&gt; $email,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">]);</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>è¦äº†è§£æ›´å¤šå…³äº Stripe æˆ– Braintree æ”¯æŒçš„é¢å¤–å­—æ®µï¼Œè¯·æŸ¥çœ‹ Stripe çš„å†…å®¹ <a href="https://stripe.com/docs/api#create_customer" target="_blank" rel="noopener noreferrer">åˆ›å»ºå®¢æˆ·æ–‡æ¡£</a> æˆ–å¯¹åº”çš„ <a href="https://developers.braintreepayments.com/reference/request/customer/create/php" target="_blank" rel="noopener noreferrer">Braintree æ–‡æ¡£</a>ã€‚</p><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="ä¼˜æƒ åˆ¸">ä¼˜æƒ åˆ¸<a class="hash-link" href="#ä¼˜æƒ åˆ¸" title="Direct link to heading">â€‹</a></h4><p>å¦‚æœæ‚¨æƒ³åœ¨åˆ›å»ºè®¢é˜…æ—¶ä½¿ç”¨ä¼˜æƒ åˆ¸ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ <code>withCoupon</code> æ–¹æ³•ï¼š</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">$user-&gt;newSubscription(&#x27;main&#x27;, &#x27;monthly&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     -&gt;withCoupon(&#x27;code&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     -&gt;create($stripeToken);</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="æ£€æŸ¥è®¢é˜…çŠ¶æ€">æ£€æŸ¥è®¢é˜…çŠ¶æ€<a class="hash-link" href="#æ£€æŸ¥è®¢é˜…çŠ¶æ€" title="Direct link to heading">â€‹</a></h3><p>ä¸€æ—¦ç”¨æˆ·åœ¨æ‚¨çš„åº”ç”¨ç¨‹åºè®¢é˜…äº†ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨å„ç§æ–¹ä¾¿çš„æ–¹æ³•è½»æ¾åœ°æ£€æŸ¥ä»–ä»¬çš„è®¢é˜…çŠ¶æ€ã€‚é¦–å…ˆï¼Œå¦‚æœç”¨æˆ·æœ‰ä¸€ä¸ªæ¿€æ´»çš„è®¢é˜…ï¼Œé‚£ä¹ˆ <code>subscribed</code> çš„æ–¹æ³•è¿”å› <code>true</code> ï¼Œå³ä½¿è®¢é˜…å½“å‰å¤„äºè¯•ç”¨é˜¶æ®µï¼š</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">if ($user-&gt;subscribed(&#x27;main&#x27;)) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>è¿™ä¸ª <code>subscribed</code> æ–¹æ³•è¿˜å¯ä»¥åœ¨ <a href="/docs/laravel/middleware">è·¯ç”±ä¸­é—´ä»¶</a> ä½¿ç”¨ï¼Œå…è®¸æ‚¨æ ¹æ®ç”¨æˆ·çš„è®¢é˜…çŠ¶æ€å¯¹è·¯ç”±å’Œæ§åˆ¶å™¨è¿›è¡Œè®¿é—®ã€‚</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">public function handle($request, Closure $next)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if ($request-&gt;user() &amp;&amp; ! $request-&gt;user()-&gt;subscribed(&#x27;main&#x27;)) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // ç”¨æˆ·å¹¶æ²¡æœ‰å®Œæˆæ”¯ä»˜...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return redirect(&#x27;billing&#x27;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return $next($request);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>å¦‚æœæ‚¨æƒ³è¦ç¡®å®šç”¨æˆ·æ˜¯å¦ä»ç„¶å¤„äºæµ‹è¯•é˜¶æ®µï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ <code>onTrial</code> æ–¹æ³•ã€‚è¿™ä¸ªæ–¹æ³•å¯¹äºå‘ç”¨æˆ·æ˜¾ç¤ºä»–ä»¬ä»ç„¶å¤„äºè¯•ç”¨æœŸçš„è­¦å‘Šæ˜¯å¾ˆæœ‰ç”¨çš„ã€‚</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">if ($user-&gt;subscription(&#x27;main&#x27;)-&gt;onTrial()) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>å¯ä»¥ä½¿ç”¨ <code>subscribedToPlan</code> æ–¹æ³•å¯ä»¥åŸºäºç»™å®šçš„ Stripe / Braintree è®¡åˆ’ ID æ¥ç¡®å®šç”¨æˆ·æ˜¯å¦è®¢é˜…äº†çš„è¯¥è®¡åˆ’ï¼Œåœ¨æœ¬ä¾‹ä¸­ï¼Œæˆ‘ä»¬å°†ç¡®å®šç”¨æˆ·çš„ <code>main</code> è®¢é˜…æ˜¯å¦æ¿€æ´»äº† <code>monthly</code> è®¡åˆ’ï¼š</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">if ($user-&gt;subscribedToPlan(&#x27;monthly&#x27;, &#x27;main&#x27;)) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="å–æ¶ˆè®¢é˜…çŠ¶æ€">å–æ¶ˆè®¢é˜…çŠ¶æ€<a class="hash-link" href="#å–æ¶ˆè®¢é˜…çŠ¶æ€" title="Direct link to heading">â€‹</a></h4><p>ä¸ºäº†ç¡®å®šç”¨æˆ·æ˜¯å¦æ›¾ç»è®¢é˜…ï¼Œä½†æ˜¯å·²ç»å–æ¶ˆäº†ä»–ä»¬çš„è®¢é˜…ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ <code>cancelled</code> æ–¹æ³•:</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">if ($user-&gt;subscription(&#x27;main&#x27;)-&gt;cancelled()) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>æ‚¨è¿˜å¯ä»¥ç¡®å®šç”¨æˆ·æ˜¯å¦å·²ç»å–æ¶ˆäº†è®¢é˜…ï¼Œä½†æ˜¯ä»ç„¶å¤„äºè®¢é˜…çš„ã€Œå®½é™æœŸã€ï¼Œç›´åˆ°è®¢é˜…å®Œå…¨è¿‡æœŸä¸ºæ­¢ã€‚ä¾‹å¦‚ï¼Œå¦‚æœç”¨æˆ·åœ¨3æœˆ5æ—¥å–æ¶ˆäº†åŸå®šäº3æœˆ10æ—¥åˆ°æœŸçš„è®¢é˜…ï¼Œé‚£ä¹ˆç”¨æˆ·å°†åœ¨3æœˆ10æ—¥ä¹‹å‰è¿›è¡Œã€Œå®½é™æœŸã€ã€‚è¯·æ³¨æ„ï¼Œåœ¨æ­¤æœŸé—´ï¼Œ<code>subscribed</code> æ–¹æ³•ä»ç„¶è¿”å› <code>true</code> ï¼š</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">if ($user-&gt;subscription(&#x27;main&#x27;)-&gt;onGracePeriod()) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="ä¿®æ”¹è®¢é˜…è®¡åˆ’">ä¿®æ”¹è®¢é˜…è®¡åˆ’<a class="hash-link" href="#ä¿®æ”¹è®¢é˜…è®¡åˆ’" title="Direct link to heading">â€‹</a></h3><p>ç”¨æˆ·åœ¨æ‚¨çš„åº”ç”¨ç¨‹åºä¸­è®¢é˜…äº†ä¹‹åï¼Œä»–ä»¬å¯èƒ½ä¼šå¶å°”æƒ³è¦æ›´æ”¹ä¸€ä¸ªæ–°çš„è®¢é˜…è®¡åˆ’ã€‚è¦å°†ä¸€ä¸ªç”¨æˆ·åˆ‡æ¢åˆ°ä¸€ä¸ªæ–°çš„è®¢é˜…ï¼Œéœ€å°†è®¢é˜…è®¡åˆ’çš„æ ‡è¯†ç¬¦ä¼ é€’ç»™ <code>swap</code> æ–¹æ³•ï¼š
$user = App\User::find(1);</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">$user-&gt;subscription(&#x27;main&#x27;)-&gt;swap(&#x27;provider-plan-id&#x27;);</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>å¦‚æœç”¨æˆ·åœ¨è¯•ç”¨æœŸï¼Œè¯•ç”¨æœŸçš„æœŸé™ä¼šè¢«ä¿ç•™ã€‚å¦å¤–ï¼Œå¦‚æœè®¢é˜…çš„æ•°é‡å­˜åœ¨ã€Œä»½é¢ã€ï¼Œé‚£ä¹ˆè¯¥ä»½é¢ä¹Ÿå°†ä¿æŒã€‚
å¦‚æœä½ æƒ³åœ¨æ›´æ”¹ç”¨æˆ·è®¢é˜…è®¡åˆ’çš„æ—¶å€™å–æ¶ˆç”¨æˆ·å½“å‰è®¢é˜…çš„è¯•ç”¨æœŸï¼Œå¯ä»¥ä½¿ç”¨ <code>skipTrial</code> æ–¹æ³•ï¼š</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">$user-&gt;subscription(&#x27;main&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        -&gt;skipTrial()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        -&gt;swap(&#x27;provider-plan-id&#x27;);</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="è®¢é˜…é‡">è®¢é˜…é‡<a class="hash-link" href="#è®¢é˜…é‡" title="Direct link to heading">â€‹</a></h3><blockquote><p>{note}
è®¢é˜…æ•°é‡ä»…ç”± Cashier çš„ Stripe æ”¯æŒã€‚Braintree æ²¡æœ‰ä¸€ä¸ªå¯¹åº”äº Stripe çš„ã€Œæ•°é‡ã€çš„ç‰¹æ€§ã€‚</p></blockquote><p>æœ‰äº›æ—¶å€™è®¢é˜…æ˜¯ä¼šå—ã€Œæ•°é‡ã€å½±å“çš„ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œä½ çš„åº”ç”¨ç¨‹åºçš„ä»˜è´¹æ–¹å¼å¯èƒ½æ˜¯æ¯ä¸ªè´¦æˆ· $10 /äºº/æœˆã€‚ä½ å¯ä»¥ä½¿ç”¨ <code>incrementQuantity</code> å’Œ <code>decrementQuantity</code> æ–¹æ³•è½»æ¾çš„å¢åŠ æˆ–è€…å‡å°‘ä½ çš„è®¢é˜…æ•°é‡ï¼š</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">$user = User::find(1);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$user-&gt;subscription(&#x27;main&#x27;)-&gt;incrementQuantity();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// å¯¹å½“å‰çš„è®¢é˜…æ•°é‡åŠ  5 ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$user-&gt;subscription(&#x27;main&#x27;)-&gt;incrementQuantity(5);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$user-&gt;subscription(&#x27;main&#x27;)-&gt;decrementQuantity();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// å¯¹è®¢é˜…çš„å½“å‰æ•°é‡å‡å» 5 ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$user-&gt;subscription(&#x27;main&#x27;)-&gt;decrementQuantity(5);</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>æˆ–è€…ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ <code>updateQuantity</code> æ–¹æ³•è®¾ç½®ä¸€ä¸ªç‰¹å®šçš„æ•°é‡ï¼š</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">$user-&gt;subscription(&#x27;main&#x27;)-&gt;updateQuantity(10);</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>è¦è·å¾—æ›´å¤šå…³äºè®¢é˜…é‡çš„ä¿¡æ¯ï¼Œè¯·å‚è€ƒ <a href="https://stripe.com/docs/subscriptions/quantities" target="_blank" rel="noopener noreferrer">Stripe æ–‡æ¡£</a>.</p><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="è®¢é˜…ç¨é¢">è®¢é˜…ç¨é¢<a class="hash-link" href="#è®¢é˜…ç¨é¢" title="Direct link to heading">â€‹</a></h3><p>è¦æŒ‡å®šç”¨æˆ·åœ¨è®¢é˜…ä¸­æ”¯ä»˜çš„ç¨ç‡ç™¾åˆ†æ¯”ï¼Œåœ¨è®¡è´¹æ¨¡å¼ä¸Šå®ç° <code>taxPercentage</code> æ–¹æ³•ï¼Œå¹¶åœ¨0åˆ°100ä¹‹é—´è¿”å›ä¸€ä¸ªæ•°å€¼ï¼Œä¸è¶…è¿‡2ä¸ªå°æ•°ç‚¹ã€‚</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">public function taxPercentage() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return 20;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p><code>taxPercentage</code> æ–¹æ³•ä½¿ä½ èƒ½å¤Ÿåœ¨æ¨¡å‹çš„åŸºç¡€ä¸Šåº”ç”¨ç¨ç‡ï¼Œè¿™å¯¹äºä¸€ä¸ªè·¨è¶Šå¤šä¸ªå›½å®¶å’Œç¨ç‡çš„ç”¨æˆ·ç¾¤æ¥è¯´å¯èƒ½æ˜¯æœ‰å¸®åŠ©çš„ã€‚</p><blockquote><p>{note} <code>taxPercentage</code> æ–¹æ³•åªé€‚ç”¨äºè®¢é˜…ä»˜è´¹æ¨¡å¼ã€‚å¦‚æœä½ ç”¨ charges æ¥åš å®Œæˆä¸€æ¬¡æ€§æ”¶è´¹çš„ï¼Œä½ éœ€è¦æ‰‹å·¥æŒ‡å®šç¨ç‡ã€‚</p></blockquote><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="å–æ¶ˆè®¢é˜…">å–æ¶ˆè®¢é˜…<a class="hash-link" href="#å–æ¶ˆè®¢é˜…" title="Direct link to heading">â€‹</a></h3><p>è¦å–æ¶ˆè®¢é˜…ï¼Œåªéœ€åœ¨ç”¨æˆ·çš„è®¢é˜…ä¸Šè°ƒç”¨ <code>cancel</code> æ–¹æ³•ï¼š</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">$user-&gt;subscription(&#x27;main&#x27;)-&gt;cancel();</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>å½“ä¸€ä¸ªè®¢é˜…è¢«å–æ¶ˆæ—¶ï¼ŒCashier ä¼šè‡ªåŠ¨åœ¨ä½ çš„æ•°æ®åº“ä¸­è®¾ç½® <code>ends_at</code> åˆ—ã€‚è¿™ä¸ªåˆ—ç”¨äºçŸ¥é“ <code>subscribed</code> çš„æ–¹æ³•ä½•æ—¶åº”è¯¥å¼€å§‹è¿”å› <code>false</code> ã€‚ä¾‹å¦‚ï¼Œå¦‚æœå®¢æˆ·åœ¨3æœˆ1æ—¥å–æ¶ˆè®¢é˜…ï¼Œä½†æ˜¯è®¢é˜…è®¡åˆ’ç›´åˆ°3æœˆ5æ—¥æ‰ä¼šç»“æŸï¼Œ<code>subscribed</code> æ–¹æ³•å°†ä¼šè¿”å› <code>true</code> ä¸€ç›´åˆ°3æœˆ5æ—¥ã€‚</p><p>æ‚¨å¯ä»¥ä½¿ç”¨ <code>onGracePeriod</code> æ–¹æ³•ç¡®å®šç”¨æˆ·æ˜¯å¦å·²ç»å–æ¶ˆäº†è®¢é˜…ï¼Œä½†æ˜¯ä»ç„¶åœ¨ä¸€ä¸ªã€Œå®½é™æœŸã€ï¼š</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">if ($user-&gt;subscription(&#x27;main&#x27;)-&gt;onGracePeriod()) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>å¦‚æœä½ æƒ³é©¬ä¸Šå–æ¶ˆè®¢é˜…ï¼Œè¯·åœ¨ç”¨æˆ·çš„è®¢é˜…ä¸­è°ƒç”¨ <code>cancelNow</code> æ–¹æ³•ï¼š</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">$user-&gt;subscription(&#x27;main&#x27;)-&gt;cancelNow();</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="æ¢å¤è®¢é˜…">æ¢å¤è®¢é˜…<a class="hash-link" href="#æ¢å¤è®¢é˜…" title="Direct link to heading">â€‹</a></h3><p>å¦‚æœç”¨æˆ·å–æ¶ˆäº†ä»–ä»¬çš„è®¢é˜…ï¼Œå¯ä»¥ä½¿ç”¨ <code>resume</code> çš„æ–¹æ³•æ¥æ¢å¤ä»–ä»¬çš„è®¢é˜…ã€‚ç”¨æˆ·è¿˜ <strong>å¿…é¡»</strong> åœ¨ä»–ä»¬çš„å®½é™æœŸå†…æ‰èƒ½æ¢å¤è®¢é˜…ï¼š</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">$user-&gt;subscription(&#x27;main&#x27;)-&gt;resume();</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>å¦‚æœç”¨æˆ·å–æ¶ˆè®¢é˜…ï¼Œç„¶ååœ¨è®¢é˜…å®Œå…¨è¿‡æœŸä¹‹å‰æ¢å¤è®¢é˜…ï¼Œä»–ä»¬å°†ä¸ä¼šç«‹å³è¢«è®¡è´¹ã€‚ç›¸åï¼Œä»–ä»¬çš„è®¢é˜…å°†ä¼šè¢«é‡æ–°æ¿€æ´»ï¼Œéœ€è¦æŒ‰ç…§åŸæœ¬çš„æ”¯ä»˜æµç¨‹å†æ¬¡è¿›è¡Œæ”¯ä»˜ã€‚</p><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="æ›´æ–°ä¿¡ç”¨å¡ä¿¡æ¯">æ›´æ–°ä¿¡ç”¨å¡ä¿¡æ¯<a class="hash-link" href="#æ›´æ–°ä¿¡ç”¨å¡ä¿¡æ¯" title="Direct link to heading">â€‹</a></h3><p> <code>updateCard</code> æ–¹æ³•å¯ä»¥ç”¨æ¥æ›´æ–°å®¢æˆ·çš„ä¿¡ç”¨å¡ä¿¡æ¯ã€‚è¯¥æ–¹æ³•æ¥å—ä¸€ä¸ª Stripe çš„ token ï¼Œå¹¶å°†æ–°ä¿¡ç”¨å¡åˆ†é…ä¸ºé»˜è®¤çš„æ”¯ä»˜æºï¼š</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">$user-&gt;updateCard($stripeToken);</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="è¯•ç”¨è®¢é˜…">è¯•ç”¨è®¢é˜…<a class="hash-link" href="#è¯•ç”¨è®¢é˜…" title="Direct link to heading">â€‹</a></h2><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="æœ‰ä¿¡ç”¨å¡çš„æƒ…å†µä¸‹">æœ‰ä¿¡ç”¨å¡çš„æƒ…å†µä¸‹<a class="hash-link" href="#æœ‰ä¿¡ç”¨å¡çš„æƒ…å†µä¸‹" title="Direct link to heading">â€‹</a></h3><p>å¦‚æœä½ æƒ³è¦ç»™ä½ çš„å®¢æˆ·æä¾›è¯•ç”¨æœŸï¼ŒåŒæ—¶è¿˜è¦æ”¶é›†æ”¯ä»˜æ–¹æ³•ä¿¡æ¯ï¼Œé‚£ä¹ˆä½ åº”è¯¥åœ¨åˆ›å»ºè®¢é˜…æ—¶ä½¿ç”¨ <code>trialDays</code> æ–¹æ³•ï¼š</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">$user = User::find(1);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$user-&gt;newSubscription(&#x27;main&#x27;, &#x27;monthly&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            -&gt;trialDays(10)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            -&gt;create($stripeToken);</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>æ­¤æ–¹æ³•å°†åœ¨æ•°æ®åº“å†…çš„è®¢é˜…è®°å½•ä¸­è®¾ç½®è¯•ç”¨æœŸç»“æŸæ—¥æœŸï¼Œå¹¶æŒ‡ç¤º Stripe / Braintree åœ¨æ­¤æ—¥æœŸä¹‹å‰ä¸å¼€å§‹å‘å®¢æˆ·æ”¶è´¹ã€‚</p><blockquote><p>{note} å¦‚æœå®¢æˆ·æ²¡æœ‰åœ¨è¯•ç”¨æœŸç»“æŸä¹‹å‰å–æ¶ˆè®¢é˜…ï¼Œè®¢é˜…ä¼šè¢«è‡ªåŠ¨ç»“ç®—ï¼Œæ‰€ä»¥éœ€è¦åœ¨è¯•ç”¨æœŸç»“æŸä¹‹å‰é€šçŸ¥ä½ çš„å®¢æˆ·ã€‚</p></blockquote><p>æ‚¨å¯ä»¥ä½¿ç”¨ç”¨æˆ·å®ä¾‹çš„ <code>onTrial</code> æ–¹æ³•æˆ–è®¢é˜…å®ä¾‹çš„ <code>onTrial</code> æ–¹æ³•æ¥ç¡®å®šç”¨æˆ·æ˜¯å¦å¤„äºè¯•ç”¨æœŸã€‚ä¸‹é¢ä¸¤ä¸ªä¾‹å­æ˜¯ç›¸åŒçš„ï¼š
if ($user-&gt;onTrial(&#x27;main&#x27;)) {
//
}</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">if ($user-&gt;subscription(&#x27;main&#x27;)-&gt;onTrial()) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="æ²¡æœ‰ä¿¡ç”¨å¡çš„æƒ…å†µä¸‹">æ²¡æœ‰ä¿¡ç”¨å¡çš„æƒ…å†µä¸‹<a class="hash-link" href="#æ²¡æœ‰ä¿¡ç”¨å¡çš„æƒ…å†µä¸‹" title="Direct link to heading">â€‹</a></h3><p>å¦‚æœæ‚¨å¸Œæœ›åœ¨ä¸æ”¶é›†ç”¨æˆ·çš„æ”¯ä»˜æ–¹æ³•ä¿¡æ¯çš„æƒ…å†µä¸‹æä¾›è¯•ç”¨æœŸï¼Œæ‚¨å¯ä»¥ç®€å•åœ°å°†ç”¨æˆ·è®°å½•çš„ <code>trial_ends_at</code> åˆ—è®¾ç½®ä¸ºæ‚¨æƒ³è¦çš„è¯•ç”¨ç»“æŸæ—¥æœŸã€‚è¿™é€šå¸¸æ˜¯åœ¨ç”¨æˆ·æ³¨å†Œè¿‡ç¨‹ä¸­å®Œæˆçš„ï¼š</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">$user = User::create([</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // å¡«å……å…¶ä»–ç”¨æˆ·å±æ€§...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &#x27;trial_ends_at&#x27; =&gt; Carbon::now()-&gt;addDays(10),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">]);</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><blockquote><p>{note}è¯·ç¡®ä¿åœ¨ä½ çš„æ¨¡å‹ä¸­å·²ç»ä¸º <code>trial_ends_at</code> <a href="/docs/laravel/eloquent-mutators#date-mutators">æ—¥æœŸè½¬æ¢å™¨</a>ã€‚</p></blockquote><p>Cashier æŠŠè¿™ç§ç±»å‹çš„è¯•ç”¨å¼•ç”¨ä¸ºã€Œgeneric trialã€, å› ä¸ºå®ƒå¹¶æ²¡æœ‰å…³è”ä»»ä½•å·²å­˜åœ¨çš„è®¢é˜…ã€‚å¦‚æœå½“å‰çš„æ—¥æœŸæ²¡æœ‰è¶…è¿‡ <code>trial_ends_at</code> çš„å€¼ï¼Œé‚£ä¹ˆ <code>User</code> å®ä¾‹ä¸Šçš„  <code>onTrial</code> æ–¹æ³•å°†è¿”å› <code>true</code> ï¼š</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">if ($user-&gt;onTrial()) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // ç”¨æˆ·åœ¨è¯•ç”¨æœŸå†…...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>å¦‚æœæ‚¨å¸Œæœ›æ˜ç¡®åœ°çŸ¥é“ç”¨æˆ·å¤„äºã€Œgenericã€çš„è¯•ç”¨æœŸï¼Œå¹¶ä¸”è¿˜æ²¡æœ‰åˆ›å»ºå®é™…çš„è®¢é˜…ï¼Œé‚£ä¹ˆæ‚¨å¯ä»¥ä½¿ç”¨ <code>onGenericTrial</code> æ–¹æ³•ï¼š</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">if ($user-&gt;onGenericTrial()) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // ç”¨æˆ·åœ¨ ã€Œgenericã€ è¯•ç”¨æœŸå†…...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>ä¸€æ—¦æ‚¨å‡†å¤‡å¥½ä¸ºç”¨æˆ·åˆ›å»ºå®é™…çš„è®¢é˜…ï¼Œæ‚¨å¯ä»¥åƒå¾€å¸¸ä¸€æ ·ä½¿ç”¨ <code>newSubscription</code> æ–¹æ³•ï¼š</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">$user = User::find(1);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$user-&gt;newSubscription(&#x27;main&#x27;, &#x27;monthly&#x27;)-&gt;create($stripeToken);</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="å¤„ç†-stripe-webhooks">å¤„ç† Stripe Webhooks<a class="hash-link" href="#å¤„ç†-stripe-webhooks" title="Direct link to heading">â€‹</a></h2><p> Stripe å’Œ Braintree éƒ½å¯ä»¥é€šè¿‡ webhooks é€šçŸ¥ä½ çš„åº”ç”¨ç¨‹åºã€‚è¦å¤„ç† Stripe Webhooks ï¼Œå®šä¹‰ä¸€ä¸ªè·¯ç”±æŒ‡å‘ Cashier çš„ webhook æ§åˆ¶å™¨çš„ã€‚è¯¥æ§åˆ¶å™¨å°†å¤„ç†æ‰€æœ‰ä¼ å…¥çš„ webhook è¯·æ±‚ï¼Œå¹¶å°†å®ƒä»¬å‘é€åˆ°é€‚å½“çš„æ§åˆ¶å™¨æ–¹æ³•ï¼š</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">Route::post(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &#x27;stripe/webhook&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &#x27;\Laravel\Cashier\Http\Controllers\WebhookController@handleWebhook&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">);</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><blockquote><p>{note} ä¸€æ—¦ä½ æ³¨å†Œäº†ä½ çš„è·¯ç”±ä¹‹åï¼Œä¸€å®šè¦åœ¨ä½ çš„ Stripe æ§åˆ¶é¢æ¿è®¾ç½®ä¸­é…ç½®webhook URLã€‚</p></blockquote><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œè¯¥æ§åˆ¶å™¨å°†è‡ªåŠ¨å¤„ç†åœ¨å¤šæ¬¡å¤±è´¥çš„æ”¯ä»˜å°è¯•åè‡ªåŠ¨å–æ¶ˆè¯¥è®¢é˜…(æ ¹æ®æ‚¨çš„ Stripe è®¾ç½®æ‰€å®šä¹‰);ä½†æ˜¯ï¼Œæˆ‘ä»¬å¾ˆå¿«å°±ä¼šå‘ç°ï¼Œæ‚¨å¯ä»¥æ‰©å±•è¿™ä¸ªæ§åˆ¶å™¨æ¥å¤„ç†ä»»ä½•æ‚¨å–œæ¬¢çš„ webhook äº‹ä»¶ã€‚</p><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="webhooks--csrf-ä¿æŠ¤">Webhooks &amp; CSRF ä¿æŠ¤<a class="hash-link" href="#webhooks--csrf-ä¿æŠ¤" title="Direct link to heading">â€‹</a></h4><p>å› ä¸º Stripe webhooks éœ€è¦ç»•è¿‡ Laravel çš„ <a href="/docs/laravel/csrf">CSRF ä¿æŠ¤</a>ï¼Œä¸€å®šè¦åœ¨ <code>VerifyCsrfToken</code> ä¸­é—´ä»¶ä¸­åˆ—å‡º URI ï¼Œæˆ–è€…åˆ—å‡º <code>web</code> ä¸­é—´ä»¶ç»„ä¹‹å¤–çš„è·¯ç”±ï¼š</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">protected $except = [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &#x27;stripe/*&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">];</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="å®šä¹‰-webhook-äº‹ä»¶å¤„ç†ç¨‹åº">å®šä¹‰ Webhook äº‹ä»¶å¤„ç†ç¨‹åº<a class="hash-link" href="#å®šä¹‰-webhook-äº‹ä»¶å¤„ç†ç¨‹åº" title="Direct link to heading">â€‹</a></h3><p> Cashier å¯¹äºå¤±è´¥çš„æ”¯ä»˜è‡ªåŠ¨è¿›è¡Œå–æ¶ˆè®¢é˜…çš„å¤„ç†ï¼Œä½†æ˜¯å¦‚æœä½ æœ‰å…¶ä»–çš„ Stripe webhook äº‹ä»¶ï¼Œä½ æƒ³è¦å¤„ç†ï¼Œå¯ä»¥ç®€å•åœ°æ‰©å±• Webhook æ§åˆ¶å™¨ã€‚æ‚¨çš„æ–¹æ³•ååº”è¯¥ä¸ Cashier æœŸæœ›çš„çº¦å®šç›¸ç¬¦ï¼Œå…·ä½“æ¥è¯´ï¼Œæ–¹æ³•åº”è¯¥æ˜¯ç”¨ <code>handle</code> å‰ç¼€ï¼Œå’Œæ‚¨å¸Œæœ›å¤„ç†çš„ Stripe webhook çš„ã€Œé©¼å³°ã€åç§°ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæ‚¨å¸Œæœ›å¤„ç† <code>invoice.payment_succeeded</code> webhook ï¼Œä½ åº”è¯¥æ·»åŠ ä¸€ä¸ª <code>handleInvoicePaymentSucceeded</code> æ–¹æ³•åˆ°æ§åˆ¶å™¨ï¼š</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;?php</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">namespace App\Http\Controllers;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">use Laravel\Cashier\Http\Controllers\WebhookController as CashierController;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class WebhookController extends CashierController</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * Handle a Stripe webhook.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     *</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * @param  array  $payload</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * @return Response</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public function handleInvoicePaymentSucceeded($payload)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // å¤„ç†äº‹ä»¶</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="è®¢é˜…å¤±è´¥">è®¢é˜…å¤±è´¥<a class="hash-link" href="#è®¢é˜…å¤±è´¥" title="Direct link to heading">â€‹</a></h3><p>å¦‚æœå®¢æˆ·çš„ä¿¡ç”¨å¡è¿‡æœŸäº†æ€ä¹ˆåŠ?ä¸ç”¨æ‹…å¿ƒï¼ŒCashier ä¼šæœ‰ä¸€ä¸ª Webhook æ§åˆ¶å™¨ï¼Œå®ƒå¯ä»¥å¾ˆå®¹æ˜“åœ°å–æ¶ˆå®¢æˆ·çš„è®¢é˜…ã€‚å¦‚ä¸Šæ‰€è¿°ï¼Œæ‚¨æ‰€éœ€è¦åšçš„å°±æ˜¯æŒ‡å®šä¸€ä¸ªè·¯ç”±åˆ°è¯¥æ§åˆ¶å™¨ï¼š</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">Route::post(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &#x27;stripe/webhook&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &#x27;\Laravel\Cashier\Http\Controllers\WebhookController@handleWebhook&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">);</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>å°±æ˜¯è¿™æ ·ï¼å¤±è´¥çš„æ”¯ä»˜å°†è¢«æ§åˆ¶å™¨æ•è·å’Œå¤„ç†ã€‚å½“ Stripe åˆ¤æ–­è®¢é˜…å¤±è´¥æ—¶ï¼Œæ§åˆ¶å™¨å°†å–æ¶ˆå®¢æˆ·çš„è®¢é˜…(é€šå¸¸æ˜¯åœ¨ä¸‰æ¬¡å¤±è´¥çš„ä»˜æ¬¾å°è¯•ä¹‹å)ã€‚</p><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="å¤„ç†-braintree-webhooks">å¤„ç† Braintree Webhooks<a class="hash-link" href="#å¤„ç†-braintree-webhooks" title="Direct link to heading">â€‹</a></h2><p>Stripe å’Œ Braintree éƒ½å¯ä»¥é€šè¿‡ webhooks é€šçŸ¥ä½ çš„åº”ç”¨ç¨‹åºã€‚è¦å¤„ç† Braintree webhook ï¼Œå¯ä»¥å®šä¹‰ä¸€ä¸ªè·¯ç”±æŒ‡å‘ Cashier çš„ webhook æ§åˆ¶å™¨ã€‚è¯¥æ§åˆ¶å™¨å°†å¤„ç†æ‰€æœ‰ä¼ å…¥çš„ webhook è¯·æ±‚ï¼Œå¹¶å°†å®ƒä»¬å‘é€åˆ°é€‚å½“çš„æ§åˆ¶å™¨æ–¹æ³•ï¼š</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">Route::post(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &#x27;braintree/webhook&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &#x27;\Laravel\Cashier\Http\Controllers\WebhookController@handleWebhook&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">);</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><blockquote><p>{note} ä¸€æ—¦ä½ æ³¨å†Œäº†ä½ çš„è·¯ç”±ä¹‹åï¼Œä¸€å®šè¦åœ¨ä½ çš„ Braintree æ§åˆ¶é¢æ¿è®¾ç½®ä¸­é…ç½®webhook URLã€‚</p></blockquote><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œè¯¥æ§åˆ¶å™¨å°†è‡ªåŠ¨å¤„ç†åœ¨å¤šæ¬¡å¤±è´¥çš„æ”¯ä»˜å°è¯•åè‡ªåŠ¨å–æ¶ˆè¯¥è®¢é˜…(æ ¹æ®æ‚¨çš„ Braintree è®¾ç½®æ‰€å®šä¹‰);ä½†æ˜¯ï¼Œæˆ‘ä»¬å¾ˆå¿«å°±ä¼šå‘ç°ï¼Œæ‚¨å¯ä»¥æ‰©å±•è¿™ä¸ªæ§åˆ¶å™¨æ¥å¤„ç†ä»»ä½•æ‚¨å–œæ¬¢çš„ webhook äº‹ä»¶ã€‚</p><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="webhooks--csrf-ä¿æŠ¤-1">Webhooks &amp; CSRF ä¿æŠ¤<a class="hash-link" href="#webhooks--csrf-ä¿æŠ¤-1" title="Direct link to heading">â€‹</a></h4><p>å› ä¸º Braintree webhooks éœ€è¦ç»•è¿‡ Laravel çš„ <a href="/docs/laravel/csrf">CSRF ä¿æŠ¤</a>ï¼Œæ‰€ä»¥ä¸€å®šè¦åœ¨ <code>VerifyCsrfToken</code> ä¸­é—´ä»¶ä¸­åˆ—å‡ºè¿™ä¸ª URI ï¼Œæˆ–è€…åˆ—å‡º <code>web</code> ä¸­é—´ä»¶ç»„ä¹‹å¤–çš„è·¯ç”±:</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">protected $except = [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &#x27;braintree/*&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">];</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="å®šä¹‰-webhook-äº‹ä»¶å¤„ç†ç¨‹åº-1">å®šä¹‰ Webhook äº‹ä»¶å¤„ç†ç¨‹åº<a class="hash-link" href="#å®šä¹‰-webhook-äº‹ä»¶å¤„ç†ç¨‹åº-1" title="Direct link to heading">â€‹</a></h3><p>Cashier å¯¹äºå¤±è´¥çš„æ”¯ä»˜è‡ªåŠ¨è¿›è¡Œå–æ¶ˆè®¢é˜…çš„å¤„ç†ï¼Œä½†æ˜¯å¦‚æœä½ æƒ³å¯¹ Braintree webhook äº‹ä»¶è¿›è¡Œé¢å¤–çš„å¤„ç†ï¼Œå¯ä»¥ç®€å•çš„æ‰©å±•ä¸€ä¸‹ Webhook æ§åˆ¶å™¨ã€‚ä½ çš„æ–¹æ³•åç§°åº”è¯¥ä¸ Cashier çš„é¢„è®¾æƒ¯ä¾‹ä¸€ç›´ï¼Œç‰¹åˆ«çš„æ˜¯ï¼Œæ–¹æ³•ååº”è¯¥ä»¥ <code>handle</code> ä¸ºå‰ç¼€ï¼Œç„¶åä»¥ ã€Œé©¼å³°ã€å‘½åçš„æ–¹å¼åŠ ä¸Šä½ è¦å¤„ç†çš„ Braintree webhook çš„åç§°ã€‚æ¯”å¦‚ï¼Œå¦‚æœä½ å¸Œæœ›å»å¤„ç† <code>dispute_opened</code> webhook, ä½ åº”è¯¥æ·»åŠ ä¸€ä¸ª <code>handleDisputeOpened</code> æ–¹æ³•åˆ°æ§åˆ¶å™¨ï¼š</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;?php</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">namespace App\Http\Controllers;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">use Braintree\WebhookNotification;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">use Laravel\Cashier\Http\Controllers\WebhookController as CashierController;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class WebhookController extends CashierController</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * Handle a Braintree webhook.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     *</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * @param  WebhookNotification  $webhook</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * @return Response</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public function handleDisputeOpened(WebhookNotification $notification)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Handle The Event</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="è®¢é˜…å¤±è´¥-1">è®¢é˜…å¤±è´¥<a class="hash-link" href="#è®¢é˜…å¤±è´¥-1" title="Direct link to heading">â€‹</a></h3><p>å¦‚æœå®¢æˆ·çš„ä¿¡ç”¨å¡è¿‡æœŸäº†æ€ä¹ˆåŠ?ä¸ç”¨æ‹…å¿ƒï¼ŒCashier ä¼šæœ‰ä¸€ä¸ª Webhook æ§åˆ¶å™¨ï¼Œå®ƒå¯ä»¥å¾ˆå®¹æ˜“åœ°å–æ¶ˆå®¢æˆ·çš„è®¢é˜…ã€‚å¦‚ä¸Šæ‰€è¿°ï¼Œæ‚¨æ‰€éœ€è¦åšçš„å°±æ˜¯æŒ‡å®šä¸€ä¸ªè·¯ç”±åˆ°è¯¥æ§åˆ¶å™¨ï¼š</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">Route::post(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &#x27;braintree/webhook&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &#x27;\Laravel\Cashier\Http\Controllers\WebhookController@handleWebhook&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">);</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>å°±æ˜¯è¿™æ ·ï¼å¤±è´¥çš„æ”¯ä»˜å°†è¢«æ§åˆ¶å™¨æ•è·å’Œå¤„ç†ã€‚å½“ Braintree åˆ¤æ–­è®¢é˜…å¤±è´¥æ—¶ï¼Œæ§åˆ¶å™¨å°†å–æ¶ˆå®¢æˆ·çš„è®¢é˜…(é€šå¸¸æ˜¯åœ¨ä¸‰æ¬¡å¤±è´¥çš„ä»˜æ¬¾å°è¯•ä¹‹å)ã€‚</p><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="ä¸€æ¬¡æ€§æ”¶è´¹">ä¸€æ¬¡æ€§æ”¶è´¹<a class="hash-link" href="#ä¸€æ¬¡æ€§æ”¶è´¹" title="Direct link to heading">â€‹</a></h2><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="å•æ¬¡ä»˜è´¹">å•æ¬¡ä»˜è´¹<a class="hash-link" href="#å•æ¬¡ä»˜è´¹" title="Direct link to heading">â€‹</a></h3><blockquote><p>{note} å½“ä½¿ç”¨ Stripe æ—¶ï¼Œ<code>charge</code> æ–¹æ³•ä¼šæ¥å—ä½ æƒ³è¦åœ¨ <strong>åº”ç”¨ç¨‹åºä½¿ç”¨çš„è´§å¸çš„æœ€å°é¢å€¼</strong> ä¸­æ”¶å–çš„é‡‘é¢ã€‚ç„¶è€Œï¼Œå½“ä½¿ç”¨ Braintree æ—¶ï¼Œæ‚¨åº”è¯¥å°†å…¨éƒ¨çš„ç¾å…ƒé‡‘é¢ä¼ é€’ç»™ <code>charge</code> æ–¹æ³•ï¼š</p></blockquote><p>å¦‚æœæ‚¨æƒ³è¦å¯¹è®¢é˜…çš„å®¢æˆ·çš„ä¿¡ç”¨å¡è¿›è¡Œã€Œä¸€æ¬¡ã€çš„æ”¶è´¹ï¼Œé‚£ä¹ˆæ‚¨å¯ä»¥åœ¨ä¸€ä¸ª billable æ¨¡å‹å®ä¾‹ä¸Šä½¿ç”¨ <code>charge</code> æ–¹æ³•ã€‚</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">// Stripe Accepts Charges In Cents...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$user-&gt;charge(100);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Braintree Accepts Charges In Dollars...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$user-&gt;charge(1);</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p><code>charge</code> æ–¹æ³•æ¥å—ä¸€ä¸ªæ•°ç»„ä½œä¸ºå®ƒçš„ç¬¬äºŒä¸ªå‚æ•°ï¼Œå…è®¸æ‚¨å°†ä»»ä½•æ‚¨å¸Œæœ›çš„é€‰é¡¹ä¼ é€’ç»™åº•å±‚çš„ Stripe / Braintree è´¹ç”¨åˆ›å»ºã€‚åœ¨åˆ›å»ºæ”¶è´¹æ—¶ï¼Œè¯·å‚è€ƒ Stripe æˆ– Braintree æ–‡æ¡£ï¼Œäº†è§£æ‚¨å¯ä»¥é€‰æ‹©çš„é€‰é¡¹ï¼š</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">$user-&gt;charge(100, [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &#x27;custom_option&#x27; =&gt; $value,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">]);</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>å½“æ”¯ä»˜ç»“ç®—å¤±è´¥æ˜¯ <code>charge</code> æ–¹æ³•ä¼šæŠ›å‡ºä¸€ä¸ªå¼‚å¸¸ã€‚å¦‚æœç»“ç®—æˆåŠŸï¼Œä¼šè¿”å›å®Œæˆçš„ Stripe / Braintree å“åº”ï¼š</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">try {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    $response = $user-&gt;charge(100);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">} catch (Exception $e) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="è´¹ç”¨ä¸å‘ç¥¨">è´¹ç”¨ä¸å‘ç¥¨<a class="hash-link" href="#è´¹ç”¨ä¸å‘ç¥¨" title="Direct link to heading">â€‹</a></h3><p>æœ‰æ—¶å€™ä½ åªæ˜¯éœ€è¦å®Œæˆä¸€ä¸ªä¸€æ¬¡æ€§çš„æ”¯ä»˜ï¼Œä½†ä¹Ÿè¦ä¸ºæ”¶è´¹ç”Ÿæˆä¸€å¼ å‘ç¥¨ä¿¡æ¯ï¼Œè¿™æ ·ä½ å¯ä»¥æä¾› PDF çš„ç¥¨æ®ç»™ä½ çš„å®¢æˆ·ã€‚<code>invoiceFor</code> æ–¹æ³•å°±æ˜¯åšè¿™ä¸ªçš„ã€‚ä¾‹å¦‚ï¼Œè®©æˆ‘ä»¬ç»™å®¢æˆ·å¼€å…·ä¸€ä¸ª $5.00 çš„ã€Œä¸€æ¬¡æ€§è´¹ç”¨ã€å‘ç¥¨ï¼š</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">// Stripe ä»¥ç¾åˆ†ç»“ç®—...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$user-&gt;invoiceFor(&#x27;One Time Fee&#x27;, 500);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Braintree ä»¥ç¾å…ƒç»“ç®—...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$user-&gt;invoiceFor(&#x27;One Time Fee&#x27;, 5);</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>ç”Ÿæˆå‘ç¥¨å°†ç«‹å³å¯¹ç”¨æˆ·çš„ä¿¡ç”¨å¡æ”¶å–è´¹ç”¨ã€‚invoiceFor æ–¹æ³•å¯ä»¥æ¥å—ä¸€ä¸ªæ•°æ®ä½œä¸ºç¬¬ä¸‰ä¸ªå‚æ•°ï¼Œå…è®¸ä½ åœ¨ Stripe / Braintree ç»“ç®—æ—¶ä¼ é€’ä»»ä½•å¯ç”¨çš„å‚æ•°ï¼š</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">$user-&gt;invoiceFor(&#x27;One Time Fee&#x27;, 500, [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &#x27;custom-option&#x27; =&gt; $value,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">]);</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><blockquote><p>{note} <code>invoiceFor</code>  æ–¹æ³•åœ¨å½“å¤šæ¬¡å°è¯•å¤±è´¥æ”¯ä»˜åä¹Ÿä¼šäº§ç”Ÿä¸€ä¸ª Stripe å‘ç¥¨ã€‚å¦‚æœä½ ä¸éœ€è¦ä¸ºå¤±è´¥é‡è¯•çš„æ”¯ä»˜ç”Ÿæˆå‘ç¥¨ï¼Œä½ éœ€è¦åœ¨ç¬¬ä¸€æ¬¡å¤±è´¥ç»“ç®—æ˜¯å°±è°ƒç”¨ Stripe çš„ API å…³é—­å®ƒä»¬ã€‚</p></blockquote><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="å‘ç¥¨">å‘ç¥¨<a class="hash-link" href="#å‘ç¥¨" title="Direct link to heading">â€‹</a></h2><p>ä½ å¯ä»¥ä½¿ç”¨ <code>invoices</code> æ–¹æ³•è½»æ¾è·å– billable æ¨¡å‹çš„æ‰€æœ‰å‘ç¥¨ä¿¡æ¯ï¼š</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">$invoices = $user-&gt;invoices();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Include pending invoices in the results...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$invoices = $user-&gt;invoicesIncludingPending();</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>å½“å°†å‘ç¥¨ä¿¡æ¯åˆ—å‡ºæ¥ç»™ç”¨æˆ·æ—¶ï¼Œä½ å¯èƒ½éœ€è¦ä½¿ç”¨å‘ç¥¨çš„è¾…åŠ©å‡½æ•°æ¥æ˜¾ç¤ºç›¸å…³çš„å‘ç¥¨ä¿¡æ¯ã€‚ä¾‹å¦‚ï¼Œä½ å¯èƒ½å¸Œæœ›å°†å‘ç¥¨åˆ—è¡¨ä»¥è¡¨æ ¼çš„å½¢å¼æ˜¾ç¤ºï¼Œå…è®¸ç”¨æˆ·è½»æ¾çš„ä¸‹è½½å®ƒä»¬ï¼š</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;table&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @foreach ($invoices as $invoice)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;tr&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;td&gt;{{ $invoice-&gt;date()-&gt;toFormattedDateString() }}&lt;/td&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;td&gt;{{ $invoice-&gt;total() }}&lt;/td&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;td&gt;&lt;a href=&quot;/user/invoice/{{ $invoice-&gt;id }}&quot;&gt;Download&lt;/a&gt;&lt;/td&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;/tr&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @endforeach</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/table&gt;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="ç”Ÿæˆå‘ç¥¨çš„-pdfs">ç”Ÿæˆå‘ç¥¨çš„ PDFs<a class="hash-link" href="#ç”Ÿæˆå‘ç¥¨çš„-pdfs" title="Direct link to heading">â€‹</a></h3><p>ä»è·¯ç”±æˆ–æ§åˆ¶å™¨ä¸­ï¼Œä½¿ç”¨ <code>downloadInvoice</code> æ–¹æ³•ç”Ÿæˆå‘ç¥¨çš„ PDF ä¸‹è½½ã€‚è¯¥æ–¹æ³•å°†è‡ªåŠ¨ç”Ÿæˆé€‚å½“çš„ HTTP å“åº”ï¼Œå°†ä¸‹è½½å‘é€åˆ°æµè§ˆå™¨:</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">use Illuminate\Http\Request;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Route::get(&#x27;user/invoice/{invoice}&#x27;, function (Request $request, $invoiceId) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return $request-&gt;user()-&gt;downloadInvoice($invoiceId, [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &#x27;vendor&#x27;  =&gt; &#x27;Your Company&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &#x27;product&#x27; =&gt; &#x27;Your Product&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ]);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">});</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="è¯‘è€…ç½²å">è¯‘è€…ç½²å<a class="hash-link" href="#è¯‘è€…ç½²å" title="Direct link to heading">â€‹</a></h2><table><thead><tr><th>ç”¨æˆ·å</th><th>å¤´åƒ</th><th>èŒèƒ½</th><th>ç­¾å</th></tr></thead><tbody><tr><td><a href="https://laravel-china.org/users/15752" target="_blank" rel="noopener noreferrer">@å­¤é›ªé£˜å¯’</a></td><td><img loading="lazy" class="avatar-66 rm-style" src="https://dn-phphub.qbox.me/uploads/avatars/15752_1493141445.jpeg" class="img_E7b_"></td><td>ç¿»è¯‘</td><td>å…¨æ¡Ÿå·¥ç¨‹å¸ˆï¼Œ<a href="https://github.com/piaohan" target="_blank" rel="noopener noreferrer">Github</a>ï¼Œ<a href="http://blog.csdn.net/msmile_my" target="_blank" rel="noopener noreferrer">CSDN</a></td></tr></tbody></table><hr><blockquote><p>{note} æ¬¢è¿ä»»ä½•å½¢å¼çš„è½¬è½½ï¼Œä½†è¯·åŠ¡å¿…æ³¨æ˜å‡ºå¤„ï¼Œå°Šé‡ä»–äººåŠ³åŠ¨å…±åˆ›å¼€æºç¤¾åŒºã€‚</p><p>è½¬è½½è¯·æ³¨æ˜ï¼šæœ¬æ–‡æ¡£ç”± Laravel China ç¤¾åŒº <a href="https://laravel-china.org" target="_blank" rel="noopener noreferrer">laravel-china.org</a> ç»„ç»‡ç¿»è¯‘ï¼Œè¯¦è§ <a href="https://laravel-china.org/topics/5756/laravel-55-document-translation-call-come-and-join-the-translation" target="_blank" rel="noopener noreferrer">ç¿»è¯‘å¬é›†å¸–</a>ã€‚</p><p>æ–‡æ¡£æ°¸ä¹…åœ°å€ï¼š <a href="https://d.laravel-china.org" target="_blank" rel="noopener noreferrer">https://d.laravel-china.org</a></p></blockquote></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/laravel/authorization"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">authorization</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/laravel/blade"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">blade</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_cNA8 thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#ç®€ä»‹" class="table-of-contents__link toc-highlight">ç®€ä»‹</a></li><li><a href="#é…ç½®" class="table-of-contents__link toc-highlight">é…ç½®</a><ul><li><a href="#stripe" class="table-of-contents__link toc-highlight">Stripe</a></li><li><a href="#braintree" class="table-of-contents__link toc-highlight">Braintree</a></li><li><a href="#è´§å¸é…ç½®" class="table-of-contents__link toc-highlight">è´§å¸é…ç½®</a></li></ul></li><li><a href="#è®¢é˜…" class="table-of-contents__link toc-highlight">è®¢é˜…</a><ul><li><a href="#åˆ›å»ºè®¢é˜…" class="table-of-contents__link toc-highlight">åˆ›å»ºè®¢é˜…</a></li><li><a href="#æ£€æŸ¥è®¢é˜…çŠ¶æ€" class="table-of-contents__link toc-highlight">æ£€æŸ¥è®¢é˜…çŠ¶æ€</a></li><li><a href="#ä¿®æ”¹è®¢é˜…è®¡åˆ’" class="table-of-contents__link toc-highlight">ä¿®æ”¹è®¢é˜…è®¡åˆ’</a></li><li><a href="#è®¢é˜…é‡" class="table-of-contents__link toc-highlight">è®¢é˜…é‡</a></li><li><a href="#è®¢é˜…ç¨é¢" class="table-of-contents__link toc-highlight">è®¢é˜…ç¨é¢</a></li><li><a href="#å–æ¶ˆè®¢é˜…" class="table-of-contents__link toc-highlight">å–æ¶ˆè®¢é˜…</a></li><li><a href="#æ¢å¤è®¢é˜…" class="table-of-contents__link toc-highlight">æ¢å¤è®¢é˜…</a></li><li><a href="#æ›´æ–°ä¿¡ç”¨å¡ä¿¡æ¯" class="table-of-contents__link toc-highlight">æ›´æ–°ä¿¡ç”¨å¡ä¿¡æ¯</a></li></ul></li><li><a href="#è¯•ç”¨è®¢é˜…" class="table-of-contents__link toc-highlight">è¯•ç”¨è®¢é˜…</a><ul><li><a href="#æœ‰ä¿¡ç”¨å¡çš„æƒ…å†µä¸‹" class="table-of-contents__link toc-highlight">æœ‰ä¿¡ç”¨å¡çš„æƒ…å†µä¸‹</a></li><li><a href="#æ²¡æœ‰ä¿¡ç”¨å¡çš„æƒ…å†µä¸‹" class="table-of-contents__link toc-highlight">æ²¡æœ‰ä¿¡ç”¨å¡çš„æƒ…å†µä¸‹</a></li></ul></li><li><a href="#å¤„ç†-stripe-webhooks" class="table-of-contents__link toc-highlight">å¤„ç† Stripe Webhooks</a><ul><li><a href="#å®šä¹‰-webhook-äº‹ä»¶å¤„ç†ç¨‹åº" class="table-of-contents__link toc-highlight">å®šä¹‰ Webhook äº‹ä»¶å¤„ç†ç¨‹åº</a></li><li><a href="#è®¢é˜…å¤±è´¥" class="table-of-contents__link toc-highlight">è®¢é˜…å¤±è´¥</a></li></ul></li><li><a href="#å¤„ç†-braintree-webhooks" class="table-of-contents__link toc-highlight">å¤„ç† Braintree Webhooks</a><ul><li><a href="#å®šä¹‰-webhook-äº‹ä»¶å¤„ç†ç¨‹åº-1" class="table-of-contents__link toc-highlight">å®šä¹‰ Webhook äº‹ä»¶å¤„ç†ç¨‹åº</a></li><li><a href="#è®¢é˜…å¤±è´¥-1" class="table-of-contents__link toc-highlight">è®¢é˜…å¤±è´¥</a></li></ul></li><li><a href="#ä¸€æ¬¡æ€§æ”¶è´¹" class="table-of-contents__link toc-highlight">ä¸€æ¬¡æ€§æ”¶è´¹</a><ul><li><a href="#å•æ¬¡ä»˜è´¹" class="table-of-contents__link toc-highlight">å•æ¬¡ä»˜è´¹</a></li><li><a href="#è´¹ç”¨ä¸å‘ç¥¨" class="table-of-contents__link toc-highlight">è´¹ç”¨ä¸å‘ç¥¨</a></li></ul></li><li><a href="#å‘ç¥¨" class="table-of-contents__link toc-highlight">å‘ç¥¨</a><ul><li><a href="#ç”Ÿæˆå‘ç¥¨çš„-pdfs" class="table-of-contents__link toc-highlight">ç”Ÿæˆå‘ç¥¨çš„ PDFs</a></li></ul></li><li><a href="#è¯‘è€…ç½²å" class="table-of-contents__link toc-highlight">è¯‘è€…ç½²å</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/intro">Tutorial</a></li></ul></div><div class="col footer__col"><div class="footer__title">Frameworks</div><ul class="footer__items"><li class="footer__item"><a href="https://vuejs.org/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Vue<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://reactjs.org/" target="_blank" rel="noopener noreferrer" class="footer__link-item">React<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://svelte.dev/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Svelte<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/bornkiss/dinosaur" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2022 Bornkiss, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.57d802bb.js"></script>
<script src="/assets/js/main.903e1189.js"></script>
</body>
</html>