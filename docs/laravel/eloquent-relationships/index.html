<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-laravel/eloquent-relationships">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.18">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Bornkiss RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Bornkiss Atom Feed">
<link rel="search" type="application/opensearchdescription+xml" title="Bornkiss" href="/opensearch.xml">
<link rel="icon" href="/img/docusaurus.png">
<meta name="theme-color" content="rgb(37, 194, 160)">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#000">
<link rel="apple-touch-icon" href="/img/docusaurus.png">
<link rel="mask-icon" href="/img/docusaurus.svg" color="rgb(37, 194, 160)">
<meta name="msapplication-TileImage" content="/img/docusaurus.png">
<meta name="msapplication-TileColor" content="#000"><title data-rh="true">eloquent-relationships | Bornkiss</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://docs.bornkiss.com/docs/laravel/eloquent-relationships"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="eloquent-relationships | Bornkiss"><meta data-rh="true" name="description" content="ç®€ä»‹"><meta data-rh="true" property="og:description" content="ç®€ä»‹"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://docs.bornkiss.com/docs/laravel/eloquent-relationships"><link data-rh="true" rel="alternate" href="https://docs.bornkiss.com/docs/laravel/eloquent-relationships" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.bornkiss.com/docs/laravel/eloquent-relationships" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://3KT7AR3BLL-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.772e1c6d.css">
<link rel="preload" href="/assets/js/runtime~main.57d802bb.js" as="script">
<link rel="preload" href="/assets/js/main.903e1189.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_ZgBM">Skip to main content</a></div><nav class="navbar navbar--fixed-top navbarHideable_ObN2"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/bornkiss/logo-light.png" alt="My Site Logo" class="themedImage_W2Cr themedImage--light_TfLj"><img src="/img/bornkiss/logo-dark.png" alt="My Site Logo" class="themedImage_W2Cr themedImage--dark_oUvU"></div></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link navbar__link--active" href="/docs/intro">Docs</a><a class="navbar__item navbar__link" href="/blog">Blog</a><a href="https://github.com/bornkiss/dinosaur" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="toggle_S7eR colorModeToggle_vKtC"><button class="clean-btn toggleButton_rCf9 toggleButtonDisabled_Pu9x" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_v35p"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_nQuB"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_qEbK"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper"><div class="docPage_P2Lg"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_RiI4" type="button"></button><aside class="theme-doc-sidebar-container docSidebarContainer_rKC_"><div class="sidebar_RiAD sidebarWithHideableNavbar_d0QC"><a tabindex="-1" class="sidebarLogo_YUvz" href="/"><img src="/img/bornkiss/logo-light.png" alt="My Site Logo" class="themedImage_W2Cr themedImage--light_TfLj"><img src="/img/bornkiss/logo-dark.png" alt="My Site Logo" class="themedImage_W2Cr themedImage--dark_oUvU"></a><nav class="menu thin-scrollbar menu_izAj"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/intro">intro</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/docs/laravel/about">Laravel</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/laravel/about">about</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/laravel/artisan">artisan</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/laravel/authentication">authentication</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/laravel/authorization">authorization</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/laravel/billing">billing</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/laravel/blade">blade</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/laravel/broadcasting">broadcasting</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/laravel/cache">cache</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/laravel/collections">collections</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/laravel/configuration">configuration</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/laravel/container">container</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/laravel/contracts">contracts</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/laravel/contributing">contributing</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/laravel/contributions">contributions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/laravel/controllers">controllers</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/laravel/csrf">csrf</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/laravel/database-testing">database-testing</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/laravel/database">database</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/laravel/deployment">deployment</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/laravel/dusk">dusk</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/laravel/eloquent-collections">eloquent-collections</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/laravel/eloquent-mutators">eloquent-mutators</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/laravel/eloquent-relationships">eloquent-relationships</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/laravel/eloquent-resources">eloquent-resources</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/laravel/eloquent-serialization">eloquent-serialization</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/laravel/eloquent">eloquent</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/laravel/encryption">encryption</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/laravel/envoy">envoy</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/laravel/errors">errors</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/laravel/events">events</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/laravel/facades">facades</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/laravel/filesystem">filesystem</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/laravel/frontend">frontend</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/laravel/hashing">hashing</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/laravel/helpers">helpers</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/laravel/homestead">homestead</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/laravel/horizon">horizon</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/laravel/http-tests">http-tests</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/laravel/lifecycle">lifecycle</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/laravel/localization">localization</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/laravel/mail">mail</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/laravel/middleware">middleware</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/laravel/migrations">migrations</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/laravel/mix">mix</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/laravel/mocking">mocking</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/laravel/packages">packages</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/laravel/pagination">pagination</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/laravel/passport">passport</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/laravel/passwords">passwords</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/laravel/providers">providers</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/laravel/queries">queries</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/laravel/queues">queues</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/laravel/redirects">redirects</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/laravel/redis">redis</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/laravel/releases">releases</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/laravel/requests">requests</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/laravel/responses">responses</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/laravel/routing">routing</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/laravel/scheduling">scheduling</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/laravel/scout">scout</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/laravel/seeding">seeding</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/laravel/session">session</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/laravel/socialite">socialite</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/laravel/structure">structure</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/laravel/testing">testing</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/laravel/upgrade">upgrade</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/laravel/urls">urls</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/laravel/valet">valet</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/laravel/validation">validation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/laravel/views">views</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/select/guide/install">Select</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/xv6/preface">XV6</a></div></li></ul></nav></div></aside><main class="docMainContainer_TCnq"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_DM6M"><div class="docItemContainer_vinB"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Xlws" aria-label="breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/">ğŸ </a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><span class="breadcrumbs__link" itemprop="item name">Laravel</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="item name">eloquent-relationships</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_jdIR theme-doc-toc-mobile tocMobile_TmEX"><button type="button" class="clean-btn tocCollapsibleButton_Fzxq">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>eloquent-relationships</h1></header><h1>Eloquentï¼šå…³è”</h1><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="ç®€ä»‹">ç®€ä»‹<a class="hash-link" href="#ç®€ä»‹" title="Direct link to heading">â€‹</a></h2><p>æ•°æ®åº“è¡¨é€šå¸¸ç›¸äº’å…³è”ã€‚ ä¾‹å¦‚ï¼Œä¸€ç¯‡åšå®¢æ–‡ç« å¯èƒ½æœ‰è®¸å¤šè¯„è®ºï¼Œæˆ–è€…ä¸€ä¸ªè®¢å•å¯¹åº”ä¸€ä¸ªä¸‹å•ç”¨æˆ·ã€‚Eloquent è®©è¿™äº›å…³è”çš„ç®¡ç†å’Œä½¿ç”¨å˜å¾—ç®€å•ï¼Œå¹¶æ”¯æŒå¤šç§ç±»å‹çš„å…³è”ï¼š</p><ul><li><a href="#one-to-one">ä¸€å¯¹ä¸€</a></li><li><a href="#one-to-many">ä¸€å¯¹å¤š</a></li><li><a href="#many-to-many">å¤šå¯¹å¤š</a></li><li><a href="#has-many-through">è¿œå±‚ä¸€å¯¹å¤š</a></li><li><a href="#polymorphic-relations">å¤šæ€å…³è”</a></li><li><a href="#many-to-many-polymorphic-relations">å¤šå¯¹å¤šå¤šæ€å…³è”</a></li></ul><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="å®šä¹‰å…³è”">å®šä¹‰å…³è”<a class="hash-link" href="#å®šä¹‰å…³è”" title="Direct link to heading">â€‹</a></h2><p>Eloquent å…³è”åœ¨ Eloquent æ¨¡å‹ç±»ä¸­ä»¥æ–¹æ³•çš„å½¢å¼å‘ˆç°ã€‚å¦‚åŒ Eloquent æ¨¡å‹æœ¬èº«ï¼Œå…³è”ä¹Ÿå¯ä»¥ä½œä¸ºå¼ºå¤§çš„ <a href="/docs/laravel/queries">æŸ¥è¯¢è¯­å¥æ„é€ å™¨</a> ä½¿ç”¨ï¼Œæä¾›äº†å¼ºå¤§çš„é“¾å¼è°ƒç”¨å’ŒæŸ¥è¯¢åŠŸèƒ½ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ <code>posts</code> å…³è”çš„é“¾å¼è°ƒç”¨ä¸­é™„åŠ ä¸€ä¸ªçº¦æŸæ¡ä»¶ï¼š</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">$user-&gt;posts()-&gt;where(&#x27;active&#x27;, 1)-&gt;get();</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>ä¸è¿‡ï¼Œåœ¨æ·±å…¥ä½¿ç”¨å…³è”ä¹‹å‰ï¼Œè®©æˆ‘ä»¬å…ˆå­¦ä¹ å¦‚ä½•å®šä¹‰æ¯ç§å…³è”ç±»å‹ã€‚</p><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="ä¸€å¯¹ä¸€">ä¸€å¯¹ä¸€<a class="hash-link" href="#ä¸€å¯¹ä¸€" title="Direct link to heading">â€‹</a></h3><p>ä¸€å¯¹ä¸€å…³è”æ˜¯æœ€åŸºæœ¬çš„å…³è”å…³ç³»ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ª <code>User</code> æ¨¡å‹å¯èƒ½å…³è”ä¸€ä¸ª <code>Phone</code> æ¨¡å‹ã€‚ä¸ºäº†å®šä¹‰è¿™ä¸ªå…³è”ï¼Œæˆ‘ä»¬è¦åœ¨ <code>User</code> æ¨¡å‹ä¸­å†™ä¸€ä¸ª <code>phone</code> æ–¹æ³•ï¼Œåœ¨<code>phone</code> æ–¹æ³•å†…éƒ¨è°ƒç”¨ <code>hasOne</code> æ–¹æ³•å¹¶è¿”å›å…¶ç»“æœï¼š</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;?php</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">namespace App;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">use Illuminate\Database\Eloquent\Model;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class User extends Model</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * è·å¾—ä¸ç”¨æˆ·å…³è”çš„ç”µè¯è®°å½•ã€‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public function phone()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return $this-&gt;hasOne(&#x27;App\Phone&#x27;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p><code>hasOne</code> æ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å…³è”æ¨¡å‹çš„ç±»åã€‚å…³è”å…³ç³»å®šä¹‰å¥½åï¼Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨ Eloquent åŠ¨æ€å±æ€§è·å¾—ç›¸å…³çš„è®°å½•ã€‚æ‚¨å¯ä»¥åƒåœ¨è®¿é—®æ¨¡å‹ä¸­å®šä¹‰çš„å±æ€§ä¸€æ ·ï¼Œä½¿ç”¨åŠ¨æ€å±æ€§ï¼š</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">$phone = User::find(1)-&gt;phone;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>Eloquent ä¼šåŸºäºæ¨¡å‹åå†³å®šå¤–é”®åç§°ã€‚åœ¨å½“å‰åœºæ™¯ä¸­ï¼ŒEloquent å‡è®¾ <code>Phone</code> æ¨¡å‹æœ‰ä¸€ä¸ª <code>user_id</code> å¤–é”®ï¼Œå¦‚æœå¤–é”®åä¸æ˜¯è¿™ä¸ªï¼Œå¯ä»¥é€šè¿‡ç»™ <code>hasOne</code> æ–¹æ³•ä¼ é€’ç¬¬äºŒä¸ªå‚æ•°è¦†ç›–é»˜è®¤ä½¿ç”¨çš„å¤–é”®åï¼š </p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">return $this-&gt;hasOne(&#x27;App\Phone&#x27;, &#x27;foreign_key&#x27;);</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>æ­¤å¤–ï¼ŒEloquent å‡å®šå¤–é”®å€¼æ˜¯ä¸çˆ¶çº§ <code>id</code>ï¼ˆæˆ–è‡ªå®šä¹‰ <code>$primaryKey</code>ï¼‰åˆ—çš„å€¼ç›¸åŒ¹é…çš„ã€‚ æ¢å¥è¯è¯´ï¼ŒEloquent å°†åœ¨ <code>Phone</code> è®°å½•çš„ <code>user_id</code> åˆ—ä¸­æŸ¥æ‰¾ä¸ç”¨æˆ·è¡¨çš„ <code>id</code> åˆ—ç›¸åŒ¹é…çš„å€¼ã€‚ å¦‚æœæ‚¨å¸Œæœ›è¯¥å…³è”ä½¿ç”¨ <code>id</code>ä»¥å¤–çš„è‡ªå®šä¹‰é”®åï¼Œåˆ™å¯ä»¥ç»™ <code>hasOne</code> æ–¹æ³•ä¼ é€’ç¬¬ä¸‰ä¸ªå‚æ•°ï¼š</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">return $this-&gt;hasOne(&#x27;App\Phone&#x27;, &#x27;foreign_key&#x27;, &#x27;local_key&#x27;);</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="å®šä¹‰åå‘å…³è”">å®šä¹‰åå‘å…³è”<a class="hash-link" href="#å®šä¹‰åå‘å…³è”" title="Direct link to heading">â€‹</a></h4><p>æˆ‘ä»¬å·²ç»èƒ½ä» <code>User</code> æ¨¡å‹è®¿é—®åˆ° <code>Phone</code> æ¨¡å‹äº†ã€‚ç°åœ¨ï¼Œå†åœ¨ <code>Phone</code> æ¨¡å‹ä¸­å®šä¹‰ä¸€ä¸ªå…³è”ï¼Œæ­¤å…³è”èƒ½è®©æˆ‘ä»¬è®¿é—®åˆ°æ‹¥æœ‰æ­¤ç”µè¯çš„ <code>User</code> æ¨¡å‹ã€‚è¿™æ—¶ï¼Œä½¿ç”¨çš„æ˜¯ä¸ <code>hasOne</code> æ–¹æ³•å¯¹åº”çš„ <code>belongsTo</code> æ–¹æ³•ï¼š</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;?php</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">namespace App;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">use Illuminate\Database\Eloquent\Model;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class Phone extends Model</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * è·å¾—æ‹¥æœ‰æ­¤ç”µè¯çš„ç”¨æˆ·ã€‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public function user()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return $this-&gt;belongsTo(&#x27;App\User&#x27;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼ŒEloquent ä¼šå°è¯•åŒ¹é… <code>Phone</code> æ¨¡å‹ä¸Šçš„ <code>user_id</code> è‡³ <code>User</code> æ¨¡å‹ä¸Šçš„ <code>id</code>ã€‚ å®ƒæ˜¯é€šè¿‡æ£€æŸ¥å…³ç³»æ–¹æ³•çš„åç§°å¹¶ä½¿ç”¨ <code>_id</code>  ä½œä¸ºåç¼€åæ¥ç¡®å®šé»˜è®¤å¤–é”®åç§°çš„ã€‚ ä½†æ˜¯ï¼Œå¦‚æœ<code>Phone</code>æ¨¡å‹çš„å¤–é”®ä¸æ˜¯<code>user_id</code>ï¼Œé‚£ä¹ˆå¯ä»¥å°†è‡ªå®šä¹‰é”®åä½œä¸ºç¬¬äºŒä¸ªå‚æ•°ä¼ é€’ç»™<code>belongsTo</code>æ–¹æ³•ï¼š</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * è·å¾—æ‹¥æœ‰æ­¤ç”µè¯çš„ç”¨æˆ·ã€‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public function user()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return $this-&gt;belongsTo(&#x27;App\User&#x27;, &#x27;foreign_key&#x27;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>å¦‚æœçˆ¶çº§æ¨¡å‹æ²¡æœ‰ä½¿ç”¨ <code>id</code> ä½œä¸ºä¸»é”®ï¼Œæˆ–è€…æ˜¯å¸Œæœ›ç”¨ä¸åŒçš„å­—æ®µæ¥è¿æ¥å­çº§æ¨¡å‹ï¼Œåˆ™å¯ä»¥é€šè¿‡ç»™ <code>belongsTo</code> æ–¹æ³•ä¼ é€’ç¬¬ä¸‰ä¸ªå‚æ•°çš„å½¢å¼æŒ‡å®šçˆ¶çº§æ•°æ®è¡¨çš„è‡ªå®šä¹‰é”®ï¼š</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * è·å¾—æ‹¥æœ‰æ­¤ç”µè¯çš„ç”¨æˆ·ã€‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public function user()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return $this-&gt;belongsTo(&#x27;App\User&#x27;, &#x27;foreign_key&#x27;, &#x27;other_key&#x27;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="é»˜è®¤æ¨¡å‹">é»˜è®¤æ¨¡å‹<a class="hash-link" href="#é»˜è®¤æ¨¡å‹" title="Direct link to heading">â€‹</a></h4><p><code>belongsTo</code> å…³è”å…è®¸å®šä¹‰é»˜è®¤æ¨¡å‹ï¼Œè¿™é€‚åº”äºå½“å…³è”ç»“æœè¿”å›çš„æ˜¯ <code>null</code> çš„æƒ…å†µã€‚è¿™ç§è®¾è®¡æ¨¡å¼é€šå¸¸ç§°ä¸º <a href="https://en.wikipedia.org/wiki/Null_Object_pattern" target="_blank" rel="noopener noreferrer">ç©ºå¯¹è±¡æ¨¡å¼</a>ï¼Œä¸ºæ‚¨å…å»äº†é¢å¤–çš„æ¡ä»¶åˆ¤æ–­ä»£ç ã€‚åœ¨ä¸‹é¢çš„ä¾‹å­ä¸­ï¼Œ<code>user</code> å…³è”å¦‚æœæ²¡æœ‰æ‰¾åˆ°æ–‡ç« çš„ä½œè€…ï¼Œå°±ä¼šè¿”å›ä¸€ä¸ªç©ºçš„ <code>App\User</code> æ¨¡å‹ã€‚</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * è·å¾—æ­¤æ–‡ç« çš„ä½œè€…ã€‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public function user()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return $this-&gt;belongsTo(&#x27;App\User&#x27;)-&gt;withDefault();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>æ‚¨ä¹Ÿå¯ä»¥é€šè¿‡ä¼ é€’æ•°ç»„æˆ–è€…ä½¿ç”¨é—­åŒ…çš„å½¢å¼ï¼Œå¡«å……é»˜è®¤æ¨¡å‹çš„å±æ€§ï¼š</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * è·å¾—æ­¤æ–‡ç« çš„ä½œè€…ã€‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public function user()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return $this-&gt;belongsTo(&#x27;App\User&#x27;)-&gt;withDefault([</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &#x27;name&#x27; =&gt; &#x27;æ¸¸å®¢&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ]);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * è·å¾—æ­¤æ–‡ç« çš„ä½œè€…ã€‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public function user()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return $this-&gt;belongsTo(&#x27;App\User&#x27;)-&gt;withDefault(function ($user) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        $user-&gt;name = &#x27;æ¸¸å®¢&#x27;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    });</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="ä¸€å¯¹å¤š">ä¸€å¯¹å¤š<a class="hash-link" href="#ä¸€å¯¹å¤š" title="Direct link to heading">â€‹</a></h3><p>ã€Œä¸€å¯¹å¤šã€å…³è”ç”¨äºå®šä¹‰å•ä¸ªæ¨¡å‹æ‹¥æœ‰ä»»æ„æ•°é‡çš„å…¶å®ƒå…³è”æ¨¡å‹ã€‚ä¾‹å¦‚ï¼Œä¸€ç¯‡åšå®¢æ–‡ç« å¯èƒ½ä¼šæœ‰æ— é™å¤šæ¡è¯„è®ºã€‚å°±åƒå…¶å®ƒçš„ Eloquent å…³è”ä¸€æ ·ï¼Œä¸€å¯¹å¤šå…³è”çš„å®šä¹‰ä¹Ÿæ˜¯åœ¨ Eloquent æ¨¡å‹ä¸­å†™ä¸€ä¸ªæ–¹æ³•ï¼š</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;?php</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">namespace App;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">use Illuminate\Database\Eloquent\Model;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class Post extends Model</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * è·å¾—æ­¤åšå®¢æ–‡ç« çš„è¯„è®ºã€‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public function comments()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return $this-&gt;hasMany(&#x27;App\Comment&#x27;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>è®°ä½ï¼ŒEloquent ä¼šè‡ªåŠ¨ç¡®å®š <code>Comment</code> æ¨¡å‹ä¸Šæ­£ç¡®çš„å¤–é”®å­—æ®µã€‚æŒ‰ç…§çº¦å®šï¼ŒEloquent ä½¿ç”¨çˆ¶çº§æ¨¡å‹åçš„ã€Œsnake caseã€å½¢å¼ã€åŠ ä¸Š <code>_id</code> åç¼€åä½œä¸ºå¤–é”®å­—æ®µã€‚å¯¹åº”åˆ°ä¸Šé¢çš„åœºæ™¯ï¼Œå°±æ˜¯ Eloquent å‡å®š <code>Comment</code> æ¨¡å‹å¯¹åº”åˆ° <code>Post</code> æ¨¡å‹ä¸Šçš„é‚£ä¸ªå¤–é”®å­—æ®µæ˜¯ <code>post_id</code>ã€‚</p><p>å…³è”å…³ç³»å®šä¹‰å¥½åï¼Œæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡è®¿é—® <code>comments</code> å±æ€§è·å¾—è¯„è®ºé›†åˆã€‚è®°ä½ï¼Œå› ä¸º Eloquent æä¾›äº†ã€ŒåŠ¨æ€å±æ€§ã€ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥åƒåœ¨è®¿é—®æ¨¡å‹ä¸­å®šä¹‰çš„å±æ€§ä¸€æ ·ï¼Œè®¿é—®å…³è”æ–¹æ³•ï¼š</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">$comments = App\Post::find(1)-&gt;comments;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">foreach ($comments as $comment) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>å½“ç„¶ï¼Œç”±äºæ‰€æœ‰çš„å…³è”è¿˜å¯ä»¥ä½œä¸ºæŸ¥è¯¢è¯­å¥æ„é€ å™¨ä½¿ç”¨ï¼Œå› æ­¤ä½ å¯ä»¥ä½¿ç”¨é“¾å¼è°ƒç”¨çš„æ–¹å¼ã€åœ¨ <code>comments</code> æ–¹æ³•ä¸Šæ·»åŠ é¢å¤–çš„çº¦æŸæ¡ä»¶ï¼š</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">$comments = App\Post::find(1)-&gt;comments()-&gt;where(&#x27;title&#x27;, &#x27;foo&#x27;)-&gt;first();</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>å½¢å¦‚ <code>hasOne</code> æ–¹æ³•ï¼Œæ‚¨ä¹Ÿå¯ä»¥åœ¨ä½¿ç”¨ <code>hasMany</code> æ–¹æ³•çš„æ—¶å€™ï¼Œé€šè¿‡ä¼ é€’é¢å¤–å‚æ•°æ¥è¦†ç›–é»˜è®¤ä½¿ç”¨çš„å¤–é”®ä¸æœ¬åœ°é”®ã€‚</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">return $this-&gt;hasMany(&#x27;App\Comment&#x27;, &#x27;foreign_key&#x27;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">return $this-&gt;hasMany(&#x27;App\Comment&#x27;, &#x27;foreign_key&#x27;, &#x27;local_key&#x27;);</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="ä¸€å¯¹å¤šåå‘">ä¸€å¯¹å¤šï¼ˆåå‘ï¼‰<a class="hash-link" href="#ä¸€å¯¹å¤šåå‘" title="Direct link to heading">â€‹</a></h3><p>ç°åœ¨ï¼Œæˆ‘ä»¬å·²ç»èƒ½è·å¾—ä¸€ç¯‡æ–‡ç« çš„æ‰€æœ‰è¯„è®ºï¼Œæ¥ç€å†å®šä¹‰ä¸€ä¸ªé€šè¿‡è¯„è®ºè·å¾—æ‰€å±æ–‡ç« çš„å…³è”ã€‚è¿™ä¸ªå…³è”æ˜¯ <code>hasMany</code> å…³è”çš„åå‘å…³è”ï¼Œåœ¨å­çº§æ¨¡å‹ä¸­ä½¿ç”¨ <code>belongsTo</code> æ–¹æ³•å®šä¹‰å®ƒï¼š</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;?php</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">namespace App;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">use Illuminate\Database\Eloquent\Model;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class Comment extends Model</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * è·å¾—æ­¤è¯„è®ºæ‰€å±çš„æ–‡ç« ã€‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public function post()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return $this-&gt;belongsTo(&#x27;App\Post&#x27;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>å…³è”å…³ç³»å®šä¹‰å¥½åï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨ <code>Comment</code> æ¨¡å‹ä¸Šä½¿ç”¨ <code>post</code> ã€ŒåŠ¨æ€å±æ€§ã€è·å¾— <code>Post</code> æ¨¡å‹äº†ã€‚</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">$comment = App\Comment::find(1);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo $comment-&gt;post-&gt;title;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼ŒEloquent ä¼šå°è¯•ç”¨ <code>Comment</code> æ¨¡å‹çš„ <code>post_id</code> ä¸ <code>Post</code> æ¨¡å‹çš„ <code>id</code> è¿›è¡ŒåŒ¹é…ã€‚é»˜è®¤å¤–é”®åæ˜¯ Eloquent ä¾æ®å…³è”åã€å¹¶åœ¨å…³è”åååŠ ä¸Š <code>_id</code> åç¼€ç¡®å®šçš„ã€‚å½“ç„¶ï¼Œå¦‚æœ <code>Comment</code> æ¨¡å‹çš„å¤–é”®ä¸æ˜¯ <code>post_id</code>ï¼Œé‚£ä¹ˆå¯ä»¥å°†è‡ªå®šä¹‰é”®åä½œä¸ºç¬¬äºŒä¸ªå‚æ•°ä¼ é€’ç»™<code>belongsTo</code>æ–¹æ³•ï¼š</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * è·å¾—æ­¤è¯„è®ºæ‰€å±çš„æ–‡ç« ã€‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public function post()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return $this-&gt;belongsTo(&#x27;App\Post&#x27;, &#x27;foreign_key&#x27;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>å¦‚æœçˆ¶çº§æ¨¡å‹æ²¡æœ‰ä½¿ç”¨ <code>id</code> ä½œä¸ºä¸»é”®ï¼Œæˆ–è€…æ˜¯å¸Œæœ›ç”¨ä¸åŒçš„å­—æ®µæ¥è¿æ¥å­çº§æ¨¡å‹ï¼Œåˆ™å¯ä»¥é€šè¿‡ç»™ <code>belongsTo</code>æ–¹æ³•ä¼ é€’ç¬¬ä¸‰ä¸ªå‚æ•°çš„å½¢å¼æŒ‡å®šçˆ¶çº§æ•°æ®è¡¨çš„è‡ªå®šä¹‰é”®ï¼š</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * è·å¾—æ­¤è¯„è®ºæ‰€å±çš„æ–‡ç« ã€‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public function post()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return $this-&gt;belongsTo(&#x27;App\Post&#x27;, &#x27;foreign_key&#x27;, &#x27;other_key&#x27;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="å¤šå¯¹å¤š">å¤šå¯¹å¤š<a class="hash-link" href="#å¤šå¯¹å¤š" title="Direct link to heading">â€‹</a></h3><p>å¤šå¯¹å¤šå…³è”æ¯” <code>hasOne</code> å’Œ <code>hasMany</code> å…³è”ç¨å¾®å¤æ‚äº›ã€‚è¿™ç§å…³è”çš„ä¸€ä¸ªä¾‹å­å°±æ˜¯å…·æœ‰è®¸å¤šè§’è‰²çš„ç”¨æˆ·ï¼Œè€Œè§’è‰²ä¹Ÿè¢«å…¶ä»–ç”¨æˆ·å…±äº«ã€‚ä¾‹å¦‚ï¼Œè®¸å¤šç”¨æˆ·éƒ½å¯ä»¥æœ‰ã€Œç®¡ç†å‘˜ã€è§’è‰²ã€‚è¦å®šä¹‰è¿™ç§å…³è”ï¼Œéœ€è¦ç”¨åˆ°ä¸‰ä¸ªæ•°æ®åº“è¡¨ï¼š<code>users</code>ã€<code>roles</code> å’Œ <code>role_user</code>ã€‚<code>role_user</code> è¡¨æ˜¯ä»¥ç›¸å…³è”çš„ä¸¤ä¸ªæ¨¡å‹æ•°æ®è¡¨ã€ä¾ç…§å­—æ¯é¡ºåºæ’åˆ—å‘½åçš„ï¼Œå¹¶ä¸”åŒ…å« <code>user_id</code> å’Œ <code>role_id</code> å­—æ®µã€‚</p><p>å¤šå¯¹å¤šå…³è”æ˜¯é€šè¿‡å†™ä¸€ä¸ªæ–¹æ³•å®šä¹‰çš„ï¼Œåœ¨æ–¹æ³•å†…éƒ¨è°ƒç”¨ <code>belongsToMany</code> æ–¹æ³•å¹¶è¿”å›å…¶ç»“æœã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬åœ¨ <code>User</code> æ¨¡å‹ä¸­å®šä¹‰ä¸€ä¸ª <code>roles</code> æ–¹æ³•ï¼š</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;?php</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">namespace App;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">use Illuminate\Database\Eloquent\Model;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class User extends Model</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * è·å¾—æ­¤ç”¨æˆ·çš„è§’è‰²ã€‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public function roles()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return $this-&gt;belongsToMany(&#x27;App\Role&#x27;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>å…³è”å…³ç³»å®šä¹‰å¥½åï¼Œæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡ <code>roles</code> åŠ¨æ€å±æ€§è·å¾—ç”¨æˆ·çš„è§’è‰²äº†ï¼š</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">$user = App\User::find(1);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">foreach ($user-&gt;roles as $role) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>å½“ç„¶ï¼Œå¦‚åŒæ‰€æœ‰å…¶å®ƒçš„å…³è”ç±»å‹ï¼Œæ‚¨å¯ä»¥è°ƒç”¨ <code>roles</code> æ–¹æ³•ï¼Œåˆ©ç”¨é“¾å¼è°ƒç”¨å¯¹æŸ¥è¯¢è¯­å¥æ·»åŠ çº¦æŸæ¡ä»¶ï¼š</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">$roles = App\User::find(1)-&gt;roles()-&gt;orderBy(&#x27;name&#x27;)-&gt;get();</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>å¦‚å‰æ‰€è¿°ï¼Œä¸ºäº†ç¡®å®šè¿æ¥è¡¨è¡¨åï¼ŒEloquent ä¼šæŒ‰ç…§å­—æ¯é¡ºåºåˆå¹¶ä¸¤ä¸ªå…³è”æ¨¡å‹çš„åç§°ã€‚ å½“ç„¶ï¼Œæ‚¨å¯ä»¥è‡ªç”±åœ°è¦†ç›–è¿™ä¸ªçº¦å®šï¼Œé€šè¿‡ç»™ <code>belongsToMany</code> æ–¹æ³•æŒ‡å®šç¬¬äºŒä¸ªå‚æ•°å®ç°ï¼š</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">return $this-&gt;belongsToMany(&#x27;App\Role&#x27;, &#x27;role_user&#x27;);</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>é™¤äº†è‡ªå®šä¹‰è¿æ¥è¡¨è¡¨åï¼Œæ‚¨ä¹Ÿå¯ä»¥é€šè¿‡ç»™ <code>belongsToMany</code> æ–¹æ³•å†æ¬¡ä¼ é€’é¢å¤–å‚æ•°æ¥è‡ªå®šä¹‰è¿æ¥è¡¨é‡Œçš„é”®çš„å­—æ®µåç§°ã€‚ç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯å®šä¹‰æ­¤å…³è”çš„æ¨¡å‹åœ¨è¿æ¥è¡¨é‡Œçš„é”®åï¼Œç¬¬å››ä¸ªå‚æ•°æ˜¯å¦ä¸€ä¸ªæ¨¡å‹åœ¨è¿æ¥è¡¨é‡Œçš„é”®åï¼š</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">return $this-&gt;belongsToMany(&#x27;App\Role&#x27;, &#x27;role_user&#x27;, &#x27;user_id&#x27;, &#x27;role_id&#x27;);</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="å®šä¹‰åå‘å…³è”-1">å®šä¹‰åå‘å…³è”<a class="hash-link" href="#å®šä¹‰åå‘å…³è”-1" title="Direct link to heading">â€‹</a></h4><p>å®šä¹‰å¤šå¯¹å¤šå…³è”çš„åå‘å…³è”ï¼Œæ‚¨åªè¦åœ¨å¯¹æ–¹æ¨¡å‹é‡Œå†æ¬¡è°ƒç”¨ <code>belongsToMany</code> æ–¹æ³•å°±å¯ä»¥äº†ã€‚è®©æˆ‘ä»¬æ¥ç€ä»¥ç”¨æˆ·è§’è‰²ä¸ºä¾‹ï¼Œåœ¨ <code>Role</code> æ¨¡å‹ä¸­å®šä¹‰ä¸€ä¸ª <code>users</code> æ–¹æ³•ã€‚</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;?php</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">namespace App;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">use Illuminate\Database\Eloquent\Model;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class Role extends Model</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * è·å¾—æ­¤è§’è‰²ä¸‹çš„ç”¨æˆ·ã€‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public function users()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return $this-&gt;belongsToMany(&#x27;App\User&#x27;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>å¦‚ä½ æ‰€è§ï¼Œé™¤äº†å¼•å…¥çš„æ¨¡å‹å˜ä¸º <code>App\User</code> å¤–ï¼Œå…¶å®ƒä¸åœ¨ <code>User</code> æ¨¡å‹ä¸­å®šä¹‰çš„å®Œå…¨ä¸€æ ·ã€‚ç”±äºæˆ‘ä»¬é‡ç”¨äº† <code>belongsToMany</code> æ–¹æ³•ï¼Œè‡ªå®šä¹‰è¿æ¥è¡¨è¡¨åå’Œè‡ªå®šä¹‰è¿æ¥è¡¨é‡Œçš„é”®çš„å­—æ®µåç§°åœ¨è¿™é‡ŒåŒæ ·é€‚ç”¨ã€‚</p><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="è·å¾—ä¸­é—´è¡¨å­—æ®µ">è·å¾—ä¸­é—´è¡¨å­—æ®µ<a class="hash-link" href="#è·å¾—ä¸­é—´è¡¨å­—æ®µ" title="Direct link to heading">â€‹</a></h4><p>æ‚¨å·²ç»å­¦åˆ°ï¼Œå¤šå¯¹å¤šå…³è”éœ€è¦æœ‰ä¸€ä¸ªä¸­é—´è¡¨æ”¯æŒï¼ŒEloquent æä¾›äº†ä¸€äº›æœ‰ç”¨çš„æ–¹æ³•æ¥å’Œè¿™å¼ è¡¨è¿›è¡Œäº¤äº’ã€‚ä¾‹å¦‚ï¼Œå‡è®¾æˆ‘ä»¬çš„ <code>User</code> å¯¹è±¡å…³è”äº†è®¸å¤šçš„ <code>Role</code> å¯¹è±¡ã€‚åœ¨è·å¾—è¿™äº›å…³è”å¯¹è±¡åï¼Œå¯ä»¥ä½¿ç”¨æ¨¡å‹çš„ <code>pivot</code> å±æ€§è®¿é—®ä¸­é—´è¡¨æ•°æ®ï¼š</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">$user = App\User::find(1);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">foreach ($user-&gt;roles as $role) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    echo $role-&gt;pivot-&gt;created_at;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæˆ‘ä»¬å–å¾—çš„æ¯ä¸ª <code>Role</code> æ¨¡å‹å¯¹è±¡ï¼Œéƒ½ä¼šè¢«è‡ªåŠ¨èµ‹äºˆ <code>pivot</code> å±æ€§ï¼Œå®ƒä»£è¡¨ä¸­é—´è¡¨çš„ä¸€ä¸ªæ¨¡å‹å¯¹è±¡ï¼Œèƒ½åƒå…¶å®ƒçš„ Eloquent æ¨¡å‹ä¸€æ ·ä½¿ç”¨ã€‚</p><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œ<code>pivot</code> å¯¹è±¡åªåŒ…å«ä¸¤ä¸ªå…³è”æ¨¡å‹çš„é”®ã€‚å¦‚æœä¸­é—´è¡¨é‡Œè¿˜æœ‰é¢å¤–å­—æ®µï¼Œåˆ™å¿…é¡»åœ¨å®šä¹‰å…³è”æ—¶æ˜ç¡®æŒ‡å‡ºï¼š</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">return $this-&gt;belongsToMany(&#x27;App\Role&#x27;)-&gt;withPivot(&#x27;column1&#x27;, &#x27;column2&#x27;);</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>å¦‚æœæ‚¨æƒ³è®©ä¸­é—´è¡¨è‡ªåŠ¨ç»´æŠ¤ <code>created_at</code> å’Œ <code>updated_at</code> æ—¶é—´æˆ³ï¼Œé‚£ä¹ˆåœ¨å®šä¹‰å…³è”æ—¶åŠ ä¸Š <code>withTimestamps</code> æ–¹æ³•å³å¯ã€‚</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">return $this-&gt;belongsToMany(&#x27;App\Role&#x27;)-&gt;withTimestamps();</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="é€šè¿‡ä¸­é—´è¡¨è¿‡æ»¤å…³è”æ•°æ®">é€šè¿‡ä¸­é—´è¡¨è¿‡æ»¤å…³è”æ•°æ®<a class="hash-link" href="#é€šè¿‡ä¸­é—´è¡¨è¿‡æ»¤å…³è”æ•°æ®" title="Direct link to heading">â€‹</a></h4><p>åœ¨å®šä¹‰å…³è”æ—¶ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ <code>wherePivot</code> å’Œ <code>wherePivotIn</code> æ–¹æ³•è¿‡æ»¤ <code>belongsToMany</code> è¿”å›çš„ç»“æœï¼š</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">return $this-&gt;belongsToMany(&#x27;App\Role&#x27;)-&gt;wherePivot(&#x27;approved&#x27;, 1);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">return $this-&gt;belongsToMany(&#x27;App\Role&#x27;)-&gt;wherePivotIn(&#x27;priority&#x27;, [1, 2]);</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="å®šä¹‰è‡ªå®šä¹‰ä¸­é—´è¡¨æ¨¡å‹">å®šä¹‰è‡ªå®šä¹‰ä¸­é—´è¡¨æ¨¡å‹<a class="hash-link" href="#å®šä¹‰è‡ªå®šä¹‰ä¸­é—´è¡¨æ¨¡å‹" title="Direct link to heading">â€‹</a></h4><p>å¦‚æœæ‚¨æƒ³å®šä¹‰ä¸€ä¸ªè‡ªå®šä¹‰æ¨¡å‹æ¥è¡¨ç¤ºå…³è”å…³ç³»ä¸­çš„ä¸­é—´è¡¨ï¼Œå¯ä»¥åœ¨å®šä¹‰å…³è”æ—¶è°ƒç”¨ <code>using</code> æ–¹æ³•ã€‚æ‰€æœ‰è‡ªå®šä¹‰ä¸­é—´è¡¨æ¨¡å‹éƒ½å¿…é¡»æ‰©å±•è‡ª <code>Illuminate\Database\Eloquent\Relations\Pivot</code> ç±»ã€‚ä¾‹å¦‚ï¼Œ
æˆ‘ä»¬åœ¨å†™ <code>Role</code> æ¨¡å‹çš„å…³è”æ—¶ï¼Œä½¿ç”¨è‡ªå®šä¹‰ä¸­é—´è¡¨æ¨¡å‹ <code>UserRole</code>ï¼š</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;?php</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">namespace App;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">use Illuminate\Database\Eloquent\Model;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class Role extends Model</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * è·å¾—æ­¤è§’è‰²ä¸‹çš„ç”¨æˆ·ã€‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public function users()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return $this-&gt;belongsToMany(&#x27;App\User&#x27;)-&gt;using(&#x27;App\UserRole&#x27;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>å½“å®šä¹‰ <code>UserRole</code> æ¨¡å‹æ—¶ï¼Œæˆ‘ä»¬è¦æ‰©å±•è‡ª <code>Pivot</code> ç±»ï¼š</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;?php</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">namespace App;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">use Illuminate\Database\Eloquent\Relations\Pivot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class UserRole extends Pivot</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="è¿œå±‚ä¸€å¯¹å¤š">è¿œå±‚ä¸€å¯¹å¤š<a class="hash-link" href="#è¿œå±‚ä¸€å¯¹å¤š" title="Direct link to heading">â€‹</a></h3><p>ã€Œè¿œå±‚ä¸€å¯¹å¤šã€å…³è”æä¾›äº†æ–¹ä¾¿ã€ç®€çŸ­çš„æ–¹å¼é€šè¿‡ä¸­é—´çš„å…³è”æ¥è·å¾—è¿œå±‚çš„å…³è”ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ª <code>Country</code> æ¨¡å‹å¯ä»¥é€šè¿‡ä¸­é—´çš„ <code>User</code> æ¨¡å‹è·å¾—å¤šä¸ª <code>Post</code> æ¨¡å‹ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæ‚¨å¯ä»¥è½»æ˜“åœ°æ”¶é›†ç»™å®šå›½å®¶çš„æ‰€æœ‰åšå®¢æ–‡ç« ã€‚è®©æˆ‘ä»¬æ¥çœ‹çœ‹å®šä¹‰è¿™ç§å…³è”æ‰€éœ€çš„æ•°æ®è¡¨ï¼š</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">countries</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    id - integer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    name - string</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">users</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    id - integer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    country_id - integer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    name - string</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">posts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    id - integer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    user_id - integer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    title - string</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>è™½ç„¶ <code>posts</code> è¡¨ä¸­ä¸åŒ…å« <code>country_id</code> å­—æ®µï¼Œä½† <code>hasManyThrough</code> å…³è”èƒ½è®©æˆ‘ä»¬é€šè¿‡ <code>$country-&gt;posts</code> è®¿é—®åˆ°ä¸€ä¸ªå›½å®¶ä¸‹æ‰€æœ‰çš„ç”¨æˆ·æ–‡ç« ã€‚ä¸ºäº†å®Œæˆè¿™ä¸ªæŸ¥è¯¢ï¼ŒEloquent ä¼šå…ˆæ£€æŸ¥ä¸­é—´è¡¨ <code>users</code> çš„ <code>country_id</code> å­—æ®µï¼Œæ‰¾åˆ°æ‰€æœ‰åŒ¹é…çš„ç”¨æˆ· ID åï¼Œä½¿ç”¨è¿™äº› IDï¼Œåœ¨ <code>posts</code> è¡¨ä¸­å®ŒæˆæŸ¥æ‰¾ã€‚ </p><p>ç°åœ¨ï¼Œæˆ‘ä»¬å·²ç»çŸ¥é“äº†å®šä¹‰è¿™ç§å…³è”æ‰€éœ€çš„æ•°æ®è¡¨ç»“æ„ï¼Œæ¥ä¸‹æ¥ï¼Œè®©æˆ‘ä»¬åœ¨ <code>Country</code> æ¨¡å‹ä¸­å®šä¹‰å®ƒï¼š</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;?php</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">namespace App;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">use Illuminate\Database\Eloquent\Model;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class Country extends Model</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * è·å¾—æŸä¸ªå›½å®¶ä¸‹æ‰€æœ‰çš„ç”¨æˆ·æ–‡ç« ã€‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public function posts()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return $this-&gt;hasManyThrough(&#x27;App\Post&#x27;, &#x27;App\User&#x27;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p><code>hasManyThrough</code> æ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯æˆ‘ä»¬æœ€ç»ˆå¸Œæœ›è®¿é—®çš„æ¨¡å‹åç§°ï¼Œè€Œç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸­é—´æ¨¡å‹çš„åç§°ã€‚</p><p>å½“æ‰§è¡Œå…³è”æŸ¥è¯¢æ—¶ï¼Œé€šå¸¸ä¼šä½¿ç”¨ Eloquent çº¦å®šçš„å¤–é”®åã€‚å¦‚æœæ‚¨æƒ³è¦è‡ªå®šä¹‰å…³è”çš„é”®ï¼Œå¯ä»¥é€šè¿‡ç»™ <code>hasManyThrough</code> æ–¹æ³•ä¼ é€’ç¬¬ä¸‰ä¸ªå’Œç¬¬å››ä¸ªå‚æ•°å®ç°ï¼Œç¬¬ä¸‰ä¸ªå‚æ•°è¡¨ç¤ºä¸­é—´æ¨¡å‹çš„å¤–é”®åï¼Œç¬¬å››ä¸ªå‚æ•°è¡¨ç¤ºæœ€ç»ˆæ¨¡å‹çš„å¤–é”®åã€‚ç¬¬äº”ä¸ªå‚æ•°è¡¨ç¤ºæœ¬åœ°é”®åï¼Œè€Œç¬¬å…­ä¸ªå‚æ•°è¡¨ç¤ºä¸­é—´æ¨¡å‹çš„æœ¬åœ°é”®åï¼š</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">class Country extends Model</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public function posts()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return $this-&gt;hasManyThrough(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &#x27;App\Post&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &#x27;App\User&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &#x27;country_id&#x27;, // ç”¨æˆ·è¡¨å¤–é”®...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &#x27;user_id&#x27;, // æ–‡ç« è¡¨å¤–é”®...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &#x27;id&#x27;, // å›½å®¶è¡¨æœ¬åœ°é”®...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &#x27;id&#x27; // ç”¨æˆ·è¡¨æœ¬åœ°é”®...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        );</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="å¤šæ€å…³è”">å¤šæ€å…³è”<a class="hash-link" href="#å¤šæ€å…³è”" title="Direct link to heading">â€‹</a></h3><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="æ•°æ®è¡¨ç»“æ„">æ•°æ®è¡¨ç»“æ„<a class="hash-link" href="#æ•°æ®è¡¨ç»“æ„" title="Direct link to heading">â€‹</a></h4><p>å¤šæ€å…³è”å…è®¸ä¸€ä¸ªæ¨¡å‹åœ¨å•ä¸ªå…³è”ä¸Šå±äºå¤šä¸ªå…¶ä»–æ¨¡å‹ã€‚ä¾‹å¦‚ï¼Œæƒ³è±¡ä¸€ä¸‹ä½¿ç”¨æ‚¨åº”ç”¨çš„ç”¨æˆ·å¯ä»¥ã€Œè¯„è®ºã€æ–‡ç« å’Œè§†é¢‘ã€‚ä½¿ç”¨å¤šæ€å…³è”ï¼Œæ‚¨å¯ä»¥ç”¨ä¸€ä¸ª <code>comments</code> è¡¨åŒæ—¶æ»¡è¶³è¿™ä¸¤ä¸ªä½¿ç”¨åœºæ™¯ã€‚è®©æˆ‘ä»¬æ¥çœ‹çœ‹æ„å»ºè¿™ç§å…³è”æ‰€éœ€çš„æ•°æ®è¡¨ç»“æ„ï¼š</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">posts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    id - integer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    title - string</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    body - text</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">videos</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    id - integer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    title - string</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    url - string</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">comments</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    id - integer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    body - text</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    commentable_id - integer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    commentable_type - string</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p><code>comments</code> è¡¨ä¸­æœ‰ä¸¤ä¸ªéœ€è¦æ³¨æ„çš„é‡è¦å­—æ®µ <code>commentable_id</code> å’Œ <code>commentable_type</code>ã€‚<code>commentable_id</code> ç”¨æ¥ä¿å­˜æ–‡ç« æˆ–è€…è§†é¢‘çš„ ID å€¼ï¼Œè€Œ <code>commentable_type</code> ç”¨æ¥ä¿å­˜æ‰€å±æ¨¡å‹çš„ç±»åã€‚<code>commentable_type</code> æ˜¯åœ¨æˆ‘ä»¬è®¿é—® <code>commentable</code> å…³è”æ—¶ï¼Œ è®© ORM ç¡®å®šæ‰€å±çš„æ¨¡å‹æ˜¯å“ªä¸ªã€Œç±»å‹ã€ã€‚</p><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="æ¨¡å‹ç»“æ„">æ¨¡å‹ç»“æ„<a class="hash-link" href="#æ¨¡å‹ç»“æ„" title="Direct link to heading">â€‹</a></h4><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹åˆ›å»ºè¿™ç§å…³è”æ‰€éœ€çš„æ¨¡å‹å®šä¹‰ï¼š</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;?php</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">namespace App;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">use Illuminate\Database\Eloquent\Model;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class Comment extends Model</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * è·å¾—æ‹¥æœ‰æ­¤è¯„è®ºçš„æ¨¡å‹ã€‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public function commentable()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return $this-&gt;morphTo();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class Post extends Model</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * è·å¾—æ­¤æ–‡ç« çš„æ‰€æœ‰è¯„è®ºã€‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public function comments()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return $this-&gt;morphMany(&#x27;App\Comment&#x27;, &#x27;commentable&#x27;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class Video extends Model</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * è·å¾—æ­¤è§†é¢‘çš„æ‰€æœ‰è¯„è®ºã€‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public function comments()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return $this-&gt;morphMany(&#x27;App\Comment&#x27;, &#x27;commentable&#x27;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="è·å–å¤šæ€å…³è”">è·å–å¤šæ€å…³è”<a class="hash-link" href="#è·å–å¤šæ€å…³è”" title="Direct link to heading">â€‹</a></h4><p>ä¸€æ—¦æ‚¨çš„æ•°æ®åº“è¡¨å‡†å¤‡å¥½ã€æ¨¡å‹å®šä¹‰å®Œæˆåï¼Œå°±å¯ä»¥é€šè¿‡æ¨¡å‹æ¥è®¿é—®å…³è”äº†ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬åªè¦ç®€å•åœ°ä½¿ç”¨ <code>comments</code> åŠ¨æ€å±æ€§ï¼Œå°±å¯ä»¥è·å¾—æŸç¯‡æ–‡ç« ä¸‹çš„æ‰€æœ‰è¯„è®ºï¼š</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">$post = App\Post::find(1);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">foreach ($post-&gt;comments as $comment) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>æ‚¨ä¹Ÿå¯ä»¥åœ¨å¤šæ€æ¨¡å‹ä¸Šï¼Œé€šè¿‡è®¿é—®è°ƒç”¨äº† <code>morphTo</code> çš„å…³è”æ–¹æ³•è·å¾—å¤šæ€å…³è”çš„æ‹¥æœ‰è€…ã€‚åœ¨å½“å‰åœºæ™¯ä¸­ï¼Œå°±æ˜¯ <code>Comment</code> æ¨¡å‹çš„ <code>commentable</code> æ–¹æ³•ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨åŠ¨æ€å±æ€§æ¥è®¿é—®è¿™ä¸ªæ–¹æ³•ï¼š</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">$comment = App\Comment::find(1);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$commentable = $comment-&gt;commentable;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p><code>Comment</code> æ¨¡å‹çš„ <code>commentable</code> å…³è”ä¼šè¿”å› <code>Post</code> æˆ–è€… <code>Video</code> å®ä¾‹ï¼Œè¿™å–å†³äºè¯„è®ºæ‰€å±çš„æ¨¡å‹ç±»å‹ã€‚</p><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="è‡ªå®šä¹‰å¤šæ€å…³è”çš„ç±»å‹å­—æ®µ">è‡ªå®šä¹‰å¤šæ€å…³è”çš„ç±»å‹å­—æ®µ<a class="hash-link" href="#è‡ªå®šä¹‰å¤šæ€å…³è”çš„ç±»å‹å­—æ®µ" title="Direct link to heading">â€‹</a></h4><p>é»˜è®¤ï¼ŒLaravel ä¼šä½¿ç”¨å®Œå…¨é™å®šç±»åä½œä¸ºå…³è”æ¨¡å‹ä¿å­˜åœ¨å¤šæ€æ¨¡å‹ä¸Šçš„ç±»å‹å­—æ®µå€¼ã€‚æ¯”å¦‚ï¼Œåœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œ<code>Comment</code> å±äº <code>Post</code> æˆ–è€… <code>Video</code>ï¼Œé‚£ä¹ˆ <code>commentable_type</code>çš„é»˜è®¤å€¼å¯¹åº”åœ°å°±æ˜¯ <code>App\Post</code> å’Œ <code>App\Video</code>ã€‚ä½†æ˜¯ï¼Œæ‚¨å¯èƒ½å¸Œæœ›å°†æ•°æ®åº“ä¸ç¨‹åºå†…éƒ¨ç»“æ„è§£è€¦ã€‚é‚£æ ·çš„è¯ï¼Œä½ å¯ä»¥å®šä¹‰ä¸€ä¸ªã€Œå¤šæ€æ˜ å°„è¡¨ã€æ¥æŒ‡ç¤º Eloquent ä½¿ç”¨æ¯ä¸ªæ¨¡å‹è‡ªå®šä¹‰ç±»å‹å­—æ®µåè€Œä¸æ˜¯ç±»åï¼š</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">use Illuminate\Database\Eloquent\Relations\Relation;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Relation::morphMap([</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &#x27;posts&#x27; =&gt; &#x27;App\Post&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &#x27;videos&#x27; =&gt; &#x27;App\Video&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">]);</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>æ‚¨å¯ä»¥åœ¨ <code>AppServiceProvider</code> ä¸­çš„ <code>boot</code> å‡½æ•°ä¸­ä½¿ç”¨ <code>Relation::morphMap</code> æ–¹æ³•æ³¨å†Œã€Œå¤šæ€æ˜ å°„è¡¨ã€ï¼Œæˆ–è€…ä½¿ç”¨ä¸€ä¸ªç‹¬ç«‹çš„æœåŠ¡æä¾›è€…æ³¨å†Œã€‚</p><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="å¤šå¯¹å¤šå¤šæ€å…³è”">å¤šå¯¹å¤šå¤šæ€å…³è”<a class="hash-link" href="#å¤šå¯¹å¤šå¤šæ€å…³è”" title="Direct link to heading">â€‹</a></h3><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="æ•°æ®è¡¨ç»“æ„-1">æ•°æ®è¡¨ç»“æ„<a class="hash-link" href="#æ•°æ®è¡¨ç»“æ„-1" title="Direct link to heading">â€‹</a></h4><p>é™¤äº†ä¼ ç»Ÿçš„å¤šæ€å…³è”ï¼Œæ‚¨ä¹Ÿå¯ä»¥å®šä¹‰ã€Œå¤šå¯¹å¤šã€çš„å¤šæ€å…³è”ã€‚ä¾‹å¦‚ï¼Œ<code>Post</code> æ¨¡å‹å’Œ <code>Video</code> æ¨¡å‹å¯ä»¥å…±äº«ä¸€ä¸ªå¤šæ€å…³è”è‡³ <code>Tag</code> æ¨¡å‹ã€‚ ä½¿ç”¨å¤šå¯¹å¤šå¤šæ€å…³è”å¯ä»¥è®©æ‚¨åœ¨æ–‡ç« å’Œè§†é¢‘ä¸­å…±äº«å”¯ä¸€çš„æ ‡ç­¾åˆ—è¡¨ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹æ•°æ®è¡¨ç»“æ„ï¼š</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">posts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    id - integer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    name - string</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">videos</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    id - integer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    name - string</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">tags</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    id - integer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    name - string</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">taggables</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    tag_id - integer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    taggable_id - integer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    taggable_type - string</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="æ¨¡å‹ç»“æ„-1">æ¨¡å‹ç»“æ„<a class="hash-link" href="#æ¨¡å‹ç»“æ„-1" title="Direct link to heading">â€‹</a></h4><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å‡†å¤‡åœ¨æ¨¡å‹ä¸Šå®šä¹‰å…³è”å…³ç³»ã€‚<code>Post</code> å’Œ <code>Video</code> ä¸¤ä¸ªæ¨¡å‹éƒ½æœ‰ä¸€ä¸ª <code>tags</code> æ–¹æ³•ï¼Œæ–¹æ³•å†…éƒ¨éƒ½è°ƒç”¨äº† Eloquent ç±»è‡ªèº«çš„ <code>morphToMany</code> æ–¹æ³•ï¼š</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;?php</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">namespace App;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">use Illuminate\Database\Eloquent\Model;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class Post extends Model</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * è·å¾—æ­¤æ–‡ç« çš„æ‰€æœ‰æ ‡ç­¾ã€‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public function tags()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return $this-&gt;morphToMany(&#x27;App\Tag&#x27;, &#x27;taggable&#x27;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="å®šä¹‰åå‘å…³è”-2">å®šä¹‰åå‘å…³è”<a class="hash-link" href="#å®šä¹‰åå‘å…³è”-2" title="Direct link to heading">â€‹</a></h4><p>æ¥ä¸‹é‡Œï¼Œåœ¨ <code>Tag</code> æ¨¡å‹ä¸­ï¼Œæ‚¨åº”è¯¥ä¸ºæ¯ä¸ªå…³è”æ¨¡å‹å®šä¹‰ä¸€ä¸ªæ–¹æ³•ã€‚åœ¨è¿™ä¸ªä¾‹å­é‡Œï¼Œæˆ‘ä»¬è¦å®šä¹‰ä¸€ä¸ª <code>posts</code> æ–¹æ³•å’Œä¸€ä¸ª <code>videos</code> æ–¹æ³•ï¼š</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;?php</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">namespace App;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">use Illuminate\Database\Eloquent\Model;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class Tag extends Model</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * è·å¾—æ­¤æ ‡ç­¾ä¸‹æ‰€æœ‰çš„æ–‡ç« ã€‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public function posts()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return $this-&gt;morphedByMany(&#x27;App\Post&#x27;, &#x27;taggable&#x27;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     *  è·å¾—æ­¤æ ‡ç­¾ä¸‹æ‰€æœ‰çš„è§†é¢‘ã€‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public function videos()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return $this-&gt;morphedByMany(&#x27;App\Video&#x27;, &#x27;taggable&#x27;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="è·å–å…³è”">è·å–å…³è”<a class="hash-link" href="#è·å–å…³è”" title="Direct link to heading">â€‹</a></h4><p>ä¸€æ—¦æ‚¨çš„æ•°æ®åº“è¡¨å‡†å¤‡å¥½ã€æ¨¡å‹å®šä¹‰å®Œæˆåï¼Œå°±å¯ä»¥é€šè¿‡æ¨¡å‹æ¥è®¿é—®å…³è”äº†ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬åªè¦ç®€å•åœ°ä½¿ç”¨ <code>tags</code> åŠ¨æ€å±æ€§ï¼Œå°±å¯ä»¥è·å¾—æŸç¯‡æ–‡ç« ä¸‹çš„æ‰€æœ‰æ ‡ç­¾ï¼š</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">$post = App\Post::find(1);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">foreach ($post-&gt;tags as $tag) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>æ‚¨ä¹Ÿå¯ä»¥åœ¨å¤šæ€æ¨¡å‹ä¸Šï¼Œé€šè¿‡è®¿é—®è°ƒç”¨äº† <code>morphedByMany</code> çš„å…³è”æ–¹æ³•è·å¾—å¤šæ€å…³è”çš„æ‹¥æœ‰è€…ã€‚åœ¨å½“å‰åœºæ™¯ä¸­ï¼Œå°±æ˜¯ <code>Tag</code> æ¨¡å‹ä¸Šçš„ <code>posts</code> æ–¹æ³•å’Œ <code>videos</code> æ–¹æ³•ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨åŠ¨æ€å±æ€§æ¥è®¿é—®è¿™ä¸¤ä¸ªæ–¹æ³•ï¼š</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">$tag = App\Tag::find(1);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">foreach ($tag-&gt;videos as $video) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="æŸ¥è¯¢å…³è”">æŸ¥è¯¢å…³è”<a class="hash-link" href="#æŸ¥è¯¢å…³è”" title="Direct link to heading">â€‹</a></h2><p>ç”±äºæ‰€æœ‰ç±»å‹çš„å…³è”éƒ½é€šè¿‡æ–¹æ³•å®šä¹‰ï¼Œæ‚¨å¯ä»¥è°ƒç”¨è¿™äº›æ–¹æ³•æ¥è·å–å…³è”å®ä¾‹ï¼Œè€Œä¸éœ€è¦å®é™…è¿è¡Œå…³è”çš„æŸ¥è¯¢ã€‚æ­¤å¤–ï¼Œæ‰€æœ‰ç±»å‹çš„å…³è”éƒ½å¯ä»¥ä½œä¸º <a href="/docs/laravel/queries">æŸ¥è¯¢è¯­å¥æ„é€ å™¨</a> ä½¿ç”¨ï¼Œè®©ä½ åœ¨å‘æ•°æ®åº“æ‰§è¡Œ SQL è¯­å¥å‰ï¼Œä½¿ç”¨é“¾å¼è°ƒç”¨çš„æ–¹å¼æ·»åŠ çº¦æŸæ¡ä»¶ã€‚</p><p>ä¾‹å¦‚ï¼Œå‡è®¾ä¸€ä¸ªåšå®¢ç³»ç»Ÿï¼Œå…¶ä¸­ <code>User</code> æ¨¡å‹æœ‰è®¸å¤šå…³è”çš„ <code>Post</code> æ¨¡å‹ï¼š</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;?php</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">namespace App;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">use Illuminate\Database\Eloquent\Model;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class User extends Model</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * è·å¾—æ­¤ç”¨æˆ·æ‰€æœ‰çš„æ–‡ç« ã€‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public function posts()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return $this-&gt;hasMany(&#x27;App\Post&#x27;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>æ‚¨ä¹Ÿå¯ä»¥åƒè¿™æ ·åœ¨ <code>posts</code> å…³è”ä¸Šæ·»åŠ é¢å¤–çº¦æŸæ¡ä»¶ï¼š</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">$user = App\User::find(1);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$user-&gt;posts()-&gt;where(&#x27;active&#x27;, 1)-&gt;get();</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>æ‚¨å¯ä»¥åœ¨å…³è”ä¸Šä½¿ç”¨ä»»ä½• <a href="/docs/laravel/queries">æŸ¥è¯¢è¯­å¥æ„é€ å™¨</a> çš„æ–¹æ³•ï¼Œæ‰€ä»¥ï¼Œæ¬¢è¿æŸ¥é˜…æŸ¥è¯¢è¯­å¥æ„é€ å™¨çš„ç›¸å…³æ–‡æ¡£ä»¥ä¾¿äº†è§£æ‚¨å¯ä»¥ä½¿ç”¨å“ªäº›æ–¹æ³•ã€‚</p><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="å…³è”æ–¹æ³•-vs-åŠ¨æ€å±æ€§">å…³è”æ–¹æ³• Vs. åŠ¨æ€å±æ€§<a class="hash-link" href="#å…³è”æ–¹æ³•-vs-åŠ¨æ€å±æ€§" title="Direct link to heading">â€‹</a></h3><p>å¦‚æœæ‚¨ä¸éœ€è¦ç»™ Eloquent å…³è”æŸ¥è¯¢æ·»åŠ é¢å¤–çº¦æŸæ¡ä»¶ï¼Œä½ å¯ä»¥ç®€å•çš„åƒè®¿é—®å±æ€§ä¸€æ ·è®¿é—®å…³è”ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬åˆšåˆšçš„ <code>User</code> å’Œ <code>Post</code> æ¨¡å‹ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥è¿™æ ·è®¿é—®æ‰€æœ‰ç”¨æˆ·çš„æ–‡ç« ï¼š</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">$user = App\User::find(1);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">foreach ($user-&gt;posts as $post) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>åŠ¨æ€å±æ€§æ˜¯ã€Œæ‡’åŠ è½½ã€çš„ï¼Œæ„å‘³ç€å®ƒä»¬çš„å…³è”æ•°æ®åªåœ¨å®é™…è¢«è®¿é—®æ—¶æ‰è¢«åŠ è½½ã€‚å› æ­¤ï¼Œå¼€å‘è€…ç»å¸¸ä½¿ç”¨ <a href="#eager-loading">é¢„åŠ è½½</a> æå‰åŠ è½½ä»–ä»¬ä¹‹åä¼šç”¨åˆ°çš„å…³è”æ•°æ®ã€‚é¢„åŠ è½½æœ‰æ•ˆå‡å°‘äº† SQL è¯­å¥è¯·æ±‚æ•°ï¼Œé¿å…äº†é‡å¤æ‰§è¡Œä¸€ä¸ªæ¨¡å‹å…³è”åŠ è½½æ•°æ®ã€å‘é€ SQL è¯·æ±‚å¸¦æ¥çš„æ€§èƒ½é—®é¢˜ã€‚</p><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="åŸºäºå­˜åœ¨çš„å…³è”æŸ¥è¯¢">åŸºäºå­˜åœ¨çš„å…³è”æŸ¥è¯¢<a class="hash-link" href="#åŸºäºå­˜åœ¨çš„å…³è”æŸ¥è¯¢" title="Direct link to heading">â€‹</a></h3><p>å½“è·å–æ¨¡å‹è®°å½•æ—¶ï¼Œæ‚¨å¯èƒ½å¸Œæœ›æ ¹æ®å­˜åœ¨çš„å…³è”å¯¹ç»“æœè¿›è¡Œé™åˆ¶ã€‚ä¾‹å¦‚ï¼Œæ‚¨æƒ³è·å¾—è‡³å°‘æœ‰ä¸€æ¡è¯„è®ºçš„æ‰€æœ‰åšå®¢æ–‡ç« ã€‚ä¸ºäº†å®ç°è¿™ä¸ªåŠŸèƒ½ï¼Œæ‚¨å¯ä»¥ç»™ <code>has</code> æ–¹æ³•ä¼ é€’å…³è”åç§°ï¼š</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">// è·å¾—æ‰€æœ‰è‡³å°‘æœ‰ä¸€æ¡è¯„è®ºçš„æ–‡ç« ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$posts = App\Post::has(&#x27;comments&#x27;)-&gt;get();</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>æ‚¨ä¹Ÿå¯ä»¥æŒ‡å®šä¸€ä¸ªè¿ç®—ç¬¦å’Œæ•°ç›®ï¼Œè¿›ä¸€æ­¥è‡ªå®šä¹‰æŸ¥è¯¢ï¼š</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">// è·å¾—æ‰€æœ‰æœ‰ä¸‰æ¡æˆ–ä¸‰æ¡ä»¥ä¸Šè¯„è®ºçš„æ–‡ç« ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$posts = Post::has(&#x27;comments&#x27;, &#x27;&gt;=&#x27;, 3)-&gt;get();</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>ä¹Ÿå¯ä»¥ä½¿ç”¨ã€Œç‚¹ã€ç¬¦å·æ„é€ åµŒå¥—çš„çš„ <code>has</code> è¯­å¥ã€‚ä¾‹å¦‚ï¼Œæ‚¨å¯ä»¥è·å¾—æ‰€æœ‰è‡³å°‘æœ‰ä¸€æ¡è·èµè¯„è®ºçš„æ–‡ç« ï¼š</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">// è·å¾—æ‰€æœ‰è‡³å°‘æœ‰ä¸€æ¡è·èµè¯„è®ºçš„æ–‡ç« ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$posts = Post::has(&#x27;comments.votes&#x27;)-&gt;get();</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>å¦‚æœæ‚¨éœ€è¦æ›´é«˜çº§çš„ç”¨æ³•ï¼Œå¯ä»¥ä½¿ç”¨ <code>whereHas</code>å’Œ <code>orWhereHas</code> æ–¹æ³•åœ¨ <code>has</code> æŸ¥è¯¢é‡Œè®¾ç½®ã€Œwhereã€æ¡ä»¶ã€‚æ­¤æ–¹æ³•å¯ä»¥è®©ä½ å¢åŠ è‡ªå®šä¹‰æ¡ä»¶è‡³å…³è”çº¦æŸä¸­ï¼Œä¾‹å¦‚å¯¹è¯„è®ºå†…å®¹è¿›è¡Œæ£€æŸ¥ï¼š</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">// è·å¾—æ‰€æœ‰è‡³å°‘æœ‰ä¸€æ¡è¯„è®ºå†…å®¹æ»¡è¶³ foo% æ¡ä»¶çš„æ–‡ç« </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$posts = Post::whereHas(&#x27;comments&#x27;, function ($query) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    $query-&gt;where(&#x27;content&#x27;, &#x27;like&#x27;, &#x27;foo%&#x27;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">})-&gt;get();</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="åŸºäºä¸å­˜åœ¨çš„å…³è”æŸ¥è¯¢">åŸºäºä¸å­˜åœ¨çš„å…³è”æŸ¥è¯¢<a class="hash-link" href="#åŸºäºä¸å­˜åœ¨çš„å…³è”æŸ¥è¯¢" title="Direct link to heading">â€‹</a></h3><p>å½“è·å–æ¨¡å‹è®°å½•æ—¶ï¼Œæ‚¨å¯èƒ½å¸Œæœ›æ ¹æ®ä¸å­˜åœ¨çš„å…³è”å¯¹ç»“æœè¿›è¡Œé™åˆ¶ã€‚ä¾‹å¦‚ï¼Œæ‚¨æƒ³è·å¾— <strong>æ²¡æœ‰</strong> ä»»ä½•è¯„è®ºçš„æ‰€æœ‰åšå®¢æ–‡ç« ã€‚ä¸ºäº†å®ç°è¿™ä¸ªåŠŸèƒ½ï¼Œæ‚¨å¯ä»¥ç»™ <code>doesntHave</code> æ–¹æ³•ä¼ é€’å…³è”åç§°ï¼š</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">$posts = App\Post::doesntHave(&#x27;comments&#x27;)-&gt;get();</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>å¦‚æœæ‚¨éœ€è¦æ›´é«˜çº§çš„ç”¨æ³•ï¼Œå¯ä»¥ä½¿ç”¨ <code>whereDoesntHave</code> æ–¹æ³•åœ¨ <code>doesntHave</code> æŸ¥è¯¢é‡Œè®¾ç½®ã€Œwhereã€æ¡ä»¶ã€‚æ­¤æ–¹æ³•å¯ä»¥è®©ä½ å¢åŠ è‡ªå®šä¹‰æ¡ä»¶è‡³å…³è”çº¦æŸä¸­ï¼Œä¾‹å¦‚å¯¹è¯„è®ºå†…å®¹è¿›è¡Œæ£€æŸ¥ï¼š</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">$posts = Post::whereDoesntHave(&#x27;comments&#x27;, function ($query) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    $query-&gt;where(&#x27;content&#x27;, &#x27;like&#x27;, &#x27;foo%&#x27;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">})-&gt;get();</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="å…³è”æ•°æ®è®¡æ•°">å…³è”æ•°æ®è®¡æ•°<a class="hash-link" href="#å…³è”æ•°æ®è®¡æ•°" title="Direct link to heading">â€‹</a></h3><p>å¦‚æœæ‚¨åªæƒ³ç»Ÿè®¡ç»“æœæ•°è€Œä¸éœ€è¦åŠ è½½å®é™…æ•°æ®ï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨ <code>withCount</code> æ–¹æ³•ï¼Œæ­¤æ–¹æ³•ä¼šåœ¨æ‚¨çš„ç»“æœé›†æ¨¡å‹ä¸­æ·»åŠ ä¸€ä¸ª <code>{å…³è”å}_count</code> å­—æ®µã€‚ä¾‹å¦‚ï¼š</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">$posts = App\Post::withCount(&#x27;comments&#x27;)-&gt;get();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">foreach ($posts as $post) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    echo $post-&gt;comments_count;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>æ‚¨å¯ä»¥ä¸ºå¤šä¸ªå…³è”æ•°æ®ã€Œè®¡æ•°ã€ï¼Œå¹¶ä¸ºå…¶æŸ¥è¯¢æ·»åŠ çº¦æŸæ¡ä»¶ï¼š</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">$posts = Post::withCount([&#x27;votes&#x27;, &#x27;comments&#x27; =&gt; function ($query) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    $query-&gt;where(&#x27;content&#x27;, &#x27;like&#x27;, &#x27;foo%&#x27;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}])-&gt;get();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo $posts[0]-&gt;votes_count;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo $posts[0]-&gt;comments_count;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>æ‚¨ä¹Ÿå¯ä»¥ä¸ºå…³è”æ•°æ®è®¡æ•°ç»“æœèµ·åˆ«åï¼Œå…è®¸åœ¨åŒä¸€ä¸ªå…³è”ä¸Šå¤šæ¬¡è®¡æ•°ï¼š</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">$posts = Post::withCount([</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &#x27;comments&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &#x27;comments as pending_comments_count&#x27; =&gt; function ($query) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        $query-&gt;where(&#x27;approved&#x27;, false);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">])-&gt;get();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo $posts[0]-&gt;comments_count;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo $posts[0]-&gt;pending_comments_count;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="é¢„åŠ è½½">é¢„åŠ è½½<a class="hash-link" href="#é¢„åŠ è½½" title="Direct link to heading">â€‹</a></h2><p>å½“ä½œä¸ºå±æ€§è®¿é—® Eloquent å…³è”æ—¶ï¼Œå…³è”æ•°æ®æ˜¯ã€Œæ‡’åŠ è½½ã€çš„ã€‚æ„å‘³ç€åœ¨ä½ ç¬¬ä¸€æ¬¡è®¿é—®è¯¥å±æ€§æ—¶ï¼Œæ‰ä¼šåŠ è½½å…³è”æ•°æ®ã€‚ä¸è¿‡ï¼Œæ˜¯å½“ä½ æŸ¥è¯¢çˆ¶æ¨¡å‹æ—¶ï¼ŒEloquent å¯ä»¥ã€Œé¢„åŠ è½½ã€å…³è”æ•°æ®ã€‚é¢„åŠ è½½é¿å…äº† N + 1 æŸ¥è¯¢é—®é¢˜ã€‚è¦è¯´æ˜ N + 1 æŸ¥è¯¢é—®é¢˜ï¼Œè¯•æƒ³ä¸€ä¸ª <code>Book</code> æ¨¡å‹å…³è”åˆ° <code>Author</code> æ¨¡å‹ï¼š</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;?php</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">namespace App;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">use Illuminate\Database\Eloquent\Model;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class Book extends Model</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * è·å¾—æ­¤ä¹¦çš„ä½œè€…ã€‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public function author()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return $this-&gt;belongsTo(&#x27;App\Author&#x27;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>ç°åœ¨ï¼Œè®©æˆ‘ä»¬æ¥è·å¾—æ‰€æœ‰ä¹¦ç±å’Œä½œè€…æ•°æ®ï¼š</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">$books = App\Book::all();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">foreach ($books as $book) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    echo $book-&gt;author-&gt;name;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>è¿™ä¸ªå¾ªç¯ä¼šè¿è¡Œä¸€æ¬¡æŸ¥è¯¢å–å›æ‰€æœ‰æ•°æ®è¡¨ä¸Šçš„ä¹¦ç±æ•°æ®ï¼Œç„¶ååˆè¿è¡Œä¸€æ¬¡æŸ¥è¯¢è·å¾—æ¯æœ¬ä¹¦çš„ä½œè€…æ•°æ®ã€‚å¦‚æœæˆ‘ä»¬æœ‰ 25 æœ¬ä¹¦ï¼Œåˆ™å¾ªç¯å°±ä¼šæ‰§è¡Œ 26 æ¬¡æŸ¥è¯¢ï¼š1 æ¬¡æ˜¯è·å¾—æ‰€æœ‰ä¹¦ç±æ•°æ®ï¼Œå¦å¤– 25 æ¡æŸ¥è¯¢ç”¨æ¥è·å¾—æ¯æœ¬ä¹¦çš„ä½œè€…æ•°æ®ã€‚</p><p>è°¢å¤©è°¢åœ°ï¼Œæˆ‘ä»¬ä½¿ç”¨é¢„åŠ è½½è®©æ•´ä¸ªæŸ¥è¯¢å‡å°‘åˆ° 2 æ¬¡ã€‚è¿™æ˜¯é€šè¿‡æŒ‡å®šå…³è”ç»™ <code>with</code> æ–¹æ³•åŠåˆ°çš„ï¼š</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">$books = App\Book::with(&#x27;author&#x27;)-&gt;get();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">foreach ($books as $book) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    echo $book-&gt;author-&gt;name;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>æ•´ä¸ªæ“ä½œï¼Œåªæ‰§è¡Œäº†ä¸¤æ¡æŸ¥è¯¢ï¼š</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">select * from books</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">select * from authors where id in (1, 2, 3, 4, 5, ...)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="é¢„åŠ è½½å¤šä¸ªå…³è”">é¢„åŠ è½½å¤šä¸ªå…³è”<a class="hash-link" href="#é¢„åŠ è½½å¤šä¸ªå…³è”" title="Direct link to heading">â€‹</a></h4><p>æœ‰æ—¶ï¼Œä½ éœ€è¦åœ¨ä¸€æ¬¡æ“ä½œä¸­é¢„åŠ è½½å‡ ä¸ªä¸åŒçš„å…³è”ã€‚ä¸ºäº†å®ç°è¿™ä¸ªåŠŸèƒ½ï¼Œåªéœ€åœ¨ <code>with</code> æ–¹æ³•ä¸Šä¼ é€’é¢å¤–çš„å‚æ•°å³å¯ï¼š        </p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">$books = App\Book::with([&#x27;author&#x27;, &#x27;publisher&#x27;])-&gt;get();</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="åµŒå¥—é¢„åŠ è½½">åµŒå¥—é¢„åŠ è½½<a class="hash-link" href="#åµŒå¥—é¢„åŠ è½½" title="Direct link to heading">â€‹</a></h4><p>é¢„åŠ è½½åµŒå¥—å…³è”ï¼Œå¯ä»¥ä½¿ç”¨ã€Œç‚¹ã€è¯­æ³•ã€‚ä¾‹å¦‚ï¼Œåœ¨ä¸€ä¸ª Eloquent è¯­å¥ä¸­ï¼Œé¢„åŠ è½½æ‰€æœ‰ä¹¦ç±ä½œè€…å’Œè¿™äº›ä½œè€…çš„è”ç³»ä¿¡æ¯ï¼š</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">$books = App\Book::with(&#x27;author.contacts&#x27;)-&gt;get();</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="ä¸ºé¢„åŠ è½½æ·»åŠ çº¦æŸæ¡ä»¶">ä¸ºé¢„åŠ è½½æ·»åŠ çº¦æŸæ¡ä»¶<a class="hash-link" href="#ä¸ºé¢„åŠ è½½æ·»åŠ çº¦æŸæ¡ä»¶" title="Direct link to heading">â€‹</a></h3><p>æœ‰æ—¶ï¼Œä½ å¯èƒ½å¸Œæœ›åœ¨é¢„åŠ è½½å…³è”æ•°æ®çš„æ—¶å€™ï¼Œä¸ºæŸ¥è¯¢æŒ‡å®šé¢å¤–çš„çº¦æŸæ¡ä»¶ã€‚è¿™æœ‰ä¸ªä¾‹å­ï¼š</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">$users = App\User::with([&#x27;posts&#x27; =&gt; function ($query) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    $query-&gt;where(&#x27;title&#x27;, &#x27;like&#x27;, &#x27;%first%&#x27;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}])-&gt;get();</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼ŒEloquent åªä¼šé¢„åŠ è½½æ ‡é¢˜é‡ŒåŒ…å« <code>first</code> æ–‡æœ¬çš„æ–‡ç« ã€‚æ‚¨ä¹Ÿå¯ä»¥è°ƒç”¨å…¶å®ƒçš„ <a href="/docs/laravel/queries">æŸ¥è¯¢è¯­å¥æ„é€ å™¨</a> è¿›ä¸€æ­¥è‡ªå®šä¹‰é¢„åŠ è½½çº¦æŸæ¡ä»¶ï¼š</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">$users = App\User::with([&#x27;posts&#x27; =&gt; function ($query) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    $query-&gt;orderBy(&#x27;created_at&#x27;, &#x27;desc&#x27;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}])-&gt;get();</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="å»¶è¿Ÿé¢„åŠ è½½">å»¶è¿Ÿé¢„åŠ è½½<a class="hash-link" href="#å»¶è¿Ÿé¢„åŠ è½½" title="Direct link to heading">â€‹</a></h3><p>æœ‰æ—¶ï¼Œæ‚¨å¯èƒ½éœ€è¦åœ¨è·å¾—çˆ¶çº§æ¨¡å‹åæ‰å»é¢„åŠ è½½å…³è”æ•°æ®ã€‚ä¾‹å¦‚ï¼Œå½“ä½ éœ€è¦æ¥åŠ¨æ€å†³å®šæ˜¯å¦åŠ è½½å…³è”æ¨¡å‹æ—¶ï¼Œè¿™å¯èƒ½å¾ˆæœ‰å¸®åŠ©ï¼š</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">$books = App\Book::all();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">if ($someCondition) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    $books-&gt;load(&#x27;author&#x27;, &#x27;publisher&#x27;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>å¦‚æœæ‚¨æƒ³è®¾ç½®é¢„åŠ è½½æŸ¥è¯¢çš„é¢å¤–çº¦æŸæ¡ä»¶ï¼Œå¯ä»¥é€šè¿‡ç»™ <code>load</code> æ·»åŠ æ•°ç»„é”®çš„å½¢å¼è¾¾åˆ°ç›®çš„ï¼Œæ•°ç»„å€¼æ˜¯æ¥æ”¶æŸ¥è¯¢å®ä¾‹çš„é—­åŒ…ï¼š</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">$books-&gt;load([&#x27;author&#x27; =&gt; function ($query) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    $query-&gt;orderBy(&#x27;published_date&#x27;, &#x27;asc&#x27;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}]);</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="æ’å…¥--æ›´æ–°å…³è”æ¨¡å‹">æ’å…¥ &amp; æ›´æ–°å…³è”æ¨¡å‹<a class="hash-link" href="#æ’å…¥--æ›´æ–°å…³è”æ¨¡å‹" title="Direct link to heading">â€‹</a></h2><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="save-æ–¹æ³•"><code>save</code> æ–¹æ³•<a class="hash-link" href="#save-æ–¹æ³•" title="Direct link to heading">â€‹</a></h3><p>Eloquent æä¾›äº†ä¾¿æ·çš„æ–¹æ³•æ¥å°†æ–°çš„æ¨¡å‹å¢åŠ è‡³å…³è”ä¸­ã€‚ä¾‹å¦‚ï¼Œä¹Ÿè®¸ä½ éœ€è¦ä¸ºä¸€ä¸ª <code>Post</code> æ¨¡å‹æ’å…¥ä¸€ä¸ªæ–°çš„ <code>Comment</code>ã€‚è¿™æ˜¯ä½ æ— é¡»ä¸º <code>Comment</code> æ‰‹åŠ¨è®¾ç½® <code>posts</code> å±æ€§ï¼Œç›´æ¥åœ¨å…³è”ä¸Šä½¿ç”¨ <code>save</code> æ–¹æ³•æ’å…¥ <code>Comment</code> å³å¯ï¼š</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">$comment = new App\Comment([&#x27;message&#x27; =&gt; &#x27;ä¸€æ¡æ–°çš„è¯„è®ºã€‚&#x27;]);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$post = App\Post::find(1);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$post-&gt;comments()-&gt;save($comment);</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæˆ‘ä»¬æ²¡æœ‰ä½¿ç”¨åŠ¨æ€å±æ€§å½¢å¼è®¿é—® <code>comments</code> å…³è”ã€‚ç›¸åï¼Œæˆ‘ä»¬è°ƒç”¨äº† <code>comments</code> æ–¹æ³•è·å¾—å…³è”å®ä¾‹ã€‚<code>save</code> æ–¹æ³•ä¼šè‡ªåŠ¨åœ¨æ–°çš„ <code>Comment</code> æ¨¡å‹ä¸­æ·»åŠ æ­£ç¡®çš„ <code>post_id</code>å€¼ã€‚</p><p>å¦‚æœæ‚¨éœ€è¦ä¿å­˜å¤šä¸ªå…³è”æ¨¡å‹ï¼Œå¯ä»¥ä½¿ç”¨ <code>saveMany</code> æ–¹æ³•ï¼š</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">$post = App\Post::find(1);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$post-&gt;comments()-&gt;saveMany([</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    new App\Comment([&#x27;message&#x27; =&gt; &#x27;ä¸€æ¡æ–°çš„è¯„è®ºã€‚&#x27;]),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    new App\Comment([&#x27;message&#x27; =&gt; &#x27;å¦ä¸€æ¡è¯„è®ºã€‚&#x27;]),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">]);</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="create-æ–¹æ³•"><code>create</code> æ–¹æ³•<a class="hash-link" href="#create-æ–¹æ³•" title="Direct link to heading">â€‹</a></h3><p>é™¤äº† <code>save</code> å’Œ <code>saveMany</code> æ–¹æ³•ï¼Œæ‚¨ä¹Ÿå¯ä»¥ä½¿ç”¨ <code>create</code> æ–¹æ³•ï¼Œå®ƒæ¥æ”¶ä¸€ä¸ªå±æ€§æ•°ç»„ã€åˆ›å»ºæ¨¡å‹å¹¶æ’å…¥æ•°æ®åº“ã€‚è¿˜æœ‰ï¼Œ<code>save</code> å’Œ <code>create</code> çš„ä¸åŒä¹‹å¤„åœ¨äºï¼Œ<code>save</code> æ¥æ”¶çš„æ˜¯ä¸€ä¸ªå®Œæ•´çš„ Eloquent æ¨¡å‹å®ä¾‹ï¼Œè€Œ <code>create</code> æ¥æ”¶çš„æ˜¯ä¸€ä¸ªçº¯ PHP æ•°ç»„ï¼š</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">$post = App\Post::find(1);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$comment = $post-&gt;comments()-&gt;create([</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &#x27;message&#x27; =&gt; &#x27;ä¸€æ¡æ–°çš„è¯„è®ºã€‚&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">]);</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><blockquote><p>{tip} åœ¨ä½¿ç”¨ <code>create</code> æ–¹æ³•å‰ï¼Œè¯·ç¡®è®¤æ‚¨å·²ç»æµè§ˆäº†æœ¬æ–‡æ¡£çš„ <a href="/docs/laravel/eloquent#mass-assignment">æ‰¹é‡èµ‹å€¼</a> ç« èŠ‚ã€‚</p></blockquote><p>æ‚¨å¯ä»¥ä½¿ç”¨ <code>createMany</code> æ–¹æ³•ä¿å­˜å¤šä¸ªå…³è”æ¨¡å‹ï¼š</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">$post = App\Post::find(1);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$post-&gt;comments()-&gt;createMany([</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &#x27;message&#x27; =&gt; &#x27;ä¸€æ¡æ–°çš„è¯„è®ºã€‚&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &#x27;message&#x27; =&gt; &#x27;å¦ä¸€æ¡æ–°çš„è¯„è®ºã€‚&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">]);</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="æ›´æ–°-belongsto-å…³è”">æ›´æ–° <code>belongsTo</code> å…³è”<a class="hash-link" href="#æ›´æ–°-belongsto-å…³è”" title="Direct link to heading">â€‹</a></h3><p>å½“æ›´æ–° <code>belongsTo</code> å…³è”æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ <code>associate</code> æ–¹æ³•ã€‚æ­¤æ–¹æ³•ä¼šåœ¨å­æ¨¡å‹ä¸­è®¾ç½®å¤–é”®ï¼š</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">$account = App\Account::find(10);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$user-&gt;account()-&gt;associate($account);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$user-&gt;save();</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>å½“åˆ é™¤ <code>belongsTo</code> å…³è”æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ <code>dissociate</code>æ–¹æ³•ã€‚æ­¤æ–¹æ³•ä¼šè®¾ç½®å…³è”å¤–é”®ä¸º <code>null</code>ï¼š </p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">$user-&gt;account()-&gt;dissociate();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$user-&gt;save();</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="å¤šå¯¹å¤šå…³è”">å¤šå¯¹å¤šå…³è”<a class="hash-link" href="#å¤šå¯¹å¤šå…³è”" title="Direct link to heading">â€‹</a></h3><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="é™„åŠ --ç§»é™¤">é™„åŠ  / ç§»é™¤<a class="hash-link" href="#é™„åŠ --ç§»é™¤" title="Direct link to heading">â€‹</a></h4><p>Eloquent ä¹Ÿæä¾›äº†å‡ ä¸ªé¢å¤–çš„è¾…åŠ©æ–¹æ³•ï¼Œè®©æ“ä½œå…³è”æ¨¡å‹æ›´åŠ ä¾¿æ·ã€‚ä¾‹å¦‚ï¼šæˆ‘ä»¬å‡è®¾ä¸€ä¸ªç”¨æˆ·å¯ä»¥æ‹¥æœ‰å¤šä¸ªè§’è‰²ï¼Œå¹¶ä¸”æ¯ä¸ªè§’è‰²éƒ½å¯ä»¥è¢«å¤šä¸ªç”¨æˆ·å…±äº«ã€‚ç»™æŸä¸ªç”¨æˆ·é™„åŠ ä¸€ä¸ªè§’è‰²æ˜¯é€šè¿‡å‘ä¸­é—´è¡¨æ’å…¥ä¸€æ¡è®°å½•å®ç°çš„ï¼Œä½¿ç”¨ <code>attach</code> æ–¹æ³•ï¼š</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">$user = App\User::find(1);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$user-&gt;roles()-&gt;attach($roleId);</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>ä½¿ç”¨ <code>attach</code> æ–¹æ³•æ—¶ï¼Œæ‚¨ä¹Ÿå¯ä»¥é€šè¿‡ä¼ é€’ä¸€ä¸ªæ•°ç»„å‚æ•°å‘ä¸­é—´è¡¨å†™å…¥é¢å¤–æ•°æ®ï¼š</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">$user-&gt;roles()-&gt;attach($roleId, [&#x27;expires&#x27; =&gt; $expires]);</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>å½“ç„¶ï¼Œæœ‰æ—¶ä¹Ÿéœ€è¦ç§»é™¤ç”¨æˆ·çš„è§’è‰²ã€‚åˆ é™¤å¤šå¯¹å¤šå…³è”è®°å½•ï¼Œä½¿ç”¨ <code>detach</code> æ–¹æ³•ã€‚<code>detach</code> æ–¹æ³•ä¼šç§»é™¤æ‰æ­£ç¡®çš„è®°å½•ï¼›å½“ç„¶ï¼Œè¿™ä¸¤ä¸ªæ¨¡å‹æ•°æ®ä¾ç„¶ä¿å­˜åœ¨æ•°æ®åº“ä¸­ï¼š</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">// ç§»é™¤ç”¨æˆ·çš„ä¸€ä¸ªè§’è‰²...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$user-&gt;roles()-&gt;detach($roleId);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// ç§»é™¤ç”¨æˆ·çš„æ‰€æœ‰è§’è‰²...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$user-&gt;roles()-&gt;detach();</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>ä¸ºäº†æ–¹ä¾¿ï¼Œ<code>attach</code> å’Œ <code>detach</code> éƒ½å…è®¸ä¼ å…¥ ID æ•°ç»„ï¼š</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">$user = App\User::find(1);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$user-&gt;roles()-&gt;detach([1, 2, 3]);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$user-&gt;roles()-&gt;attach([</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    1 =&gt; [&#x27;expires&#x27; =&gt; $expires],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    2 =&gt; [&#x27;expires&#x27; =&gt; $expires]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">]);</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="åŒæ­¥å…³è”">åŒæ­¥å…³è”<a class="hash-link" href="#åŒæ­¥å…³è”" title="Direct link to heading">â€‹</a></h4><p>æ‚¨ä¹Ÿå¯ä»¥ä½¿ç”¨ <code>sync</code> æ–¹æ³•æ¥æ„é€ å¤šå¯¹å¤šå…³è”ã€‚<code>sync</code> æ–¹æ³•å¯ä»¥æ¥æ”¶ ID æ•°ç»„ï¼Œå‘ä¸­é—´è¡¨æ’å…¥å¯¹åº”å…³è”æ•°æ®è®°å½•ã€‚æ‰€æœ‰æ²¡æ”¾åœ¨æ•°ç»„é‡Œçš„ IDs éƒ½ä¼šä»ä¸­é—´è¡¨é‡Œç§»é™¤ã€‚æ‰€ä»¥ï¼Œè¿™æ­¥æ“ä½œå®Œæˆåï¼Œåªæœ‰åœ¨æ•°ç»„é‡Œçš„ IDs ä¼šè¢«ä¿ç•™åœ¨ä¸­é—´è¡¨ä¸­ã€‚</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">$user-&gt;roles()-&gt;sync([1, 2, 3]);</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>æ‚¨å¯ä»¥é€šè¿‡ ID ä¼ é€’å…¶ä»–é¢å¤–çš„æ•°æ®åˆ°ä¸­é—´è¡¨ï¼š</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">$user-&gt;roles()-&gt;sync([1 =&gt; [&#x27;expires&#x27; =&gt; true], 2, 3]);</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>å¦‚æœæ‚¨ä¸æƒ³ç§»é™¤ç°æœ‰çš„ IDsï¼Œå¯ä»¥ä½¿ç”¨ <code>syncWithoutDetaching</code> æ–¹æ³•ï¼š</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">$user-&gt;roles()-&gt;syncWithoutDetaching([1, 2, 3]);</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="åˆ‡æ¢å…³è”">åˆ‡æ¢å…³è”<a class="hash-link" href="#åˆ‡æ¢å…³è”" title="Direct link to heading">â€‹</a></h4><p>å¤šå¯¹å¤šå…³è”ä¹Ÿæä¾›äº†ä¸€ä¸ª <code>toggle</code> æ–¹æ³•ç”¨äºã€Œåˆ‡æ¢ã€ç»™å®š IDs çš„é™„åŠ çŠ¶æ€ã€‚å¦‚æœç»™å®š ID å·²é™„åŠ ï¼Œå°±ä¼šè¢«ç§»é™¤ã€‚åŒæ ·çš„ï¼Œå¦‚æœç»™å®š ID å·²ç§»é™¤ï¼Œå°±ä¼šè¢«é™„åŠ ï¼š</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">$user-&gt;roles()-&gt;toggle([1, 2, 3]);</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="åœ¨ä¸­é—´è¡¨ä¸Šä¿å­˜é¢å¤–æ•°æ®">åœ¨ä¸­é—´è¡¨ä¸Šä¿å­˜é¢å¤–æ•°æ®<a class="hash-link" href="#åœ¨ä¸­é—´è¡¨ä¸Šä¿å­˜é¢å¤–æ•°æ®" title="Direct link to heading">â€‹</a></h4><p>å½“å¤„ç†å¤šå¯¹å¤šå…³è”æ—¶ï¼Œ<code>save</code> æ–¹æ³•è¿˜å¯ä»¥ä½¿ç”¨ç¬¬äºŒä¸ªå‚æ•°ï¼Œå®ƒæ˜¯ä¸€ä¸ªå±æ€§æ•°ç»„ï¼ŒåŒ…å«æ’å…¥åˆ°ä¸­é—´è¡¨çš„é¢å¤–å­—æ®µæ•°æ®ã€‚</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">App\User::find(1)-&gt;roles()-&gt;save($role, [&#x27;expires&#x27; =&gt; $expires]);</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><h4 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="æ›´æ–°ä¸­é—´è¡¨è®°å½•">æ›´æ–°ä¸­é—´è¡¨è®°å½•<a class="hash-link" href="#æ›´æ–°ä¸­é—´è¡¨è®°å½•" title="Direct link to heading">â€‹</a></h4><p>å¦‚æœæ‚¨éœ€è¦æ›´æ–°ä¸­é—´è¡¨ä¸­å·²å­˜åœ¨çš„è®°å½•ï¼Œå¯ä»¥ä½¿ç”¨ <code>updateExistingPivot</code> æ–¹æ³•ã€‚æ­¤æ–¹æ³•æ¥æ”¶ä¸­é—´è®°å½•çš„å¤–é”®å’Œä¸€ä¸ªå±æ€§æ•°ç»„è¿›è¡Œæ›´æ–°ï¼š</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">$user = App\User::find(1);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$user-&gt;roles()-&gt;updateExistingPivot($roleId, $attributes);</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="æ›´æ–°çˆ¶çº§æ—¶é—´æˆ³">æ›´æ–°çˆ¶çº§æ—¶é—´æˆ³<a class="hash-link" href="#æ›´æ–°çˆ¶çº§æ—¶é—´æˆ³" title="Direct link to heading">â€‹</a></h2><p>å½“ä¸€ä¸ªæ¨¡å‹ <code>belongsTo</code> æˆ–è€… <code>belongsToMany</code> å¦ä¸€ä¸ªæ¨¡å‹ï¼Œæ¯”å¦‚ä¸€ä¸ª <code>Comment</code> å±äºä¸€ä¸ª <code>Post</code>ï¼Œæœ‰æ—¶æ›´æ–°å­æ¨¡å‹å¯¼è‡´æ›´æ–°çˆ¶æ¨¡å‹æ—¶é—´æˆ³éå¸¸æœ‰ç”¨ã€‚ä¾‹å¦‚ï¼Œå½“ä¸€ä¸ª <code>Comment</code> æ¨¡å‹æ›´æ–°æ—¶ï¼Œæ‚¨è¦è‡ªåŠ¨ã€Œè§¦å‘ã€çˆ¶çº§ <code>Post</code> æ¨¡å‹çš„ <code>updated_at</code> æ—¶é—´æˆ³çš„æ›´æ–°ï¼ŒEloquent è®©å®ƒå˜å¾—ç®€å•ã€‚åªè¦åœ¨å­æ¨¡å‹åŠ ä¸€ä¸ªåŒ…å«å…³è”åç§°çš„ <code>touches</code> å±æ€§å³å¯ï¼š</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;?php</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">namespace App;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">use Illuminate\Database\Eloquent\Model;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class Comment extends Model</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * æ‰€æœ‰ä¼šè¢«è§¦å‘çš„å…³è”ã€‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     *</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * @var array</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    protected $touches = [&#x27;post&#x27;];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * è·å¾—æ­¤è¯„è®ºæ‰€å±çš„æ–‡ç« ã€‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public function post()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return $this-&gt;belongsTo(&#x27;App\Post&#x27;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>ç°åœ¨ï¼Œå½“ä½ æ›´æ–°ä¸€ä¸ª <code>Comment</code> æ—¶ï¼Œå¯¹åº”çˆ¶çº§ <code>Post</code> æ¨¡å‹çš„ <code>updated_at</code> å­—æ®µä¹Ÿä¼šè¢«åŒæ—¶æ›´æ–°ï¼Œä½¿å…¶æ›´æ–¹ä¾¿å¾—çŸ¥ä½•æ—¶è®©ä¸€ä¸ª <code>Post</code> æ¨¡å‹çš„ç¼“å­˜å¤±æ•ˆï¼š</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">$comment = App\Comment::find(1);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$comment-&gt;text = &#x27;ç¼–è¾‘äº†è¿™æ¡è¯„è®ºï¼&#x27;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$comment-&gt;save();</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="è¯‘è€…ç½²å">è¯‘è€…ç½²å<a class="hash-link" href="#è¯‘è€…ç½²å" title="Direct link to heading">â€‹</a></h2><table><thead><tr><th>ç”¨æˆ·å</th><th>å¤´åƒ</th><th>èŒèƒ½</th><th>ç­¾å</th></tr></thead><tbody><tr><td><a href="https://laravel-china.org/users/17319" target="_blank" rel="noopener noreferrer">@baooab</a></td><td><img loading="lazy" class="avatar-66 rm-style" src="https://dn-phphub.qbox.me/uploads/images/201708/11/17319/KbHzLBdgHs.png?imageView2/1/w/100/h/100" class="img_E7b_"></td><td>ç¿»è¯‘</td><td>æˆ‘åœ¨ <a href="https://github.com/baooab/" target="_blank" rel="noopener noreferrer">è¿™å„¿</a></td></tr></tbody></table><hr><blockquote><p>{note} æ¬¢è¿ä»»ä½•å½¢å¼çš„è½¬è½½ï¼Œä½†è¯·åŠ¡å¿…æ³¨æ˜å‡ºå¤„ï¼Œå°Šé‡ä»–äººåŠ³åŠ¨å…±åˆ›å¼€æºç¤¾åŒºã€‚</p><p>è½¬è½½è¯·æ³¨æ˜ï¼šæœ¬æ–‡æ¡£ç”± Laravel China ç¤¾åŒº <a href="https://laravel-china.org" target="_blank" rel="noopener noreferrer">laravel-china.org</a> ç»„ç»‡ç¿»è¯‘ï¼Œè¯¦è§ <a href="https://laravel-china.org/topics/5756/laravel-55-document-translation-call-come-and-join-the-translation" target="_blank" rel="noopener noreferrer">ç¿»è¯‘å¬é›†å¸–</a>ã€‚</p><p>æ–‡æ¡£æ°¸ä¹…åœ°å€ï¼š <a href="https://d.laravel-china.org" target="_blank" rel="noopener noreferrer">https://d.laravel-china.org</a></p></blockquote></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/laravel/eloquent-mutators"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">eloquent-mutators</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/laravel/eloquent-resources"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">eloquent-resources</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_cNA8 thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#ç®€ä»‹" class="table-of-contents__link toc-highlight">ç®€ä»‹</a></li><li><a href="#å®šä¹‰å…³è”" class="table-of-contents__link toc-highlight">å®šä¹‰å…³è”</a><ul><li><a href="#ä¸€å¯¹ä¸€" class="table-of-contents__link toc-highlight">ä¸€å¯¹ä¸€</a></li><li><a href="#ä¸€å¯¹å¤š" class="table-of-contents__link toc-highlight">ä¸€å¯¹å¤š</a></li><li><a href="#ä¸€å¯¹å¤šåå‘" class="table-of-contents__link toc-highlight">ä¸€å¯¹å¤šï¼ˆåå‘ï¼‰</a></li><li><a href="#å¤šå¯¹å¤š" class="table-of-contents__link toc-highlight">å¤šå¯¹å¤š</a></li><li><a href="#è¿œå±‚ä¸€å¯¹å¤š" class="table-of-contents__link toc-highlight">è¿œå±‚ä¸€å¯¹å¤š</a></li><li><a href="#å¤šæ€å…³è”" class="table-of-contents__link toc-highlight">å¤šæ€å…³è”</a></li><li><a href="#å¤šå¯¹å¤šå¤šæ€å…³è”" class="table-of-contents__link toc-highlight">å¤šå¯¹å¤šå¤šæ€å…³è”</a></li></ul></li><li><a href="#æŸ¥è¯¢å…³è”" class="table-of-contents__link toc-highlight">æŸ¥è¯¢å…³è”</a><ul><li><a href="#å…³è”æ–¹æ³•-vs-åŠ¨æ€å±æ€§" class="table-of-contents__link toc-highlight">å…³è”æ–¹æ³• Vs. åŠ¨æ€å±æ€§</a></li><li><a href="#åŸºäºå­˜åœ¨çš„å…³è”æŸ¥è¯¢" class="table-of-contents__link toc-highlight">åŸºäºå­˜åœ¨çš„å…³è”æŸ¥è¯¢</a></li><li><a href="#åŸºäºä¸å­˜åœ¨çš„å…³è”æŸ¥è¯¢" class="table-of-contents__link toc-highlight">åŸºäºä¸å­˜åœ¨çš„å…³è”æŸ¥è¯¢</a></li><li><a href="#å…³è”æ•°æ®è®¡æ•°" class="table-of-contents__link toc-highlight">å…³è”æ•°æ®è®¡æ•°</a></li></ul></li><li><a href="#é¢„åŠ è½½" class="table-of-contents__link toc-highlight">é¢„åŠ è½½</a><ul><li><a href="#ä¸ºé¢„åŠ è½½æ·»åŠ çº¦æŸæ¡ä»¶" class="table-of-contents__link toc-highlight">ä¸ºé¢„åŠ è½½æ·»åŠ çº¦æŸæ¡ä»¶</a></li><li><a href="#å»¶è¿Ÿé¢„åŠ è½½" class="table-of-contents__link toc-highlight">å»¶è¿Ÿé¢„åŠ è½½</a></li></ul></li><li><a href="#æ’å…¥--æ›´æ–°å…³è”æ¨¡å‹" class="table-of-contents__link toc-highlight">æ’å…¥ &amp; æ›´æ–°å…³è”æ¨¡å‹</a><ul><li><a href="#save-æ–¹æ³•" class="table-of-contents__link toc-highlight"><code>save</code> æ–¹æ³•</a></li><li><a href="#create-æ–¹æ³•" class="table-of-contents__link toc-highlight"><code>create</code> æ–¹æ³•</a></li><li><a href="#æ›´æ–°-belongsto-å…³è”" class="table-of-contents__link toc-highlight">æ›´æ–° <code>belongsTo</code> å…³è”</a></li><li><a href="#å¤šå¯¹å¤šå…³è”" class="table-of-contents__link toc-highlight">å¤šå¯¹å¤šå…³è”</a></li></ul></li><li><a href="#æ›´æ–°çˆ¶çº§æ—¶é—´æˆ³" class="table-of-contents__link toc-highlight">æ›´æ–°çˆ¶çº§æ—¶é—´æˆ³</a></li><li><a href="#è¯‘è€…ç½²å" class="table-of-contents__link toc-highlight">è¯‘è€…ç½²å</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/intro">Tutorial</a></li></ul></div><div class="col footer__col"><div class="footer__title">Frameworks</div><ul class="footer__items"><li class="footer__item"><a href="https://vuejs.org/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Vue<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://reactjs.org/" target="_blank" rel="noopener noreferrer" class="footer__link-item">React<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://svelte.dev/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Svelte<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/bornkiss/dinosaur" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2022 Bornkiss, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.57d802bb.js"></script>
<script src="/assets/js/main.903e1189.js"></script>
</body>
</html>